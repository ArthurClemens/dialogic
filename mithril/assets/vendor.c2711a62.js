function He(n){return oe(function(){return n.map(function(a){return a()})},n)}function Oe(n){return n._state==="pending"||n._state==="active"||n._state==="changing"}var R=function(n){var a,u=[],o=[];function h(c){return arguments.length&&c!==R.SKIP&&(n=c,Oe(h)&&(h._changing(),h._state="active",u.slice().forEach(function(l,s){Oe(l)&&l(this[s](n))},o.slice()))),n}function m(){return(a=R()).map(function(c){return c===!0&&(h._parents.forEach(function(l){l._unregisterChild(h)}),h._state="ended",h._parents.length=u.length=o.length=0),c}),a}return h.constructor=R,h._state=arguments.length&&n!==R.SKIP?"active":"pending",h._parents=[],h._changing=function(){Oe(h)&&(h._state="changing"),u.forEach(function(c){c._changing()})},h._map=function(c,l){var s=l?R():R(c(n));return s._parents.push(h),u.push(s),o.push(c),s},h.map=function(c){return h._map(c,h._state!=="active")},h.toJSON=function(){return n!=null&&typeof n.toJSON=="function"?n.toJSON():n},h["fantasy-land/map"]=h.map,h["fantasy-land/ap"]=function(c){return oe(function(l,s){return l()(s())},[c,h])},h._unregisterChild=function(c){var l=u.indexOf(c);l!==-1&&(u.splice(l,1),o.splice(l,1))},Object.defineProperty(h,"end",{get:function(){return a||m()}}),h};function oe(n,a){var u=a.every(function(l){if(l.constructor!==R)throw new Error("Ensure that each item passed to stream.combine/stream.merge/lift is a stream.");return l._state==="active"}),o=u?R(n.apply(null,a.concat([a]))):R(),h=[],m=a.map(function(l){return l._map(function(s){return h.push(l),(u||a.every(function(y){return y._state!=="pending"}))&&(u=!0,o(n.apply(null,a.concat([h]))),h=[]),s},!0)}),c=o.end.map(function(l){l===!0&&(m.forEach(function(s){s.end(!0)}),c.end(!0))});return o}R.SKIP={},R.lift=function(){var n=arguments[0],a=Array.prototype.slice.call(arguments,1);return He(a).map(function(u){return n.apply(void 0,u)})},R.scan=function(n,a,u){var o=u.map(function(h){var m=n(a,h);return m!==R.SKIP&&(a=m),m});return o(a),o},R.merge=He,R.combine=oe,R.scanMerge=function(n,a){var u=n.map(function(h){return h[0]}),o=oe(function(){var h=arguments[arguments.length-1];return u.forEach(function(m,c){h.indexOf(m)>-1&&(a=n[c][1](a,m()))}),a},u);return o(a),o},R["fantasy-land/of"]=R;var Se=!1;Object.defineProperty(R,"HALT",{get:function(){return Se||console.log("HALT is deprecated and has been renamed to SKIP"),Se=!0,R.SKIP}});var te=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function k(n,a,u,o,h,m){return{tag:n,key:a,attrs:u,children:o,text:h,dom:m,domSize:void 0,state:void 0,events:void 0,instance:void 0}}k.normalize=function(n){return Array.isArray(n)?k("[",void 0,void 0,k.normalizeChildren(n),void 0,void 0):n==null||typeof n=="boolean"?null:typeof n=="object"?n:k("#",void 0,void 0,String(n),void 0,void 0)};k.normalizeChildren=function(n){var a=[];if(n.length){for(var u=n[0]!=null&&n[0].key!=null,o=1;o<n.length;o++)if((n[o]!=null&&n[o].key!=null)!==u)throw new TypeError("Vnodes must either always have keys or never have keys!");for(var o=0;o<n.length;o++)a[o]=k.normalize(n[o])}return a};var G=k,ct=G,De=function(){var n=arguments[this],a=this+1,u;if(n==null?n={}:(typeof n!="object"||n.tag!=null||Array.isArray(n))&&(n={},a=this),arguments.length===a+1)u=arguments[a],Array.isArray(u)||(u=[u]);else for(u=[];a<arguments.length;)u.push(arguments[a++]);return ct("",n.key,n,u)},Fe=G,st=De,ot=/(?:(^|#|\.)([^#\.\[\]]+))|(\[(.+?)(?:\s*=\s*("|'|)((?:\\["'\]]|.)*?)\5)?\])/g,Ue={},re={}.hasOwnProperty;function Ke(n){for(var a in n)if(re.call(n,a))return!1;return!0}function ht(n){for(var a,u="div",o=[],h={};a=ot.exec(n);){var m=a[1],c=a[2];if(m===""&&c!=="")u=c;else if(m==="#")h.id=c;else if(m===".")o.push(c);else if(a[3][0]==="["){var l=a[6];l&&(l=l.replace(/\\(["'])/g,"$1").replace(/\\\\/g,"\\")),a[4]==="class"?o.push(l):h[a[4]]=l===""?l:l||!0}}return o.length>0&&(h.className=o.join(" ")),Ue[n]={tag:u,attrs:h}}function mt(n,a){var u=a.attrs,o=Fe.normalizeChildren(a.children),h=re.call(u,"class"),m=h?u.class:u.className;if(a.tag=n.tag,a.attrs=null,a.children=void 0,!Ke(n.attrs)&&!Ke(u)){var c={};for(var l in u)re.call(u,l)&&(c[l]=u[l]);u=c}for(var l in n.attrs)re.call(n.attrs,l)&&l!=="className"&&!re.call(u,l)&&(u[l]=n.attrs[l]);(m!=null||n.attrs.className!=null)&&(u.className=m!=null?n.attrs.className!=null?String(n.attrs.className)+" "+String(m):m:n.attrs.className!=null?n.attrs.className:null),h&&(u.class=null);for(var l in u)if(re.call(u,l)&&l!=="key"){a.attrs=u;break}return Array.isArray(o)&&o.length===1&&o[0]!=null&&o[0].tag==="#"?a.text=o[0].children:a.children=o,a}function pt(n){if(n==null||typeof n!="string"&&typeof n!="function"&&typeof n.view!="function")throw Error("The selector must be either a string or a component.");var a=st.apply(1,arguments);return typeof n=="string"&&(a.children=Fe.normalizeChildren(a.children),n!=="[")?mt(Ue[n]||ht(n),a):(a.tag=n,a)}var Je=pt,yt=G,gt=function(n){return n==null&&(n=""),yt("<",void 0,void 0,n,void 0,void 0)},wt=G,bt=De,xt=function(){var n=bt.apply(0,arguments);return n.tag="[",n.children=wt.normalizeChildren(n.children),n},_e=Je;_e.trust=gt;_e.fragment=xt;var Ct=_e,ae={exports:{}},M=function(n){if(!(this instanceof M))throw new Error("Promise must be called with `new`");if(typeof n!="function")throw new TypeError("executor must be a function");var a=this,u=[],o=[],h=s(u,!0),m=s(o,!1),c=a._instance={resolvers:u,rejectors:o},l=typeof setImmediate=="function"?setImmediate:setTimeout;function s(w,b){return function P(g){var E;try{if(b&&g!=null&&(typeof g=="object"||typeof g=="function")&&typeof(E=g.then)=="function"){if(g===a)throw new TypeError("Promise can't be resolved w/ itself");y(E.bind(g))}else l(function(){!b&&w.length===0&&console.error("Possible unhandled promise rejection:",g);for(var x=0;x<w.length;x++)w[x](g);u.length=0,o.length=0,c.state=b,c.retry=function(){P(g)}})}catch(x){m(x)}}}function y(w){var b=0;function P(E){return function(x){b++>0||E(x)}}var g=P(m);try{w(P(h),g)}catch(E){g(E)}}y(n)};M.prototype.then=function(n,a){var u=this,o=u._instance;function h(s,y,w,b){y.push(function(P){if(typeof s!="function")w(P);else try{m(s(P))}catch(g){c&&c(g)}}),typeof o.retry=="function"&&b===o.state&&o.retry()}var m,c,l=new M(function(s,y){m=s,c=y});return h(n,o.resolvers,m,!0),h(a,o.rejectors,c,!1),l};M.prototype.catch=function(n){return this.then(null,n)};M.prototype.finally=function(n){return this.then(function(a){return M.resolve(n()).then(function(){return a})},function(a){return M.resolve(n()).then(function(){return M.reject(a)})})};M.resolve=function(n){return n instanceof M?n:new M(function(a){a(n)})};M.reject=function(n){return new M(function(a,u){u(n)})};M.all=function(n){return new M(function(a,u){var o=n.length,h=0,m=[];if(n.length===0)a([]);else for(var c=0;c<n.length;c++)(function(l){function s(y){h++,m[l]=y,h===o&&a(m)}n[l]!=null&&(typeof n[l]=="object"||typeof n[l]=="function")&&typeof n[l].then=="function"?n[l].then(s,u):s(n[l])})(c)})};M.race=function(n){return new M(function(a,u){for(var o=0;o<n.length;o++)n[o].then(a,u)})};var Ve=M,fe=Ve;typeof window!="undefined"?(typeof window.Promise=="undefined"?window.Promise=fe:window.Promise.prototype.finally||(window.Promise.prototype.finally=fe.prototype.finally),ae.exports=window.Promise):typeof te!="undefined"?(typeof te.Promise=="undefined"?te.Promise=fe:te.Promise.prototype.finally||(te.Promise.prototype.finally=fe.prototype.finally),ae.exports=te.Promise):ae.exports=fe;var ne=G,Et=function(n){var a=n&&n.document,u,o={svg:"http://www.w3.org/2000/svg",math:"http://www.w3.org/1998/Math/MathML"};function h(t){return t.attrs&&t.attrs.xmlns||o[t.tag]}function m(t,e){if(t.state!==e)throw new Error("`vnode.state` must not be modified")}function c(t){var e=t.state;try{return this.apply(e,arguments)}finally{m(t,e)}}function l(){try{return a.activeElement}catch(t){return null}}function s(t,e,r,i,f,p,N){for(var T=r;T<i;T++){var C=e[T];C!=null&&y(t,C,f,N,p)}}function y(t,e,r,i,f){var p=e.tag;if(typeof p=="string")switch(e.state={},e.attrs!=null&&be(e.attrs,e,r),p){case"#":w(t,e,f);break;case"<":P(t,e,i,f);break;case"[":g(t,e,r,i,f);break;default:E(t,e,r,i,f)}else A(t,e,r,i,f)}function w(t,e,r){e.dom=a.createTextNode(e.children),Y(t,e.dom,r)}var b={caption:"table",thead:"table",tbody:"table",tfoot:"table",tr:"tbody",th:"tr",td:"tr",colgroup:"table",col:"colgroup"};function P(t,e,r,i){var f=e.children.match(/^\s*?<(\w+)/im)||[],p=a.createElement(b[f[1]]||"div");r==="http://www.w3.org/2000/svg"?(p.innerHTML='<svg xmlns="http://www.w3.org/2000/svg">'+e.children+"</svg>",p=p.firstChild):p.innerHTML=e.children,e.dom=p.firstChild,e.domSize=p.childNodes.length,e.instance=[];for(var N=a.createDocumentFragment(),T;T=p.firstChild;)e.instance.push(T),N.appendChild(T);Y(t,N,i)}function g(t,e,r,i,f){var p=a.createDocumentFragment();if(e.children!=null){var N=e.children;s(p,N,0,N.length,r,null,i)}e.dom=p.firstChild,e.domSize=p.childNodes.length,Y(t,p,f)}function E(t,e,r,i,f){var p=e.tag,N=e.attrs,T=N&&N.is;i=h(e)||i;var C=i?T?a.createElementNS(i,p,{is:T}):a.createElementNS(i,p):T?a.createElement(p,{is:T}):a.createElement(p);if(e.dom=C,N!=null&&et(e,N,i),Y(t,C,f),!v(e)&&(e.text!=null&&(e.text!==""?C.textContent=e.text:e.children=[ne("#",void 0,void 0,e.text,void 0,void 0)]),e.children!=null)){var _=e.children;s(C,_,0,_.length,r,null,i),e.tag==="select"&&N!=null&&rt(e,N)}}function x(t,e){var r;if(typeof t.tag.view=="function"){if(t.state=Object.create(t.tag),r=t.state.view,r.$$reentrantLock$$!=null)return;r.$$reentrantLock$$=!0}else{if(t.state=void 0,r=t.tag,r.$$reentrantLock$$!=null)return;r.$$reentrantLock$$=!0,t.state=t.tag.prototype!=null&&typeof t.tag.prototype.view=="function"?new t.tag(t):t.tag(t)}if(be(t.state,t,e),t.attrs!=null&&be(t.attrs,t,e),t.instance=ne.normalize(c.call(t.state.view,t)),t.instance===t)throw Error("A view cannot return the vnode it received as argument");r.$$reentrantLock$$=null}function A(t,e,r,i,f){x(e,r),e.instance!=null?(y(t,e.instance,r,i,f),e.dom=e.instance.dom,e.domSize=e.dom!=null?e.instance.domSize:0):e.domSize=0}function O(t,e,r,i,f,p){if(!(e===r||e==null&&r==null))if(e==null||e.length===0)s(t,r,0,r.length,i,f,p);else if(r==null||r.length===0)Q(t,e,0,e.length);else{var N=e[0]!=null&&e[0].key!=null,T=r[0]!=null&&r[0].key!=null,C=0,_=0;if(!N)for(;_<e.length&&e[_]==null;)_++;if(!T)for(;C<r.length&&r[C]==null;)C++;if(T===null&&N==null)return;if(N!==T)Q(t,e,_,e.length),s(t,r,C,r.length,i,f,p);else if(T){for(var F=e.length-1,q=r.length-1,se,U,L,S,z,Ee;F>=_&&q>=C&&(S=e[F],z=r[q],S.key===z.key);)S!==z&&I(t,S,z,i,f,p),z.dom!=null&&(f=z.dom),F--,q--;for(;F>=_&&q>=C&&(U=e[_],L=r[C],U.key===L.key);)_++,C++,U!==L&&I(t,U,L,i,V(e,_,f),p);for(;F>=_&&q>=C&&!(C===q||U.key!==z.key||S.key!==L.key);)Ee=V(e,_,f),J(t,S,Ee),S!==L&&I(t,S,L,i,Ee,p),++C<=--q&&J(t,U,f),U!==z&&I(t,U,z,i,f,p),z.dom!=null&&(f=z.dom),_++,F--,S=e[F],z=r[q],U=e[_],L=r[C];for(;F>=_&&q>=C&&S.key===z.key;)S!==z&&I(t,S,z,i,f,p),z.dom!=null&&(f=z.dom),F--,q--,S=e[F],z=r[q];if(C>q)Q(t,e,_,F+1);else if(_>F)s(t,r,C,q+1,i,f,p);else{var lt=f,Me=q-C+1,ie=new Array(Me),Pe=0,j=0,Ne=2147483647,Te=0,se,Ae;for(j=0;j<Me;j++)ie[j]=-1;for(j=q;j>=C;j--){se==null&&(se=B(e,_,F+1)),z=r[j];var ee=se[z.key];ee!=null&&(Ne=ee<Ne?ee:-1,ie[j-C]=ee,S=e[ee],e[ee]=null,S!==z&&I(t,S,z,i,f,p),z.dom!=null&&(f=z.dom),Te++)}if(f=lt,Te!==F-_+1&&Q(t,e,_,F+1),Te===0)s(t,r,C,q+1,i,f,p);else if(Ne===-1)for(Ae=W(ie),Pe=Ae.length-1,j=q;j>=C;j--)L=r[j],ie[j-C]===-1?y(t,L,i,p,f):Ae[Pe]===j-C?Pe--:J(t,L,f),L.dom!=null&&(f=r[j].dom);else for(j=q;j>=C;j--)L=r[j],ie[j-C]===-1&&y(t,L,i,p,f),L.dom!=null&&(f=r[j].dom)}}else{var Ce=e.length<r.length?e.length:r.length;for(C=C<_?C:_;C<Ce;C++)U=e[C],L=r[C],!(U===L||U==null&&L==null)&&(U==null?y(t,L,i,p,V(e,C+1,f)):L==null?le(t,U):I(t,U,L,i,V(e,C+1,f),p));e.length>Ce&&Q(t,e,C,e.length),r.length>Ce&&s(t,r,C,r.length,i,f,p)}}}function I(t,e,r,i,f,p){var N=e.tag,T=r.tag;if(N===T){if(r.state=e.state,r.events=e.events,ut(r,e))return;if(typeof N=="string")switch(r.attrs!=null&&xe(r.attrs,r,i),N){case"#":X(e,r);break;case"<":Z(t,e,r,p,f);break;case"[":d(t,e,r,i,f,p);break;default:$(e,r,i,p)}else H(t,e,r,i,f,p)}else le(t,e),y(t,r,i,p,f)}function X(t,e){t.children.toString()!==e.children.toString()&&(t.dom.nodeValue=e.children),e.dom=t.dom}function Z(t,e,r,i,f){e.children!==r.children?(Re(t,e),P(t,r,i,f)):(r.dom=e.dom,r.domSize=e.domSize,r.instance=e.instance)}function d(t,e,r,i,f,p){O(t,e.children,r.children,i,f,p);var N=0,T=r.children;if(r.dom=null,T!=null){for(var C=0;C<T.length;C++){var _=T[C];_!=null&&_.dom!=null&&(r.dom==null&&(r.dom=_.dom),N+=_.domSize||1)}N!==1&&(r.domSize=N)}}function $(t,e,r,i){var f=e.dom=t.dom;i=h(e)||i,e.tag==="textarea"&&(e.attrs==null&&(e.attrs={}),e.text!=null&&(e.attrs.value=e.text,e.text=void 0)),nt(e,t.attrs,e.attrs,i),v(e)||(t.text!=null&&e.text!=null&&e.text!==""?t.text.toString()!==e.text.toString()&&(t.dom.firstChild.nodeValue=e.text):(t.text!=null&&(t.children=[ne("#",void 0,void 0,t.text,void 0,t.dom.firstChild)]),e.text!=null&&(e.children=[ne("#",void 0,void 0,e.text,void 0,void 0)]),O(f,t.children,e.children,r,null,i)))}function H(t,e,r,i,f,p){if(r.instance=ne.normalize(c.call(r.state.view,r)),r.instance===r)throw Error("A view cannot return the vnode it received as argument");xe(r.state,r,i),r.attrs!=null&&xe(r.attrs,r,i),r.instance!=null?(e.instance==null?y(t,r.instance,i,p,f):I(t,e.instance,r.instance,i,f,p),r.dom=r.instance.dom,r.domSize=r.instance.domSize):e.instance!=null?(le(t,e.instance),r.dom=void 0,r.domSize=0):(r.dom=e.dom,r.domSize=e.domSize)}function B(t,e,r){for(var i=Object.create(null);e<r;e++){var f=t[e];if(f!=null){var p=f.key;p!=null&&(i[p]=e)}}return i}var K=[];function W(t){for(var e=[0],r=0,i=0,f=0,p=K.length=t.length,f=0;f<p;f++)K[f]=t[f];for(var f=0;f<p;++f)if(t[f]!==-1){var N=e[e.length-1];if(t[N]<t[f]){K[f]=N,e.push(f);continue}for(r=0,i=e.length-1;r<i;){var T=(r>>>1)+(i>>>1)+(r&i&1);t[e[T]]<t[f]?r=T+1:i=T}t[f]<t[e[r]]&&(r>0&&(K[f]=e[r-1]),e[r]=f)}for(r=e.length,i=e[r-1];r-- >0;)e[r]=i,i=K[i];return K.length=0,e}function V(t,e,r){for(;e<t.length;e++)if(t[e]!=null&&t[e].dom!=null)return t[e].dom;return r}function J(t,e,r){var i=a.createDocumentFragment();ue(t,i,e),Y(t,i,r)}function ue(t,e,r){for(;r.dom!=null&&r.dom.parentNode===t;){if(typeof r.tag!="string"){if(r=r.instance,r!=null)continue}else if(r.tag==="<")for(var i=0;i<r.instance.length;i++)e.appendChild(r.instance[i]);else if(r.tag!=="[")e.appendChild(r.dom);else if(r.children.length===1){if(r=r.children[0],r!=null)continue}else for(var i=0;i<r.children.length;i++){var f=r.children[i];f!=null&&ue(t,e,f)}break}}function Y(t,e,r){r!=null?t.insertBefore(e,r):t.appendChild(e)}function v(t){if(t.attrs==null||t.attrs.contenteditable==null&&t.attrs.contentEditable==null)return!1;var e=t.children;if(e!=null&&e.length===1&&e[0].tag==="<"){var r=e[0].children;t.dom.innerHTML!==r&&(t.dom.innerHTML=r)}else if(t.text!=null||e!=null&&e.length!==0)throw new Error("Child node of a contenteditable must be trusted");return!0}function Q(t,e,r,i){for(var f=r;f<i;f++){var p=e[f];p!=null&&le(t,p)}}function le(t,e){var r=0,i=e.state,f,p;if(typeof e.tag!="string"&&typeof e.state.onbeforeremove=="function"){var N=c.call(e.state.onbeforeremove,e);N!=null&&typeof N.then=="function"&&(r=1,f=N)}if(e.attrs&&typeof e.attrs.onbeforeremove=="function"){var N=c.call(e.attrs.onbeforeremove,e);N!=null&&typeof N.then=="function"&&(r|=2,p=N)}if(m(e,i),!r)ce(e),me(t,e);else{if(f!=null){var T=function(){r&1&&(r&=2,r||C())};f.then(T,T)}if(p!=null){var T=function(){r&2&&(r&=1,r||C())};p.then(T,T)}}function C(){m(e,i),ce(e),me(t,e)}}function Re(t,e){for(var r=0;r<e.instance.length;r++)t.removeChild(e.instance[r])}function me(t,e){for(;e.dom!=null&&e.dom.parentNode===t;){if(typeof e.tag!="string"){if(e=e.instance,e!=null)continue}else if(e.tag==="<")Re(t,e);else{if(e.tag!=="["&&(t.removeChild(e.dom),!Array.isArray(e.children)))break;if(e.children.length===1){if(e=e.children[0],e!=null)continue}else for(var r=0;r<e.children.length;r++){var i=e.children[r];i!=null&&me(t,i)}}break}}function ce(t){if(typeof t.tag!="string"&&typeof t.state.onremove=="function"&&c.call(t.state.onremove,t),t.attrs&&typeof t.attrs.onremove=="function"&&c.call(t.attrs.onremove,t),typeof t.tag!="string")t.instance!=null&&ce(t.instance);else{var e=t.children;if(Array.isArray(e))for(var r=0;r<e.length;r++){var i=e[r];i!=null&&ce(i)}}}function et(t,e,r){for(var i in e)pe(t,i,null,e[i],r)}function pe(t,e,r,i,f){if(!(e==="key"||e==="is"||i==null||ye(e)||r===i&&!it(t,e)&&typeof i!="object")){if(e[0]==="o"&&e[1]==="n")return qe(t,e,i);if(e.slice(0,6)==="xlink:")t.dom.setAttributeNS("http://www.w3.org/1999/xlink",e.slice(6),i);else if(e==="style")de(t.dom,r,i);else if(Ie(t,e,f)){if(e==="value"&&((t.tag==="input"||t.tag==="textarea")&&t.dom.value===""+i&&t.dom===l()||t.tag==="select"&&r!==null&&t.dom.value===""+i||t.tag==="option"&&r!==null&&t.dom.value===""+i))return;t.tag==="input"&&e==="type"?t.dom.setAttribute(e,i):t.dom[e]=i}else typeof i=="boolean"?i?t.dom.setAttribute(e,""):t.dom.removeAttribute(e):t.dom.setAttribute(e==="className"?"class":e,i)}}function tt(t,e,r,i){if(!(e==="key"||e==="is"||r==null||ye(e)))if(e[0]==="o"&&e[1]==="n"&&!ye(e))qe(t,e,void 0);else if(e==="style")de(t.dom,r,null);else if(Ie(t,e,i)&&e!=="className"&&!(e==="value"&&(t.tag==="option"||t.tag==="select"&&t.dom.selectedIndex===-1&&t.dom===l()))&&!(t.tag==="input"&&e==="type"))t.dom[e]=null;else{var f=e.indexOf(":");f!==-1&&(e=e.slice(f+1)),r!==!1&&t.dom.removeAttribute(e==="className"?"class":e)}}function rt(t,e){if("value"in e)if(e.value===null)t.dom.selectedIndex!==-1&&(t.dom.value=null);else{var r=""+e.value;(t.dom.value!==r||t.dom.selectedIndex===-1)&&(t.dom.value=r)}"selectedIndex"in e&&pe(t,"selectedIndex",null,e.selectedIndex,void 0)}function nt(t,e,r,i){if(r!=null)for(var f in r)pe(t,f,e&&e[f],r[f],i);var p;if(e!=null)for(var f in e)(p=e[f])!=null&&(r==null||r[f]==null)&&tt(t,f,p,i)}function it(t,e){return e==="value"||e==="checked"||e==="selectedIndex"||e==="selected"&&t.dom===l()||t.tag==="option"&&t.dom.parentNode===a.activeElement}function ye(t){return t==="oninit"||t==="oncreate"||t==="onupdate"||t==="onremove"||t==="onbeforeremove"||t==="onbeforeupdate"}function Ie(t,e,r){return r===void 0&&(t.tag.indexOf("-")>-1||t.attrs!=null&&t.attrs.is||e!=="href"&&e!=="list"&&e!=="form"&&e!=="width"&&e!=="height")&&e in t.dom}var at=/[A-Z]/g;function ft(t){return"-"+t.toLowerCase()}function ge(t){return t[0]==="-"&&t[1]==="-"?t:t==="cssFloat"?"float":t.replace(at,ft)}function de(t,e,r){if(e!==r)if(r==null)t.style.cssText="";else if(typeof r!="object")t.style.cssText=r;else if(e==null||typeof e!="object"){t.style.cssText="";for(var i in r){var f=r[i];f!=null&&t.style.setProperty(ge(i),String(f))}}else{for(var i in r){var f=r[i];f!=null&&(f=String(f))!==String(e[i])&&t.style.setProperty(ge(i),f)}for(var i in e)e[i]!=null&&r[i]==null&&t.style.removeProperty(ge(i))}}function we(){this._=u}we.prototype=Object.create(null),we.prototype.handleEvent=function(t){var e=this["on"+t.type],r;typeof e=="function"?r=e.call(t.currentTarget,t):typeof e.handleEvent=="function"&&e.handleEvent(t),this._&&t.redraw!==!1&&(0,this._)(),r===!1&&(t.preventDefault(),t.stopPropagation())};function qe(t,e,r){if(t.events!=null){if(t.events[e]===r)return;r!=null&&(typeof r=="function"||typeof r=="object")?(t.events[e]==null&&t.dom.addEventListener(e.slice(2),t.events,!1),t.events[e]=r):(t.events[e]!=null&&t.dom.removeEventListener(e.slice(2),t.events,!1),t.events[e]=void 0)}else r!=null&&(typeof r=="function"||typeof r=="object")&&(t.events=new we,t.dom.addEventListener(e.slice(2),t.events,!1),t.events[e]=r)}function be(t,e,r){typeof t.oninit=="function"&&c.call(t.oninit,e),typeof t.oncreate=="function"&&r.push(c.bind(t.oncreate,e))}function xe(t,e,r){typeof t.onupdate=="function"&&r.push(c.bind(t.onupdate,e))}function ut(t,e){do{if(t.attrs!=null&&typeof t.attrs.onbeforeupdate=="function"){var r=c.call(t.attrs.onbeforeupdate,t,e);if(r!==void 0&&!r)break}if(typeof t.tag!="string"&&typeof t.state.onbeforeupdate=="function"){var r=c.call(t.state.onbeforeupdate,t,e);if(r!==void 0&&!r)break}return!1}while(!1);return t.dom=e.dom,t.domSize=e.domSize,t.instance=e.instance,t.attrs=e.attrs,t.children=e.children,t.text=e.text,!0}return function(t,e,r){if(!t)throw new TypeError("Ensure the DOM element being passed to m.route/m.mount/m.render is not undefined.");var i=[],f=l(),p=t.namespaceURI;t.vnodes==null&&(t.textContent=""),e=ne.normalizeChildren(Array.isArray(e)?e:[e]);var N=u;try{u=typeof r=="function"?r:void 0,O(t,t.vnodes,e,i,null,p==="http://www.w3.org/1999/xhtml"?void 0:p)}finally{u=N}t.vnodes=e,f!=null&&l()!==f&&typeof f.focus=="function"&&f.focus();for(var T=0;T<i.length;T++)i[T]()}},Qe=Et(window),Be=G,Pt=function(n,a,u){var o=[],h=!1,m=!1;function c(){if(h)throw new Error("Nested m.redraw.sync() call");h=!0;for(var y=0;y<o.length;y+=2)try{n(o[y],Be(o[y+1]),l)}catch(w){u.error(w)}h=!1}function l(){m||(m=!0,a(function(){m=!1,c()}))}l.sync=c;function s(y,w){if(w!=null&&w.view==null&&typeof w!="function")throw new TypeError("m.mount(element, component) expects a component, not a vnode");var b=o.indexOf(y);b>=0&&(o.splice(b,2),n(y,[],l)),w!=null&&(o.push(y,w),n(y,Be(w),l))}return{mount:s,redraw:l}},Nt=Qe,$e=Pt(Nt,requestAnimationFrame,console),Ge=function(n){if(Object.prototype.toString.call(n)!=="[object Object]")return"";var a=[];for(var u in n)o(u,n[u]);return a.join("&");function o(h,m){if(Array.isArray(m))for(var c=0;c<m.length;c++)o(h+"["+c+"]",m[c]);else if(Object.prototype.toString.call(m)==="[object Object]")for(var c in m)o(h+"["+c+"]",m[c]);else a.push(encodeURIComponent(h)+(m!=null&&m!==""?"="+encodeURIComponent(m):""))}},Xe=Object.assign||function(n,a){a&&Object.keys(a).forEach(function(u){n[u]=a[u]})},Tt=Ge,At=Xe,ze=function(n,a){if(/:([^\/\.-]+)(\.{3})?:/.test(n))throw new SyntaxError("Template parameter names *must* be separated");if(a==null)return n;var u=n.indexOf("?"),o=n.indexOf("#"),h=o<0?n.length:o,m=u<0?h:u,c=n.slice(0,m),l={};At(l,a);var s=c.replace(/:([^\/\.-]+)(\.{3})?/g,function(x,A,O){return delete l[A],a[A]==null?x:O?a[A]:encodeURIComponent(String(a[A]))}),y=s.indexOf("?"),w=s.indexOf("#"),b=w<0?s.length:w,P=y<0?b:y,g=s.slice(0,P);u>=0&&(g+=n.slice(u,h)),y>=0&&(g+=(u<0?"?":"&")+s.slice(y,b));var E=Tt(l);return E&&(g+=(u<0&&y<0?"?":"&")+E),o>=0&&(g+=n.slice(o)),w>=0&&(g+=(o<0?"":"&")+s.slice(w)),g},Ot=ze,_t=function(n,a,u){var o=0;function h(l){return new a(l)}h.prototype=a.prototype,h.__proto__=a;function m(l){return function(s,y){typeof s!="string"?(y=s,s=s.url):y==null&&(y={});var w=new a(function(E,x){l(Ot(s,y.params),y,function(A){if(typeof y.type=="function")if(Array.isArray(A))for(var O=0;O<A.length;O++)A[O]=new y.type(A[O]);else A=new y.type(A);E(A)},x)});if(y.background===!0)return w;var b=0;function P(){--b==0&&typeof u=="function"&&u()}return g(w);function g(E){var x=E.then;return E.constructor=h,E.then=function(){b++;var A=x.apply(E,arguments);return A.then(P,function(O){if(P(),b===0)throw O}),g(A)},E}}}function c(l,s){for(var y in l.headers)if({}.hasOwnProperty.call(l.headers,y)&&s.test(y))return!0;return!1}return{request:m(function(l,s,y,w){var b=s.method!=null?s.method.toUpperCase():"GET",P=s.body,g=(s.serialize==null||s.serialize===JSON.serialize)&&!(P instanceof n.FormData),E=s.responseType||(typeof s.extract=="function"?"":"json"),x=new n.XMLHttpRequest,A=!1,O=x,I,X=x.abort;x.abort=function(){A=!0,X.call(this)},x.open(b,l,s.async!==!1,typeof s.user=="string"?s.user:void 0,typeof s.password=="string"?s.password:void 0),g&&P!=null&&!c(s,/^content-type$/i)&&x.setRequestHeader("Content-Type","application/json; charset=utf-8"),typeof s.deserialize!="function"&&!c(s,/^accept$/i)&&x.setRequestHeader("Accept","application/json, text/*"),s.withCredentials&&(x.withCredentials=s.withCredentials),s.timeout&&(x.timeout=s.timeout),x.responseType=E;for(var Z in s.headers)({}).hasOwnProperty.call(s.headers,Z)&&x.setRequestHeader(Z,s.headers[Z]);x.onreadystatechange=function(d){if(!A&&d.target.readyState===4)try{var $=d.target.status>=200&&d.target.status<300||d.target.status===304||/^file:\/\//i.test(l),H=d.target.response,B;if(E==="json"?!d.target.responseType&&typeof s.extract!="function"&&(H=JSON.parse(d.target.responseText)):(!E||E==="text")&&H==null&&(H=d.target.responseText),typeof s.extract=="function"?(H=s.extract(d.target,s),$=!0):typeof s.deserialize=="function"&&(H=s.deserialize(H)),$)y(H);else{try{B=d.target.responseText}catch(W){B=H}var K=new Error(B);K.code=d.target.status,K.response=H,w(K)}}catch(W){w(W)}},typeof s.config=="function"&&(x=s.config(x,s,l)||x,x!==O&&(I=x.abort,x.abort=function(){A=!0,I.call(this)})),P==null?x.send():typeof s.serialize=="function"?x.send(s.serialize(P)):P instanceof n.FormData?x.send(P):x.send(JSON.stringify(P))}),jsonp:m(function(l,s,y,w){var b=s.callbackName||"_mithril_"+Math.round(Math.random()*1e16)+"_"+o++,P=n.document.createElement("script");n[b]=function(g){delete n[b],P.parentNode.removeChild(P),y(g)},P.onerror=function(){delete n[b],P.parentNode.removeChild(P),w(new Error("JSONP request failed"))},P.src=l+(l.indexOf("?")<0?"?":"&")+encodeURIComponent(s.callbackKey||"callback")+"="+encodeURIComponent(b),n.document.documentElement.appendChild(P)})}},$t=ae.exports,zt=$e,jt=_t(window,$t,zt.redraw),Ze=function(n){if(n===""||n==null)return{};n.charAt(0)==="?"&&(n=n.slice(1));for(var a=n.split("&"),u={},o={},h=0;h<a.length;h++){var m=a[h].split("="),c=decodeURIComponent(m[0]),l=m.length===2?decodeURIComponent(m[1]):"";l==="true"?l=!0:l==="false"&&(l=!1);var s=c.split(/\]\[?|\[/),y=o;c.indexOf("[")>-1&&s.pop();for(var w=0;w<s.length;w++){var b=s[w],P=s[w+1],g=P==""||!isNaN(parseInt(P,10));if(b===""){var c=s.slice(0,w).join();u[c]==null&&(u[c]=Array.isArray(y)?y.length:0),b=u[c]++}else if(b==="__proto__")break;if(w===s.length-1)y[b]=l;else{var E=Object.getOwnPropertyDescriptor(y,b);E!=null&&(E=E.value),E==null&&(y[b]=E=g?[]:{}),y=E}}}return o},Lt=Ze,je=function(n){var a=n.indexOf("?"),u=n.indexOf("#"),o=u<0?n.length:u,h=a<0?o:a,m=n.slice(0,h).replace(/\/{2,}/g,"/");return m?(m[0]!=="/"&&(m="/"+m),m.length>1&&m[m.length-1]==="/"&&(m=m.slice(0,-1))):m="/",{path:m,params:a<0?{}:Lt(n.slice(a+1,o))}},Rt=je,It=function(n){var a=Rt(n),u=Object.keys(a.params),o=[],h=new RegExp("^"+a.path.replace(/:([^\/.-]+)(\.{3}|\.(?!\.)|-)?|[\\^$*+.()|\[\]{}]/g,function(m,c,l){return c==null?"\\"+m:(o.push({k:c,r:l==="..."}),l==="..."?"(.*)":l==="."?"([^/]+)\\.":"([^/]+)"+(l||""))})+"$");return function(m){for(var c=0;c<u.length;c++)if(a.params[u[c]]!==m.params[u[c]])return!1;if(!o.length)return h.test(m.path);var l=h.exec(m.path);if(l==null)return!1;for(var c=0;c<o.length;c++)m.params[o[c].k]=o[c].r?l[c+1]:decodeURIComponent(l[c+1]);return!0}},dt=G,qt=Je,Mt=ae.exports,Ht=ze,We=je,St=It,Ye=Xe,Le={},Dt=function(n,a){var u;function o(b,P,g){if(b=Ht(b,P),u!=null){u();var E=g?g.state:null,x=g?g.title:null;g&&g.replace?n.history.replaceState(E,x,w.prefix+b):n.history.pushState(E,x,w.prefix+b)}else n.location.href=w.prefix+b}var h=Le,m,c,l,s,y=w.SKIP={};function w(b,P,g){if(b==null)throw new Error("Ensure the DOM element that was passed to `m.route` is not undefined");var E=0,x=Object.keys(g).map(function($){if($[0]!=="/")throw new SyntaxError("Routes must start with a `/`");if(/:([^\/\.-]+)(\.{3})?:/.test($))throw new SyntaxError("Route parameter names must be separated with either `/`, `.`, or `-`");return{route:$,component:g[$],check:St($)}}),A=typeof setImmediate=="function"?setImmediate:setTimeout,O=Mt.resolve(),I=!1,X;if(u=null,P!=null){var Z=We(P);if(!x.some(function($){return $.check(Z)}))throw new ReferenceError("Default route doesn't match any known routes")}function d(){I=!1;var $=n.location.hash;w.prefix[0]!=="#"&&($=n.location.search+$,w.prefix[0]!=="?"&&($=n.location.pathname+$,$[0]!=="/"&&($="/"+$)));var H=$.concat().replace(/(?:%[a-f89][a-f0-9])+/gim,decodeURIComponent).slice(w.prefix.length),B=We(H);Ye(B.params,n.history.state);function K(){if(H===P)throw new Error("Could not resolve default route "+P);o(P,null,{replace:!0})}W(0);function W(V){for(;V<x.length;V++)if(x[V].check(B)){var J=x[V].component,ue=x[V].route,Y=J,v=s=function(Q){if(v===s){if(Q===y)return W(V+1);m=Q!=null&&(typeof Q.view=="function"||typeof Q=="function")?Q:"div",c=B.params,l=H,s=null,h=J.render?J:null,E===2?a.redraw():(E=2,a.redraw.sync())}};J.view||typeof J=="function"?(J={},v(Y)):J.onmatch?O.then(function(){return J.onmatch(B.params,H,ue)}).then(v,K):v("div");return}K()}}return u=function(){I||(I=!0,A(d))},typeof n.history.pushState=="function"?(X=function(){n.removeEventListener("popstate",u,!1)},n.addEventListener("popstate",u,!1)):w.prefix[0]==="#"&&(u=null,X=function(){n.removeEventListener("hashchange",d,!1)},n.addEventListener("hashchange",d,!1)),a.mount(b,{onbeforeupdate:function(){return E=E?2:1,!(!E||Le===h)},oncreate:d,onremove:X,view:function(){if(!(!E||Le===h)){var $=[dt(m,c.key,c)];return h&&($=h.render($[0])),$}}})}return w.set=function(b,P,g){s!=null&&(g=g||{},g.replace=!0),s=null,o(b,P,g)},w.get=function(){return l},w.prefix="#!",w.Link={view:function(b){var P=b.attrs.options,g={},E,x;Ye(g,b.attrs),g.selector=g.options=g.key=g.oninit=g.oncreate=g.onbeforeupdate=g.onupdate=g.onbeforeremove=g.onremove=null;var A=qt(b.attrs.selector||"a",g,b.children);return(A.attrs.disabled=Boolean(A.attrs.disabled))?(A.attrs.href=null,A.attrs["aria-disabled"]="true",A.attrs.onclick=null):(E=A.attrs.onclick,x=A.attrs.href,A.attrs.href=w.prefix+x,A.attrs.onclick=function(O){var I;typeof E=="function"?I=E.call(O.currentTarget,O):E==null||typeof E!="object"||typeof E.handleEvent=="function"&&E.handleEvent(O),I!==!1&&!O.defaultPrevented&&(O.button===0||O.which===0||O.which===1)&&(!O.currentTarget.target||O.currentTarget.target==="_self")&&!O.ctrlKey&&!O.metaKey&&!O.shiftKey&&!O.altKey&&(O.preventDefault(),O.redraw=!1,w.set(x,null,P))}),A}},w.param=function(b){return c&&b!=null?c[b]:c},w},Ft=$e,Ut=Dt(window,Ft),he=Ct,ve=jt,ke=$e,D=function(){return he.apply(this,arguments)};D.m=he;D.trust=he.trust;D.fragment=he.fragment;D.mount=ke.mount;D.route=Ut;D.render=Qe;D.redraw=ke.redraw;D.request=ve.request;D.jsonp=ve.jsonp;D.parseQueryString=Ze;D.buildQueryString=Ge;D.parsePathname=je;D.buildPathname=ze;D.vnode=G;D.PromisePolyfill=Ve;var Kt=D;Function.prototype.call.bind(Function.prototype.call);export{R as e,Kt as m};
