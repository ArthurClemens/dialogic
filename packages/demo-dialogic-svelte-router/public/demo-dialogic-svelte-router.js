!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):(t="undefined"!=typeof globalThis?globalThis:t||self).demoDialogicSvelte=n()}(this,(function(){"use strict";function t(){}function n(t,n){for(const e in n)t[e]=n[e];return t}function e(t){return t()}function i(){return Object.create(null)}function o(t){t.forEach(e)}function s(t){return"function"==typeof t}function r(t,n){return t!=t?n==n:t!==n||t&&"object"==typeof t||"function"==typeof t}function a(n,...e){if(null==n)return t;const i=n.subscribe(...e);return i.unsubscribe?()=>i.unsubscribe():i}function c(t,n,e){t.$$.on_destroy.push(a(n,e))}function u(t){const n={};for(const e in t)"$"!==e[0]&&(n[e]=t[e]);return n}function l(n){return n&&s(n.destroy)?n.destroy:t}function d(t,n){t.appendChild(n)}function f(t,n,e){t.insertBefore(n,e||null)}function p(t){t.parentNode.removeChild(t)}function m(t){return document.createElement(t)}function h(t){return document.createTextNode(t)}function g(){return h(" ")}function $(){return h("")}function w(t,n,e,i){return t.addEventListener(n,e,i),()=>t.removeEventListener(n,e,i)}function y(t,n,e){null==e?t.removeAttribute(n):t.getAttribute(n)!==e&&t.setAttribute(n,e)}function v(t,n){n=""+n,t.wholeText!==n&&(t.data=n)}function b(t,n){t.value=null==n?"":n}let O;function x(t){O=t}function S(){if(!O)throw new Error("Function called outside component initialization");return O}function _(t){S().$$.on_mount.push(t)}function E(){const t=S();return(n,e)=>{const i=t.$$.callbacks[n];if(i){const o=function(t,n){const e=document.createEvent("CustomEvent");return e.initCustomEvent(t,!1,!1,n),e}(n,e);i.slice().forEach(n=>{n.call(t,o)})}}}function k(t,n){const e=t.$$.callbacks[n.type];e&&e.slice().forEach(t=>t(n))}const T=[],P=[],C=[],j=[],A=Promise.resolve();let I=!1;function D(){I||(I=!0,A.then(L))}function N(){return D(),A}function H(t){C.push(t)}let q=!1;const M=new Set;function L(){if(!q){q=!0;do{for(let t=0;t<T.length;t+=1){const n=T[t];x(n),R(n.$$)}for(x(null),T.length=0;P.length;)P.pop()();for(let t=0;t<C.length;t+=1){const n=C[t];M.has(n)||(M.add(n),n())}C.length=0}while(T.length);for(;j.length;)j.pop()();I=!1,q=!1,M.clear()}}function R(t){if(null!==t.fragment){t.update(),o(t.before_update);const n=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,n),t.after_update.forEach(H)}}const F=new Set;let K;function B(){K={r:0,c:[],p:K}}function G(){K.r||o(K.c),K=K.p}function J(t,n){t&&t.i&&(F.delete(t),t.i(n))}function U(t,n,e,i){if(t&&t.o){if(F.has(t))return;F.add(t),K.c.push(()=>{F.delete(t),i&&(e&&t.d(1),i())}),t.o(n)}}function V(t,n){U(t,1,1,()=>{n.delete(t.key)})}function z(t,n){const e={},i={},o={$$scope:1};let s=t.length;for(;s--;){const r=t[s],a=n[s];if(a){for(const t in r)t in a||(i[t]=1);for(const t in a)o[t]||(e[t]=a[t],o[t]=1);t[s]=a}else for(const t in r)o[t]=1}for(const t in i)t in e||(e[t]=void 0);return e}function W(t){return"object"==typeof t&&null!==t?t:{}}function X(t){t&&t.c()}function Q(t,n,i){const{fragment:r,on_mount:a,on_destroy:c,after_update:u}=t.$$;r&&r.m(n,i),H(()=>{const n=a.map(e).filter(s);c?c.push(...n):o(n),t.$$.on_mount=[]}),u.forEach(H)}function Y(t,n){const e=t.$$;null!==e.fragment&&(o(e.on_destroy),e.fragment&&e.fragment.d(n),e.on_destroy=e.fragment=null,e.ctx=[])}function Z(n,e,s,r,a,c,u=[-1]){const l=O;x(n);const d=e.props||{},f=n.$$={fragment:null,ctx:null,props:c,update:t,not_equal:a,bound:i(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(l?l.$$.context:[]),callbacks:i(),dirty:u,skip_bound:!1};let m=!1;if(f.ctx=s?s(n,d,(t,e,...i)=>{const o=i.length?i[0]:e;return f.ctx&&a(f.ctx[t],f.ctx[t]=o)&&(!f.skip_bound&&f.bound[t]&&f.bound[t](o),m&&function(t,n){-1===t.$$.dirty[0]&&(T.push(t),D(),t.$$.dirty.fill(0)),t.$$.dirty[n/31|0]|=1<<n%31}(n,t)),e}):[],f.update(),m=!0,o(f.before_update),f.fragment=!!r&&r(f.ctx),e.target){if(e.hydrate){const t=function(t){return Array.from(t.childNodes)}(e.target);f.fragment&&f.fragment.l(t),t.forEach(p)}else f.fragment&&f.fragment.c();e.intro&&J(n.$$.fragment),Q(n,e.target,e.anchor),L()}x(l)}class tt{$destroy(){Y(this,1),this.$destroy=t}$on(t,n){const e=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return e.push(n),()=>{const t=e.indexOf(n);-1!==t&&e.splice(t,1)}}$set(t){var n;this.$$set&&(n=t,0!==Object.keys(n).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}var nt=function(t,n){return t(n={exports:{}},n.exports),n.exports}((function(t){!function(){e.SKIP={},e.lift=function(){var t=arguments[0],n=Array.prototype.slice.call(arguments,1);return o(n).map((function(n){return t.apply(void 0,n)}))},e.scan=function(t,n,i){var o=i.map((function(i){var o=t(n,i);return o!==e.SKIP&&(n=o),o}));return o(n),o},e.merge=o,e.combine=i,e.scanMerge=function(t,n){var e=t.map((function(t){return t[0]})),o=i((function(){var i=arguments[arguments.length-1];return e.forEach((function(e,o){i.indexOf(e)>-1&&(n=t[o][1](n,e()))})),n}),e);return o(n),o},e["fantasy-land/of"]=e;var n=!1;function e(t){var n,o=[],r=[];function a(n){return arguments.length&&n!==e.SKIP&&(t=n,s(a)&&(a._changing(),a._state="active",o.forEach((function(n,e){n(r[e](t))})))),t}function c(){return(n=e()).map((function(t){return!0===t&&(a._parents.forEach((function(t){t._unregisterChild(a)})),a._state="ended",a._parents.length=o.length=r.length=0),t})),n}return a.constructor=e,a._state=arguments.length&&t!==e.SKIP?"active":"pending",a._parents=[],a._changing=function(){s(a)&&(a._state="changing"),o.forEach((function(t){t._changing()}))},a._map=function(n,i){var s=i?e():e(n(t));return s._parents.push(a),o.push(s),r.push(n),s},a.map=function(t){return a._map(t,"active"!==a._state)},a.toJSON=function(){return null!=t&&"function"==typeof t.toJSON?t.toJSON():t},a["fantasy-land/map"]=a.map,a["fantasy-land/ap"]=function(t){return i((function(t,n){return t()(n())}),[t,a])},a._unregisterChild=function(t){var n=o.indexOf(t);-1!==n&&(o.splice(n,1),r.splice(n,1))},Object.defineProperty(a,"end",{get:function(){return n||c()}}),a}function i(t,n){var i=n.every((function(t){if(t.constructor!==e)throw new Error("Ensure that each item passed to stream.combine/stream.merge/lift is a stream");return"active"===t._state})),o=i?e(t.apply(null,n.concat([n]))):e(),s=[],r=n.map((function(e){return e._map((function(r){return s.push(e),(i||n.every((function(t){return"pending"!==t._state})))&&(i=!0,o(t.apply(null,n.concat([s]))),s=[]),r}),!0)})),a=o.end.map((function(t){!0===t&&(r.forEach((function(t){t.end(!0)})),a.end(!0))}));return o}function o(t){return i((function(){return t.map((function(t){return t()}))}),t)}function s(t){return"pending"===t._state||"active"===t._state||"changing"===t._state}Object.defineProperty(e,"HALT",{get:function(){return n||console.log("HALT is deprecated and has been renamed to SKIP"),n=!0,e.SKIP}}),t.exports=e}()}));const et=(...t)=>n=>t.filter(Boolean).reduce((t,n)=>n(t),n),it=({domElement:t,prop:n})=>{const e=document.defaultView;if(e){const i=e.getComputedStyle(t);if(i)return i.getPropertyValue(n)}},ot="show",st="hide",rt=(t,n,e)=>{const i=e[n]||{};Object.keys(i).forEach(n=>{const e=i[n].toString();t.style[n]=e})},at=(t,n)=>t.split(/ /).map(t=>`${t}-${n}`),ct=(t,n,e,i)=>{if(n.styles){const o=((t,n)=>("function"==typeof n?n(t):n)||{})(t,n.styles);rt(t,"default",o),i&&(t=>{t.style.transitionDuration="0ms"})(t),rt(t,e,o)}if(n.className){const i={showStart:at(n.className,"show-start"),showEnd:at(n.className,"show-end"),hideStart:at(n.className,"hide-start"),hideEnd:at(n.className,"hide-end")};((t,n)=>{t.classList.remove(...n.showStart,...n.showEnd,...n.hideStart,...n.hideEnd)})(t,i),i&&t.classList.add(...i[e])}t.scrollTop},ut={showStart:{nextStep:"showEnd"},showEnd:{nextStep:void 0},hideStart:{nextStep:"hideEnd"},hideEnd:{nextStep:void 0}},lt=(t,n)=>{const e=t.domElement;if(!e)return Promise.resolve("no domElement");clearTimeout(t.__transitionTimeoutId__);let i=n===ot?"showStart":"hideStart";return new Promise(n=>{ct(e,t,i,"showStart"===i),setTimeout(()=>{const o=ut[i].nextStep;if(o){i=o,ct(e,t,i);const s=(t=>{const n=it({domElement:t,prop:"transition-duration"}),e=void 0!==n?dt(n):0,i=it({domElement:t,prop:"transition-delay"});return e+(void 0!==i?dt(i):0)})(e);t.__transitionTimeoutId__=setTimeout(n,s)}},0)})},dt=t=>{const n=parseFloat(t)*(-1===t.indexOf("ms")?1e3:1);return isNaN(n)?0:n},ft=(t,n)=>{const e=((t,n)=>n.find(n=>n.id===t))(t,n);return n.indexOf(e)},pt=(t,n)=>[n,t.id,t.spawn].filter(Boolean).join("-"),mt={initialState:{store:{}},actions:t=>({add:(n,e)=>{t(i=>{const o=i.store[n]||[];return i.store[n]=[...o,e],e.timer&&e.timer.states.map(()=>mt.actions(t).refresh()),i})},remove:(n,e)=>{t(t=>{const i=t.store[n]||[],o=((t,n)=>{const e=ft(t,n);return-1!==e&&n.splice(e,1),n})(e,i);return t.store[n]=o,t})},replace:(n,e,i)=>{t(t=>{const o=t.store[n]||[];if(o){const s=ft(e,o);-1!==s&&(o[s]=i,t.store[n]=[...o])}return t})},removeAll:n=>{t(t=>(t.store[n]=[],t))},store:(n,e)=>{t(t=>(t.store[n]=[...e],t))},refresh:()=>{t(t=>({...t}))}}),selectors:t=>{const n={getStore:()=>t().store,find:(n,e)=>{const i=t().store[n]||[],o=pt(e,n),s=i.find(t=>t.id===o);return s?{just:s}:{nothing:void 0}},getAll:(n,e)=>{const i=t().store[n]||[],o=void 0!==e?e.spawn:void 0,s=void 0!==e?e.id:void 0,r=void 0!==o?i.filter(t=>t.identityOptions.spawn===o):i;return void 0!==s?r.filter(t=>t.identityOptions.id===s):r},getCount:(t,e)=>n.getAll(t,e).length};return n}},ht=nt(),gt=nt.scan((t,n)=>n(t),{...mt.initialState},ht),$t={...mt.actions(ht)},wt={...mt.selectors(gt)},yt={callback:()=>{},isPaused:!1,onAbort:()=>{},onDone:()=>{},promise:void 0,remaining:void 0,startTime:void 0,timeoutFn:()=>{},timerId:void 0},vt=(t,n,e,i)=>{const o=()=>{n(),t.onDone(),i()};return{timeoutFn:o,promise:new Promise((n,e)=>{t.onDone=()=>n(),t.onAbort=()=>n()}),...t.isPaused?{}:{startTime:(new Date).getTime(),timerId:window.setTimeout(o,e),remaining:e}}},bt=t=>(window.clearTimeout(t.timerId),{timerId:yt.timerId}),Ot=t=>({...bt(t)}),xt=t=>({...bt(t),isPaused:!0,remaining:_t(t)}),St=(t,n)=>{window.clearTimeout(t.timerId);const e=n?Math.max(t.remaining||0,n):t.remaining;return{startTime:(new Date).getTime(),isPaused:!1,remaining:e,timerId:window.setTimeout(t.timeoutFn,e)}},_t=t=>0===t.remaining||void 0===t.remaining?t.remaining:t.remaining-((new Date).getTime()-(t.startTime||0)),Et=()=>{const t={initialState:yt,actions:n=>({start:(e,i)=>{n(o=>({...o,...bt(o),...vt(o,e,i,()=>t.actions(n).done()),...o.isPaused&&xt(o)}))},stop:()=>{n(t=>({...t,...Ot(t),...yt}))},pause:()=>{n(t=>({...t,...!t.isPaused&&xt(t)}))},resume:t=>{n(n=>({...n,...n.isPaused&&St(n,t)}))},abort:()=>{n(t=>(t.onAbort(),{...t,...bt(t)}))},done:()=>{n(t=>yt)},refresh:()=>{n(t=>({...t}))}}),selectors:t=>({isPaused:()=>t().isPaused,getRemaining:()=>{const n=t();return n.isPaused?n.remaining:_t(n)},getResultPromise:()=>t().promise})},n=nt(),e=nt.scan((t,n)=>n(t),{...t.initialState},n);return{states:e,actions:{...t.actions(n)},selectors:{...t.selectors(e)}}};let kt=0;const Tt=0,Pt=1,Ct=2,jt=t=>n=>void 0!==t.spawn?n.filter(n=>n.identityOptions.spawn===t.spawn):n,At=t=>{let n=0;return t.map(t=>({item:t,queueCount:t.dialogicOptions.queued?n++:0})).filter(({queueCount:t})=>0===t).map(({item:t})=>t)},It=(t,n,e)=>{const i=n[t]||[];return 0==i.length?[]:et(jt(e),At)(i)},Dt=(t,n={})=>({id:n.id||t.id,spawn:n.spawn||t.spawn}),Nt=(t,n={})=>{const e={id:n.dialogic?n.dialogic.id:void 0,spawn:n.dialogic?n.dialogic.spawn:void 0};return{identityOptions:Dt(t||{},e),dialogicOptions:{...t,...n.dialogic,__transitionTimeoutId__:0},passThroughOptions:(t=>{const n={...t};return delete n.dialogic,n})(n)}},Ht=t=>n=>(e={})=>{const{identityOptions:i,dialogicOptions:o,passThroughOptions:s}=Nt(n,e);return new Promise(r=>{const a={willShow:t=>(o.willShow&&o.willShow(t),r(t)),willHide:t=>(o.willHide&&o.willHide(t),r(t)),didShow:t=>(o.didShow&&o.didShow(t),r(t)),didHide:t=>(o.didHide&&o.didHide(t),r(t))},c={ns:t,identityOptions:i,dialogicOptions:o,callbacks:a,passThroughOptions:s,id:pt(i,t),timer:o.timeout?Et():void 0,key:(kt===Number.MAX_VALUE?0:kt++).toString(),transitionState:Tt},u=wt.find(t,i);if(u.just&&o.toggle){const i=qt(t)(n)(e);return r(i)}if(u.just&&!o.queued){const n=u.just,e=n.dialogicOptions,i={...c,key:n.key,transitionState:n.transitionState,dialogicOptions:e};$t.replace(t,n.id,i)}else $t.add(t,c);r(c)})},qt=t=>n=>e=>{const{identityOptions:i,dialogicOptions:o,passThroughOptions:s}=Nt(n,e),r=wt.find(t,i);if(r.just){const n=r.just,e={...n,dialogicOptions:{...n.dialogicOptions,...o},passThroughOptions:{...n.passThroughOptions,passThroughOptions:s}};return $t.replace(t,n.id,e),e.transitionState!==Ct?Qt(e):Promise.resolve(e)}return Promise.resolve()},Mt=t=>n=>n=>{const e=Gt(t,n).filter(t=>!!t.timer);return e.forEach(t=>t.timer&&t.timer.actions.pause()),Promise.all(e)},Lt=t=>n=>n=>{const e=n||{},i={id:e.id,spawn:e.spawn},o=Gt(t,i).filter(t=>!!t.timer);return o.forEach(t=>t.timer&&t.timer.actions.resume(e.minimumDuration)),Promise.all(o)},Rt=(t,n)=>e=>i=>o=>{const s=(t=>n=>e=>wt.find(t,Dt(n,e)))(e)(i)(o);return s.just&&s.just&&s.just.timer?s.just.timer.selectors[t]():n},Ft=Rt("isPaused",!1),Kt=Rt("getRemaining",void 0),Bt=t=>n=>n=>!!Gt(t,n).length,Gt=(t,n)=>{const e=wt.getAll(t);let i;return i=n?et(jt(n),(t=>n=>void 0!==t.id?n.filter(n=>n.identityOptions.id===t.id):n)(n))(e):e,i},Jt=t=>n=>n=>{const e=Gt(t,n),i=[];return e.forEach(t=>{t.timer&&t.timer.actions.abort(),i.push(t)}),n?i.forEach(n=>{$t.remove(t,n.id)}):$t.removeAll(t),Promise.resolve(i)},Ut=(t,n)=>({...t,dialogicOptions:{...t.dialogicOptions,...n}}),Vt=t=>n=>n=>{const e=n||{},i={id:e.id,spawn:e.spawn},o=Gt(t,i),s=o.filter(t=>!e.queued&&!t.dialogicOptions.queued),r=o.filter(t=>e.queued||t.dialogicOptions.queued),a=[];if(s.forEach(t=>a.push(Qt(Ut(t,e)))),r.length>0){const[n]=r;$t.store(t,[n]),a.push(Qt(Ut(n,e)))}return Promise.all(a)},zt=t=>n=>wt.getCount(t,n),Wt=(t,n)=>lt(t.dialogicOptions,n),Xt=async function(t){return t.callbacks.willShow&&t.callbacks.willShow(t),t.transitionState!==Pt&&(t.transitionState=Pt,await Wt(t,ot)),t.callbacks.didShow&&t.callbacks.didShow(t),t.dialogicOptions.timeout&&t.timer&&await async function(t,n,e){return n.actions.start(()=>Qt(t),e),Rt("getResultPromise",void 0)}(t,t.timer,t.dialogicOptions.timeout),Promise.resolve(t)},Qt=async function(t){t.transitionState=Ct,t.timer&&t.timer.actions.stop(),t.callbacks.willHide&&t.callbacks.willHide(t),await Wt(t,st),t.callbacks.didHide&&t.callbacks.didHide(t);const n={...t};return $t.remove(t.ns,t.id),Promise.resolve(n)},Yt=({ns:t,queued:n,timeout:e})=>{const i="default_"+t,o="default_"+t,s={id:i,spawn:o,...n&&{queued:n},...void 0!==e&&{timeout:e}};return{ns:t,defaultId:i,defaultSpawn:o,defaultDialogicOptions:s,show:Ht(t)(s),hide:qt(t)(s),hideAll:Vt(t)(s),resetAll:Jt(t)(s),pause:Mt(t)(s),resume:Lt(t)(s),exists:Bt(t)(s),getCount:zt(t),isPaused:Ft(t)(s),getRemaining:Kt(t)(s)}},Zt=Yt({ns:"dialog"}),tn=Yt({ns:"notification",queued:!0,timeout:3e3}),nn=[];function en(t,n){return{subscribe:on(t,n).subscribe}}function on(n,e=t){let i;const o=[];function s(t){if(r(n,t)&&(n=t,i)){const t=!nn.length;for(let t=0;t<o.length;t+=1){const e=o[t];e[1](),nn.push(e,n)}if(t){for(let t=0;t<nn.length;t+=2)nn[t][0](nn[t+1]);nn.length=0}}}return{set:s,update:function(t){s(t(n))},subscribe:function(r,a=t){const c=[r,a];return o.push(c),1===o.length&&(i=e(s)||t),r(n),()=>{const t=o.indexOf(c);-1!==t&&o.splice(t,1),0===o.length&&(i(),i=null)}}}}function sn(n,e,i){const r=!Array.isArray(n),c=r?[n]:n,u=e.length<2;return en(i,n=>{let i=!1;const l=[];let d=0,f=t;const p=()=>{if(d)return;f();const i=e(r?l[0]:l,n);u?n(i):f=s(i)?i:t},m=c.map((t,n)=>a(t,t=>{l[n]=t,d&=~(1<<n),i&&p()},()=>{d|=1<<n}));return i=!0,p(),function(){o(m),f()}})}const rn={...on(gt),...wt};gt.map(t=>rn.set({...t,...wt}));const an=t=>n=>sn(rn,()=>wt.getCount(t,n)),cn=t=>n=>e=>sn(rn,()=>Ft(t)(n)(e)),un=t=>n=>e=>sn(rn,()=>Bt(t)(n)(e)),ln={...Zt,getCount:t=>an(Zt.ns)(t),isPaused:t=>cn(Zt.ns)(Zt.defaultDialogicOptions)(t),exists:t=>un(Zt.ns)(Zt.defaultDialogicOptions)(t)},dn={...tn,getCount:t=>an(tn.ns)(t),isPaused:t=>cn(tn.ns)(tn.defaultDialogicOptions)(t),exists:t=>un(tn.ns)(tn.defaultDialogicOptions)(t)},fn=t=>(n,e)=>{const i=wt.find(t,n.detail.identityOptions);var o;i.just&&(o=n.detail.domElement,i.just.dialogicOptions.domElement=o);const s=wt.find(t,n.detail.identityOptions);s.just&&e(s.just)};function pn(t){let e,i,o;const s=[{show:t[4]},{hide:t[5]},t[0]];var r=t[1].component;function a(t){let e={};for(let t=0;t<s.length;t+=1)e=n(e,s[t]);return{props:e}}return r&&(i=new r(a())),{c(){e=m("div"),i&&X(i.$$.fragment),y(e,"class",t[3])},m(n,s){f(n,e,s),i&&Q(i,e,null),t[7](e),o=!0},p(t,[n]){const o=49&n?z(s,[16&n&&{show:t[4]},32&n&&{hide:t[5]},1&n&&W(t[0])]):{};if(r!==(r=t[1].component)){if(i){B();const t=i;U(t.$$.fragment,1,0,()=>{Y(t,1)}),G()}r?(i=new r(a()),X(i.$$.fragment),J(i.$$.fragment,1),Q(i,e,null)):i=null}else r&&i.$set(o)},i(t){o||(i&&J(i.$$.fragment,t),o=!0)},o(t){i&&U(i.$$.fragment,t),o=!1},d(n){n&&p(e),i&&Y(i),t[7](null)}}}function mn(t,n,e){const i=E();let o,{identityOptions:s}=n,{passThroughOptions:r}=n,{dialogicOptions:a}=n;const c=a?a.className:"",u=t=>i(t,{identityOptions:s,domElement:o});return _(()=>{u("mount")}),t.$$set=t=>{"identityOptions"in t&&e(6,s=t.identityOptions),"passThroughOptions"in t&&e(0,r=t.passThroughOptions),"dialogicOptions"in t&&e(1,a=t.dialogicOptions)},[r,a,o,c,()=>{u("show")},()=>{u("hide")},s,function(t){P[t?"unshift":"push"](()=>{o=t,e(2,o)})}]}class hn extends tt{constructor(t){super(),Z(this,t,mn,pn,r,{identityOptions:6,passThroughOptions:0,dialogicOptions:1})}}function gn(t,n,e){const i=t.slice();return i[1]=n[e].identityOptions,i[6]=n[e].dialogicOptions,i[7]=n[e].passThroughOptions,i[8]=n[e].key,i[10]=e,i}function $n(t,n){let e,i,o;return i=new hn({props:{identityOptions:n[1],dialogicOptions:n[6],passThroughOptions:n[7]}}),i.$on("mount",n[3]),i.$on("show",n[4]),i.$on("hide",n[5]),{key:t,first:null,c(){e=$(),X(i.$$.fragment),this.first=e},m(t,n){f(t,e,n),Q(i,t,n),o=!0},p(t,n){const e={};7&n&&(e.identityOptions=t[1]),7&n&&(e.dialogicOptions=t[6]),7&n&&(e.passThroughOptions=t[7]),i.$set(e)},i(t){o||(J(i.$$.fragment,t),o=!0)},o(t){U(i.$$.fragment,t),o=!1},d(t){t&&p(e),Y(i,t)}}}function wn(t){let n,e,i=[],o=new Map,s=It(t[0],t[2].store,t[1]);const r=t=>t[8];for(let n=0;n<s.length;n+=1){let e=gn(t,s,n),a=r(e);o.set(a,i[n]=$n(a,e))}return{c(){for(let t=0;t<i.length;t+=1)i[t].c();n=$()},m(t,o){for(let n=0;n<i.length;n+=1)i[n].m(t,o);f(t,n,o),e=!0},p(t,[e]){if(63&e){const s=It(t[0],t[2].store,t[1]);B(),i=function(t,n,e,i,o,s,r,a,c,u,l,d){let f=t.length,p=s.length,m=f;const h={};for(;m--;)h[t[m].key]=m;const g=[],$=new Map,w=new Map;for(m=p;m--;){const t=d(o,s,m),a=e(t);let c=r.get(a);c?i&&c.p(t,n):(c=u(a,t),c.c()),$.set(a,g[m]=c),a in h&&w.set(a,Math.abs(m-h[a]))}const y=new Set,v=new Set;function b(t){J(t,1),t.m(a,l),r.set(t.key,t),l=t.first,p--}for(;f&&p;){const n=g[p-1],e=t[f-1],i=n.key,o=e.key;n===e?(l=n.first,f--,p--):$.has(o)?!r.has(i)||y.has(i)?b(n):v.has(o)?f--:w.get(i)>w.get(o)?(v.add(i),b(n)):(y.add(o),f--):(c(e,r),f--)}for(;f--;){const n=t[f];$.has(n.key)||c(n,r)}for(;p;)b(g[p-1]);return g}(i,e,r,1,t,s,o,n.parentNode,V,$n,n,gn),G()}},i(t){if(!e){for(let t=0;t<s.length;t+=1)J(i[t]);e=!0}},o(t){for(let t=0;t<i.length;t+=1)U(i[t]);e=!1},d(t){for(let n=0;n<i.length;n+=1)i[n].d(t);t&&p(n)}}}function yn(t,n,e){let i;c(t,rn,t=>e(2,i=t));let{identityOptions:o}=n,{ns:s}=n;const r=(t=>n=>fn(t)(n,Xt))(s),a=(t=>n=>fn(t)(n,Xt))(s),u=(t=>n=>fn(t)(n,Qt))(s);return t.$$set=t=>{"identityOptions"in t&&e(1,o=t.identityOptions),"ns"in t&&e(0,s=t.ns)},[s,o,i,r,a,u]}class vn extends tt{constructor(t){super(),Z(this,t,yn,wn,r,{identityOptions:1,ns:0})}}function bn(t){let n,e;return n=new vn({props:{identityOptions:t[1],ns:t[0]}}),{c(){X(n.$$.fragment)},m(t,i){Q(n,t,i),e=!0},p(t,[e]){const i={};1&e&&(i.ns=t[0]),n.$set(i)},i(t){e||(J(n.$$.fragment,t),e=!0)},o(t){U(n.$$.fragment,t),e=!1},d(t){Y(n,t)}}}function On(t,n,e){let{instance:i}=n,{ns:o=i.ns}=n,{spawn:s}=n,{id:r}=n,{onMount:a}=n;const c={id:r||i.defaultId,spawn:s||i.defaultSpawn};return _(()=>{"function"==typeof a&&a()}),t.$$set=t=>{"instance"in t&&e(2,i=t.instance),"ns"in t&&e(0,o=t.ns),"spawn"in t&&e(3,s=t.spawn),"id"in t&&e(4,r=t.id),"onMount"in t&&e(5,a=t.onMount)},[o,c,i,s,r,a]}class xn extends tt{constructor(t){super(),Z(this,t,On,bn,r,{instance:2,ns:0,spawn:3,id:4,onMount:5})}}function Sn(t){let e,i;const o=[t[0],{instance:ln}];let s={};for(let t=0;t<o.length;t+=1)s=n(s,o[t]);return e=new xn({props:s}),{c(){X(e.$$.fragment)},m(t,n){Q(e,t,n),i=!0},p(t,[n]){const i=1&n?z(o,[1&n&&W(t[0]),0&n&&{instance:ln}]):{};e.$set(i)},i(t){i||(J(e.$$.fragment,t),i=!0)},o(t){U(e.$$.fragment,t),i=!1},d(t){Y(e,t)}}}function _n(t,e,i){return t.$$set=t=>{i(0,e=n(n({},e),u(t)))},[e=u(e)]}class En extends tt{constructor(t){super(),Z(this,t,_n,Sn,r,{})}}function kn(t){let e,i;const o=[t[0],{instance:dn}];let s={};for(let t=0;t<o.length;t+=1)s=n(s,o[t]);return e=new xn({props:s}),{c(){X(e.$$.fragment)},m(t,n){Q(e,t,n),i=!0},p(t,[n]){const i=1&n?z(o,[1&n&&W(t[0]),0&n&&{instance:dn}]):{};e.$set(i)},i(t){i||(J(e.$$.fragment,t),i=!0)},o(t){U(e.$$.fragment,t),i=!1},d(t){Y(e,t)}}}function Tn(t,e,i){return t.$$set=t=>{i(0,e=n(n({},e),u(t)))},[e=u(e)]}class Pn extends tt{constructor(t){super(),Z(this,t,Tn,kn,r,{})}}let Cn=0;function jn(n,e,i){let o,s=t;n.$$.on_destroy.push(()=>s());const r=Cn++;let{props:c}=e,{isShow:u}=e,{isHide:l}=e,{isIgnore:d}=e,{deps:f}=e,{instance:p}=e;const m=()=>{p.hide(g)};let h,g;return _(()=>()=>{m()}),n.$$set=t=>{"props"in t&&i(1,c=t.props),"isShow"in t&&i(2,u=t.isShow),"isHide"in t&&i(3,l=t.isHide),"isIgnore"in t&&i(4,d=t.isIgnore),"deps"in t&&i(5,f=t.deps),"instance"in t&&i(6,p=t.instance)},n.$$.update=()=>{2&n.$$.dirty&&(g={...c,...c.dialogic?{dialogic:{...c.dialogic,id:c.dialogic.id||r}}:{dialogic:{id:r}}}),60&n.$$.dirty&&(i(0,h=(t=>({subscribe:t}))(()=>(d||(void 0!==u?u?p.show(g):m():void 0!==l&&l&&m()),()=>{}))),s(),s=a(h,t=>i(7,o=t))),n.$$.dirty},[h,c,u,l,d,f,p,o]}class An extends tt{constructor(t){super(),Z(this,t,jn,null,r,{props:1,isShow:2,isHide:3,isIgnore:4,deps:5,instance:6})}}function In(t){let e,i;const o=[{instance:Zt},t[0]];let s={};for(let t=0;t<o.length;t+=1)s=n(s,o[t]);return e=new An({props:s}),{c(){X(e.$$.fragment)},m(t,n){Q(e,t,n),i=!0},p(t,[n]){const i=1&n?z(o,[0&n&&{instance:Zt},1&n&&W(t[0])]):{};e.$set(i)},i(t){i||(J(e.$$.fragment,t),i=!0)},o(t){U(e.$$.fragment,t),i=!1},d(t){Y(e,t)}}}function Dn(t,e,i){return t.$$set=t=>{i(0,e=n(n({},e),u(t)))},[e=u(e)]}class Nn extends tt{constructor(t){super(),Z(this,t,Dn,In,r,{})}}function Hn(t){let n,e,i;var o=t[0];return o&&(n=new o({}),n.$on("routeEvent",t[6])),{c(){n&&X(n.$$.fragment),e=$()},m(t,o){n&&Q(n,t,o),f(t,e,o),i=!0},p(t,i){if(o!==(o=t[0])){if(n){B();const t=n;U(t.$$.fragment,1,0,()=>{Y(t,1)}),G()}o?(n=new o({}),n.$on("routeEvent",t[6]),X(n.$$.fragment),J(n.$$.fragment,1),Q(n,e.parentNode,e)):n=null}},i(t){i||(n&&J(n.$$.fragment,t),i=!0)},o(t){n&&U(n.$$.fragment,t),i=!1},d(t){t&&p(e),n&&Y(n,t)}}}function qn(t){let n,e,i;var o=t[0];function s(t){return{props:{params:t[1]}}}return o&&(n=new o(s(t)),n.$on("routeEvent",t[5])),{c(){n&&X(n.$$.fragment),e=$()},m(t,o){n&&Q(n,t,o),f(t,e,o),i=!0},p(t,i){const r={};if(2&i&&(r.params=t[1]),o!==(o=t[0])){if(n){B();const t=n;U(t.$$.fragment,1,0,()=>{Y(t,1)}),G()}o?(n=new o(s(t)),n.$on("routeEvent",t[5]),X(n.$$.fragment),J(n.$$.fragment,1),Q(n,e.parentNode,e)):n=null}else o&&n.$set(r)},i(t){i||(n&&J(n.$$.fragment,t),i=!0)},o(t){n&&U(n.$$.fragment,t),i=!1},d(t){t&&p(e),n&&Y(n,t)}}}function Mn(t){let n,e,i,o;const s=[qn,Hn],r=[];function a(t,n){return t[1]?0:1}return n=a(t),e=r[n]=s[n](t),{c(){e.c(),i=$()},m(t,e){r[n].m(t,e),f(t,i,e),o=!0},p(t,[o]){let c=n;n=a(t),n===c?r[n].p(t,o):(B(),U(r[c],1,1,()=>{r[c]=null}),G(),e=r[n],e?e.p(t,o):(e=r[n]=s[n](t),e.c()),J(e,1),e.m(i.parentNode,i))},i(t){o||(J(e),o=!0)},o(t){U(e),o=!1},d(t){r[n].d(t),t&&p(i)}}}function Ln(){const t=window.location.href.indexOf("#/");let n=t>-1?window.location.href.substr(t+1):"/";const e=n.indexOf("?");let i="";return e>-1&&(i=n.substr(e+1),n=n.substr(0,e)),{location:n,querystring:i}}const Rn=en(null,(function(t){t(Ln());const n=()=>{t(Ln())};return window.addEventListener("hashchange",n,!1),function(){window.removeEventListener("hashchange",n,!1)}})),Fn=sn(Rn,t=>t.location);sn(Rn,t=>t.querystring);function Kn(t){if(!t||t.length<1||"/"!=t.charAt(0)&&0!==t.indexOf("#/"))throw Error("Invalid parameter location");return N().then(()=>{window.location.hash=("#"==t.charAt(0)?"":"#")+t})}function Bn(t,n){if(!t||!t.tagName||"a"!=t.tagName.toLowerCase())throw Error('Action "link" can only be used with <a> tags');return Gn(t,n||t.getAttribute("href")),{update(n){Gn(t,n)}}}function Gn(t,n){if(!n||n.length<1||"/"!=n.charAt(0))throw Error('Invalid value for "href" attribute');t.setAttribute("href","#"+n)}function Jn(n,e,i){let o,s=t;c(n,Rn,t=>i(4,o=t)),n.$$.on_destroy.push(()=>s());let{routes:r={}}=e,{prefix:a=""}=e;class u{constructor(t,n){if(!n||"function"!=typeof n&&("object"!=typeof n||!0!==n._sveltesparouter))throw Error("Invalid component object");if(!t||"string"==typeof t&&(t.length<1||"/"!=t.charAt(0)&&"*"!=t.charAt(0))||"object"==typeof t&&!(t instanceof RegExp))throw Error('Invalid value for "path" argument');const{pattern:e,keys:i}=function(t,n){if(t instanceof RegExp)return{keys:!1,pattern:t};var e,i,o,s,r=[],a="",c=t.split("/");for(c[0]||c.shift();o=c.shift();)"*"===(e=o[0])?(r.push("wild"),a+="/(.*)"):":"===e?(i=o.indexOf("?",1),s=o.indexOf(".",1),r.push(o.substring(1,~i?i:~s?s:o.length)),a+=~i&&!~s?"(?:/([^/]+?))?":"/([^/]+?)",~s&&(a+=(~i?"?":"")+"\\"+o.substring(s))):a+="/"+o;return{keys:r,pattern:new RegExp("^"+a+(n?"(?=$|/)":"/?$"),"i")}}(t);this.path=t,"object"==typeof n&&!0===n._sveltesparouter?(this.component=n.route,this.conditions=n.conditions||[],this.userData=n.userData):(this.component=n,this.conditions=[],this.userData=void 0),this._pattern=e,this._keys=i}match(t){a&&t.startsWith(a)&&(t=t.substr(a.length)||"/");const n=this._pattern.exec(t);if(null===n)return null;if(!1===this._keys)return n;const e={};let i=0;for(;i<this._keys.length;)e[this._keys[i]]=n[++i]||null;return e}checkConditions(t){for(let n=0;n<this.conditions.length;n++)if(!this.conditions[n](t))return!1;return!0}}const l=[];r instanceof Map?r.forEach((t,n)=>{l.push(new u(n,t))}):Object.keys(r).forEach(t=>{l.push(new u(t,r[t]))});let d=null,f=null;const p=E(),m=(t,n)=>{N().then(()=>{p(t,n)})};return n.$$set=t=>{"routes"in t&&i(2,r=t.routes),"prefix"in t&&i(3,a=t.prefix)},n.$$.update=()=>{if(17&n.$$.dirty){i(0,d=null);let t=0;for(;!d&&t<l.length;){const n=l[t].match(o.location);if(n){const e={component:l[t].component,name:l[t].component.name,location:o.location,querystring:o.querystring,userData:l[t].userData};if(!l[t].checkConditions(e)){m("conditionsFailed",e);break}i(0,d=l[t].component),n&&"object"==typeof n&&Object.keys(n).length?i(1,f=n):i(1,f=null),m("routeLoaded",e)}t++}}},[d,f,r,a,o,function(t){k(n,t)},function(t){k(n,t)}]}class Un extends tt{constructor(t){super(),Z(this,t,Jn,Mn,r,{routes:2,prefix:3})}}function Vn(n){let e,i,o;return{c(){e=m("div"),i=m("span"),o=h(n[0]),y(i,"class","tag"),y(i,"data-test-id","current-path"),y(e,"class","control path-control")},m(t,n){f(t,e,n),d(e,i),d(i,o)},p(t,[n]){1&n&&v(o,t[0])},i:t,o:t,d(t){t&&p(e)}}}function zn(t,n,e){let i;return c(t,Fn,t=>e(0,i=t)),[i]}class Wn extends tt{constructor(t){super(),Z(this,t,zn,Vn,r,{})}}function Xn(n){let e,i,o,s,r,a,c,u,h,$,w,v,b,O;return s=new Wn({}),{c(){e=m("div"),i=m("h1"),i.textContent="Home",o=g(),X(s.$$.fragment),r=g(),a=m("p"),a.innerHTML="This demo shows\n    <code>UseDialog</code>\n    that allows for a declarative way of controlling dialogs. The Profile dialog\n    responds to the route, and is automatically hidden when using the browser&#39;s\n    back button.",c=g(),u=m("div"),h=m("a"),h.textContent="Go to Profile",y(i,"class","title"),y(a,"class","intro"),y(h,"class","button is-link"),y(h,"href",$="/profile"),y(h,"data-test-id","btn-profile"),y(u,"class","buttons"),y(e,"data-test-id","home-page")},m(t,n){f(t,e,n),d(e,i),d(e,o),Q(s,e,null),d(e,r),d(e,a),d(e,c),d(e,u),d(u,h),v=!0,b||(O=l(w=Bn.call(null,h)),b=!0)},p:t,i(t){v||(J(s.$$.fragment,t),v=!0)},o(t){U(s.$$.fragment,t),v=!1},d(t){t&&p(e),Y(s),b=!1,O()}}}function Qn(n){let e,i,r,a,c,u,$,O,x,S,_,E,k,T,P,C,j,A,I,D,N,H,q,M,L,R,F;return{c(){e=m("div"),i=m("div"),r=g(),a=m("form"),c=m("header"),u=m("p"),$=h(n[0]),O=g(),x=m("button"),S=g(),_=m("section"),E=m("div"),k=m("div"),T=m("input"),P=g(),C=m("footer"),j=m("div"),A=m("button"),A.textContent="Save changes",I=g(),D=m("a"),D.textContent="Go to Home",H=g(),q=m("button"),q.textContent="Dynamic title count",M=g(),L=m("button"),L.textContent="Cancel",y(i,"class","modal-background"),y(u,"class","modal-card-title"),y(u,"data-test-id","title"),y(x,"class","delete"),y(x,"data-test-id","btn-close"),y(c,"class","modal-card-head"),y(T,"class","input"),y(T,"type","text"),y(T,"data-test-id","input-email"),y(k,"class","control"),y(E,"class","field"),y(_,"class","modal-card-body"),y(A,"type","submit"),y(A,"class","button is-link"),y(A,"data-test-id","btn-save"),y(D,"class","button is-link is-light is-outlined"),y(D,"href","/"),y(D,"data-test-id","btn-home"),y(q,"type","button"),y(q,"class","button is-link is-light is-outlined"),y(q,"data-test-id","btn-add-count"),y(L,"type","button"),y(L,"class","button is-danger is-light is-outlined"),y(L,"data-test-id","btn-cancel"),y(j,"class","footer-buttons"),y(C,"class","modal-card-foot"),y(a,"class","modal-card"),y(e,"class","modal is-active"),y(e,"data-test-id","edit-profile-dialog")},m(t,o){f(t,e,o),d(e,i),d(e,r),d(e,a),d(a,c),d(c,u),d(u,$),d(c,O),d(c,x),d(a,S),d(a,_),d(_,E),d(E,k),d(k,T),b(T,n[4]),d(a,P),d(a,C),d(C,j),d(j,A),d(j,I),d(j,D),d(j,H),d(j,q),d(j,M),d(j,L),R||(F=[w(x,"click",(function(){s(n[2])&&n[2].apply(this,arguments)})),w(T,"input",n[6]),w(A,"click",n[7]),l(N=Bn.call(null,D)),w(q,"click",(function(){s(n[3])&&n[3].apply(this,arguments)})),w(L,"click",(function(){s(n[2])&&n[2].apply(this,arguments)})),w(a,"submit",n[8])],R=!0)},p(t,[e]){n=t,1&e&&v($,n[0]),16&e&&T.value!==n[4]&&b(T,n[4])},i:t,o:t,d(t){t&&p(e),R=!1,o(F)}}}function Yn(t,n,e){let{title:i}=n,{email:o}=n,{onSave:s}=n,{onCancel:r}=n,{increment:a}=n,c=o;return t.$$set=t=>{"title"in t&&e(0,i=t.title),"email"in t&&e(5,o=t.email),"onSave"in t&&e(1,s=t.onSave),"onCancel"in t&&e(2,r=t.onCancel),"increment"in t&&e(3,a=t.increment)},[i,s,r,a,c,o,function(){c=this.value,e(4,c)},t=>{t.preventDefault(),s(c)},t=>{t.preventDefault(),s(c)}]}class Zn extends tt{constructor(t){super(),Z(this,t,Yn,Qn,r,{title:0,email:5,onSave:1,onCancel:2,increment:3})}}const te=on("allan@company.com"),ne=on(0),ee=()=>ne.update(t=>t+1);function ie(n){let e,i;return{c(){e=m("div"),i=h(n[0]),y(e,"class","notification-content"),y(e,"data-test-id","notification")},m(t,n){f(t,e,n),d(e,i)},p(t,[n]){1&n&&v(i,t[0])},i:t,o:t,d(t){t&&p(e)}}}function oe(t,n,e){let{content:i}=n;return t.$$set=t=>{"content"in t&&e(0,i=t.content)},[i]}class se extends tt{constructor(t){super(),Z(this,t,oe,ie,r,{content:0})}}function re(t){let n,e,i,s,r,a,c,u,$,w,b,O,x,S,_,E,k,T,P,C,j,A,I,D;return s=new Wn({}),j=new Nn({props:{props:t[3],isShow:t[2],deps:[t[0]]}}),{c(){n=m("div"),e=m("h1"),e.textContent="Profile",i=g(),X(s.$$.fragment),r=g(),a=m("div"),c=m("div"),c.innerHTML="<strong>Email</strong>",u=g(),$=m("div"),w=h(t[1]),b=g(),O=m("a"),x=h("Edit"),_=g(),E=m("div"),k=m("a"),k.textContent="Go to Home",C=g(),X(j.$$.fragment),y(e,"class","title"),y($,"data-test-id","current-email"),y(O,"class","button is-link"),y(O,"href",ae),y(O,"data-test-id","btn-edit-profile"),y(a,"class","profile-tile"),y(k,"class","button is-link is-light is-outlined"),y(k,"href",T="/"),y(k,"data-test-id","btn-home"),y(E,"class","buttons"),y(n,"data-test-id","profile-page")},m(t,o){f(t,n,o),d(n,e),d(n,i),Q(s,n,null),d(n,r),d(n,a),d(a,c),d(a,u),d(a,$),d($,w),d(a,b),d(a,O),d(O,x),d(n,_),d(n,E),d(E,k),d(n,C),Q(j,n,null),A=!0,I||(D=[l(S=Bn.call(null,O)),l(P=Bn.call(null,k))],I=!0)},p(t,[n]){(!A||2&n)&&v(w,t[1]);const e={};8&n&&(e.props=t[3]),4&n&&(e.isShow=t[2]),1&n&&(e.deps=[t[0]]),j.$set(e)},i(t){A||(J(s.$$.fragment,t),J(j.$$.fragment,t),A=!0)},o(t){U(s.$$.fragment,t),U(j.$$.fragment,t),A=!1},d(t){t&&p(n),Y(s),Y(j),I=!1,o(D)}}}const ae="/profile/edit",ce="/profile";function ue(t,n,e){let i,o,s,r,a;return c(t,Fn,t=>e(4,i=t)),c(t,ne,t=>e(0,o=t)),c(t,te,t=>e(1,s=t)),t.$$.update=()=>{16&t.$$.dirty&&e(2,r=i===ae),3&t.$$.dirty&&e(3,a={dialogic:{component:Zn,className:"dialog"},title:"Update your e-mail "+o,email:s,onSave:t=>{t!==s&&(te.set(t),dn.show({dialogic:{component:se,className:"demo-notification",styles:t=>{const n=t.getBoundingClientRect().height;return{default:{transition:"all 350ms ease-in-out"},showStart:{transform:`translate3d(0, ${n}px, 0)`},showEnd:{transform:"translate3d(0, 0px,  0)",transitionDelay:"500ms"},hideEnd:{transitionDuration:"450ms",transform:`translate3d(0, ${n}px, 0)`}}}},content:"E-mail address updated"})),Kn(ce)},onCancel:()=>{Kn(ce)},increment:ee})},[o,s,r,a,i]}var le={"/":class extends tt{constructor(t){super(),Z(this,t,null,Xn,r,{})}},"/profile/:edit?":class extends tt{constructor(t){super(),Z(this,t,ue,re,r,{})}}};function de(n){let e,i,o,s,r,a,c;return i=new Un({props:{routes:le}}),s=new En({}),a=new Pn({}),{c(){e=m("div"),X(i.$$.fragment),o=g(),X(s.$$.fragment),r=g(),X(a.$$.fragment),y(e,"class","app")},m(t,n){f(t,e,n),Q(i,e,null),d(e,o),Q(s,e,null),d(e,r),Q(a,e,null),c=!0},p:t,i(t){c||(J(i.$$.fragment,t),J(s.$$.fragment,t),J(a.$$.fragment,t),c=!0)},o(t){U(i.$$.fragment,t),U(s.$$.fragment,t),U(a.$$.fragment,t),c=!1},d(t){t&&p(e),Y(i),Y(s),Y(a)}}}return new class extends tt{constructor(t){super(),Z(this,t,null,de,r,{})}}({target:document.body})}));
//# sourceMappingURL=demo-dialogic-svelte-router.js.map
