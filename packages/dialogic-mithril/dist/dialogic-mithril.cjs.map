{"version":3,"file":"dialogic-mithril.cjs","sources":["../../../node_modules/mithril-stream-standalone/dist/mithril-stream-standalone.module.js","../../dialogic/dist/dialogic.module.js","../src/Instance.ts","../src/instanceEvents.ts","../src/Wrapper.ts","../src/Dialogical.ts","../src/useDialogic.ts","../src/useRemaining.ts","../src/index.ts"],"sourcesContent":["function g(t) {\n  return p(function() {\n    return t.map(function(e) {\n      return e();\n    });\n  }, t);\n}\nfunction h(t, e, u) {\n  var n = u.map(function(c) {\n    var f = t(e, c);\n    return f !== i.SKIP && (e = f), f;\n  });\n  return n(e), n;\n}\nfunction l(t, e) {\n  var u = t.map(function(c) {\n    return c[0];\n  }), n = p(function() {\n    var c = arguments[arguments.length - 1];\n    return u.forEach(function(f, r) {\n      c.indexOf(f) > -1 && (e = t[r][1](e, f()));\n    }), e;\n  }, u);\n  return n(e), n;\n}\nfunction _() {\n  var t = arguments[0], e = Array.prototype.slice.call(arguments, 1);\n  return g(e).map(function(u) {\n    return t.apply(void 0, u);\n  });\n}\nfunction s(t) {\n  return t._state === \"pending\" || t._state === \"active\" || t._state === \"changing\";\n}\nvar i = function(t) {\n  var e = [], u = [];\n  function n(r) {\n    return arguments.length && r !== i.SKIP && (t = r, s(n) && (n._changing(), n._state = \"active\", e.slice().forEach(function(a, o) {\n      s(a) && a(this[o](t));\n    }, u.slice()))), t;\n  }\n  n.constructor = i, n._state = arguments.length && t !== i.SKIP ? \"active\" : \"pending\", n._parents = [], n._changing = function() {\n    s(n) && (n._state = \"changing\"), e.forEach(function(r) {\n      r._changing();\n    });\n  }, n._map = function(r, a) {\n    var o = a ? i() : i(r(t));\n    return o._parents.push(n), e.push(o), u.push(r), o;\n  }, n.map = function(r) {\n    return n._map(r, n._state !== \"active\");\n  };\n  var c;\n  function f() {\n    return c = i(), c.map(function(r) {\n      return r === !0 && (n._parents.forEach(function(a) {\n        a._unregisterChild(n);\n      }), n._state = \"ended\", n._parents.length = e.length = u.length = 0), r;\n    }), c;\n  }\n  return n.toJSON = function() {\n    return t != null && typeof t.toJSON == \"function\" ? t.toJSON() : t;\n  }, n[\"fantasy-land/map\"] = n.map, n[\"fantasy-land/ap\"] = function(r) {\n    return p(\n      function(a, o) {\n        return a()(o());\n      },\n      [r, n]\n    );\n  }, n._unregisterChild = function(r) {\n    var a = e.indexOf(r);\n    a !== -1 && (e.splice(a, 1), u.splice(a, 1));\n  }, Object.defineProperty(n, \"end\", {\n    get: function() {\n      return c || f();\n    }\n  }), n;\n};\nfunction p(t, e) {\n  var u = e.every(function(a) {\n    if (a.constructor !== i)\n      throw new Error(\n        \"Ensure that each item passed to stream.combine/stream.merge/lift is a stream.\"\n      );\n    return a._state === \"active\";\n  }), n = u ? i(t.apply(null, e.concat([e]))) : i(), c = [], f = e.map(function(a) {\n    return a._map(function(o) {\n      return c.push(a), (u || e.every(function(m) {\n        return m._state !== \"pending\";\n      })) && (u = !0, n(t.apply(null, e.concat([c]))), c = []), o;\n    }, !0);\n  }), r = n.end.map(function(a) {\n    a === !0 && (f.forEach(function(o) {\n      o.end(!0);\n    }), r.end(!0));\n  });\n  return n;\n}\ni.SKIP = {};\ni.lift = _;\ni.scan = h;\ni.merge = g;\ni.combine = p;\ni.scanMerge = l;\ni[\"fantasy-land/of\"] = i;\nvar d = !1;\nObject.defineProperty(i, \"HALT\", {\n  get: function() {\n    return d || console.log(\"HALT is deprecated and has been renamed to SKIP\"), d = !0, i.SKIP;\n  }\n});\nexport {\n  i as default\n};\n//# sourceMappingURL=mithril-stream-standalone.module.js.map\n","import Stream from \"mithril-stream-standalone\";\nconst findItem = (id, items) => items.find((item) => item.id === id);\nconst itemIndex = (id, items) => {\n  const item = findItem(id, items);\n  return item ? items.indexOf(item) : -1;\n};\nconst removeItem = (id, items) => {\n  const index = itemIndex(id, items);\n  if (index !== -1) {\n    items.splice(index, 1);\n  }\n  return items;\n};\nconst createId = (identityOptions, ns) => [ns, identityOptions.id, identityOptions.spawn].filter(Boolean).join(\"-\");\nconst store = {\n  initialState: {\n    store: {}\n  },\n  actions: (update2) => ({\n    /**\n     * Add an item to the end of the list.\n     */\n    add: (ns, item) => {\n      update2((state) => {\n        const items = state.store[ns] || [];\n        state.store[ns] = [...items, item];\n        if (item.timer) {\n          item.timer.states.map(() => store.actions(update2).refresh());\n        }\n        return state;\n      });\n    },\n    /**\n     * Removes the first item with a match on `id`.\n     */\n    remove: (ns, id) => {\n      update2((state) => {\n        const items = state.store[ns] || [];\n        const remaining2 = removeItem(id, items);\n        state.store[ns] = remaining2;\n        return state;\n      });\n    },\n    /**\n     * Replaces the first item with a match on `id` with a newItem.\n     */\n    replace: (ns, id, newItem) => {\n      update2((state) => {\n        const items = state.store[ns] || [];\n        if (items) {\n          const index = itemIndex(id, items);\n          if (index !== -1) {\n            items[index] = newItem;\n            state.store[ns] = [...items];\n          }\n        }\n        return state;\n      });\n    },\n    /**\n     * Removes all items within a namespace.\n     */\n    removeAll: (ns) => {\n      update2((state) => {\n        state.store[ns] = [];\n        return state;\n      });\n    },\n    /**\n     * Replaces all items within a namespace.\n     */\n    store: (ns, newItems) => {\n      update2((state) => {\n        state.store[ns] = [...newItems];\n        return state;\n      });\n    },\n    refresh: () => {\n      update2((state) => ({\n        ...state\n      }));\n    }\n  }),\n  selectors: (states2) => {\n    const fns = {\n      getStore: () => {\n        const state = states2();\n        return state.store;\n      },\n      find: (ns, identityOptions) => {\n        const state = states2();\n        const items = state.store[ns] || [];\n        const id = createId(identityOptions, ns);\n        const item = items.find((fitem) => fitem.id === id);\n        return item ? { just: item } : { nothing: void 0 };\n      },\n      getAll: (ns, identityOptions) => {\n        const state = states2();\n        const items = state.store[ns] || [];\n        const spawn = identityOptions !== void 0 ? identityOptions.spawn : void 0;\n        const id = identityOptions !== void 0 ? identityOptions.id : void 0;\n        const itemsBySpawn = spawn !== void 0 ? items.filter((fitem) => fitem.identityOptions.spawn === spawn) : items;\n        const itemsById = id !== void 0 ? itemsBySpawn.filter((item) => item.identityOptions.id === id) : itemsBySpawn;\n        return itemsById;\n      },\n      getCount: (ns, identityOptions) => fns.getAll(ns, identityOptions).length\n    };\n    return fns;\n  }\n};\nconst update = Stream();\nconst states = Stream.scan(\n  (state, patch) => patch(state),\n  {\n    ...store.initialState\n  },\n  update\n);\nconst actions = {\n  ...store.actions(update)\n};\nconst selectors = {\n  ...store.selectors(states)\n};\nconst initialState = {\n  callback: () => {\n  },\n  isPaused: false,\n  onAbort: () => {\n  },\n  onDone: () => {\n  },\n  promise: void 0,\n  remaining: void 0,\n  startTime: void 0,\n  timeoutFn: () => {\n  },\n  timerId: void 0\n};\nconst appendStartTimer = (state, callback, duration, updateState) => {\n  const timeoutFn = () => {\n    callback();\n    state.onDone();\n    updateState();\n  };\n  return {\n    timeoutFn,\n    promise: new Promise((resolve) => {\n      state.onDone = () => resolve();\n      state.onAbort = () => resolve();\n    }),\n    ...state.isPaused ? {} : {\n      startTime: new Date().getTime(),\n      timerId: window.setTimeout(timeoutFn, duration),\n      remaining: duration\n    }\n  };\n};\nconst appendStopTimeout = (state) => {\n  window.clearTimeout(state.timerId);\n  return {\n    timerId: initialState.timerId\n  };\n};\nconst appendStopTimer = (state) => ({\n  ...appendStopTimeout(state)\n});\nconst appendPauseTimer = (state) => ({\n  ...appendStopTimeout(state),\n  isPaused: true,\n  remaining: getRemaining$1(state)\n});\nconst appendResumeTimer = (state, minimumDuration) => {\n  window.clearTimeout(state.timerId);\n  const remaining2 = minimumDuration ? Math.max(state.remaining || 0, minimumDuration) : state.remaining;\n  return {\n    startTime: new Date().getTime(),\n    isPaused: false,\n    remaining: remaining2,\n    timerId: window.setTimeout(state.timeoutFn, remaining2)\n  };\n};\nconst getRemaining$1 = (state) => state.remaining === 0 || state.remaining === void 0 ? state.remaining : state.remaining - (new Date().getTime() - (state.startTime || 0));\nconst TimerStore = () => {\n  const timer = {\n    initialState,\n    actions: (update22) => ({\n      /**\n       * Starts the timer\n       * @param {callback} Function Callback function that is called after completion.\n       * @param {duration} Number Timer duration in milliseconds.\n       */\n      start: (callback, duration) => {\n        update22((state) => ({\n          ...state,\n          ...appendStopTimeout(state),\n          ...appendStartTimer(\n            state,\n            callback,\n            duration,\n            () => timer.actions(update22).done()\n          ),\n          ...state.isPaused && appendPauseTimer(state)\n        }));\n      },\n      /**\n       * Stops the timer.\n       */\n      stop: () => {\n        update22((state) => ({\n          ...state,\n          ...appendStopTimer(state),\n          ...initialState\n        }));\n      },\n      /**\n       * Pauses a running timer.\n       */\n      pause: () => {\n        update22((state) => ({\n          ...state,\n          ...!state.isPaused && appendPauseTimer(state)\n        }));\n      },\n      /**\n       * Resumes a paused timer.\n       * @param {minimumDuration} Number Sets the minimum duration.\n       */\n      resume: (minimumDuration) => {\n        update22((state) => ({\n          ...state,\n          ...state.isPaused && appendResumeTimer(state, minimumDuration)\n        }));\n      },\n      /**\n       * Aborts and clears a timer.\n       */\n      abort: () => {\n        update22((state) => {\n          state.onAbort();\n          return {\n            ...state,\n            ...appendStopTimeout(state)\n          };\n        });\n      },\n      /**\n       * Updates the current state. Used to get the state for selectors.getRemaining.\n       */\n      refresh: () => {\n        update22((state) => ({\n          ...state\n        }));\n      },\n      /**\n       * Brings the timer to its initial state.\n       * Used internally.\n       */\n      done: () => {\n        update22(() => initialState);\n      }\n    }),\n    selectors: (states22) => ({\n      /**\n       * Returns the paused state.\n       */\n      isPaused: () => {\n        const state = states22();\n        return state.isPaused;\n      },\n      /**\n       * Returns the remaining duration in milliseconds.\n       */\n      getRemaining: () => {\n        const state = states22();\n        return state.isPaused ? state.remaining : getRemaining$1(state);\n      },\n      /**\n       * The promise that is handled when the timer is done or canceled.\n       */\n      getResultPromise: () => {\n        const state = states22();\n        return state.promise;\n      }\n    })\n  };\n  const update2 = Stream();\n  const states2 = Stream.scan(\n    (state, patch) => patch(state),\n    {\n      ...timer.initialState\n    },\n    update2\n  );\n  const actions2 = {\n    ...timer.actions(update2)\n  };\n  const selectors2 = {\n    ...timer.selectors(states2)\n  };\n  return {\n    states: states2,\n    actions: actions2,\n    selectors: selectors2\n  };\n};\nconst pipe = (...fns) => (x) => fns.filter(Boolean).reduce((y, f) => f(y), x);\nconst getStyleValue = ({\n  domElement,\n  prop\n}) => {\n  const defaultView = document.defaultView;\n  if (defaultView) {\n    const style = defaultView.getComputedStyle(domElement);\n    if (style) {\n      return style.getPropertyValue(prop);\n    }\n  }\n  return void 0;\n};\nconst MODE = {\n  SHOW: \"show\",\n  HIDE: \"hide\"\n};\nconst removeTransitionClassNames = (domElement, transitionClassNames) => domElement.classList.remove(\n  ...transitionClassNames.showStart,\n  ...transitionClassNames.showEnd,\n  ...transitionClassNames.hideStart,\n  ...transitionClassNames.hideEnd\n);\nconst applyTransitionStyles = (domElement, step, styles) => {\n  const transitionStyle = styles[step];\n  if (transitionStyle) {\n    Object.keys(transitionStyle).forEach((key) => {\n      const value = transitionStyle[key];\n      domElement.style[key] = value;\n    });\n  }\n};\nconst applyNoDurationTransitionStyle = (domElement) => {\n  domElement.style.transitionDuration = \"0ms\";\n};\nconst getTransitionStyles = (domElement, styles) => (typeof styles === \"function\" ? styles(domElement) : styles) || {};\nconst createClassList = (className, step) => className.split(/ /).map((n) => `${n}-${step}`);\nconst applyStylesForState = (domElement, props, step, isEnterStep) => {\n  if (props.styles) {\n    const styles = getTransitionStyles(domElement, props.styles);\n    applyTransitionStyles(domElement, \"default\", styles);\n    if (isEnterStep) {\n      applyNoDurationTransitionStyle(domElement);\n    }\n    applyTransitionStyles(domElement, step, styles);\n  }\n  if (props.className) {\n    const transitionClassNames = {\n      showStart: createClassList(props.className, \"show-start\"),\n      showEnd: createClassList(props.className, \"show-end\"),\n      hideStart: createClassList(props.className, \"hide-start\"),\n      hideEnd: createClassList(props.className, \"hide-end\")\n    };\n    removeTransitionClassNames(domElement, transitionClassNames);\n    if (transitionClassNames) {\n      domElement.classList.add(...transitionClassNames[step]);\n    }\n  }\n  domElement.scrollTop;\n};\nconst styleDurationToMs = (durationStr) => {\n  const parsed = parseFloat(durationStr) * (durationStr.indexOf(\"ms\") === -1 ? 1e3 : 1);\n  return Number.isNaN(parsed) ? 0 : parsed;\n};\nconst getDuration = (domElement) => {\n  const durationStyleValue = getStyleValue({\n    domElement,\n    prop: \"transition-duration\"\n  });\n  const durationValue = durationStyleValue !== void 0 ? styleDurationToMs(durationStyleValue) : 0;\n  const delayStyleValue = getStyleValue({\n    domElement,\n    prop: \"transition-delay\"\n  });\n  const delayValue = delayStyleValue !== void 0 ? styleDurationToMs(delayStyleValue) : 0;\n  return durationValue + delayValue;\n};\nconst steps = {\n  showStart: {\n    nextStep: \"showEnd\"\n  },\n  showEnd: {\n    nextStep: void 0\n  },\n  hideStart: {\n    nextStep: \"hideEnd\"\n  },\n  hideEnd: {\n    nextStep: void 0\n  }\n};\nconst transition = (props, mode) => {\n  const { domElement } = props;\n  if (!domElement) {\n    return Promise.resolve(\"no domElement\");\n  }\n  clearTimeout(props.__transitionTimeoutId__);\n  let currentStep = mode === MODE.SHOW ? \"showStart\" : \"hideStart\";\n  return new Promise((resolve) => {\n    applyStylesForState(\n      domElement,\n      props,\n      currentStep,\n      currentStep === \"showStart\"\n    );\n    setTimeout(() => {\n      const { nextStep } = steps[currentStep];\n      if (nextStep) {\n        currentStep = nextStep;\n        applyStylesForState(domElement, props, currentStep);\n        const duration = getDuration(domElement);\n        props.__transitionTimeoutId__ = window.setTimeout(resolve, duration);\n      }\n    }, 0);\n  });\n};\nconst localState = {\n  uid: 0\n};\nconst getUid = () => {\n  if (localState.uid === Number.MAX_VALUE) {\n    localState.uid = 0;\n  } else {\n    localState.uid += 1;\n  }\n  return localState.uid;\n};\nconst getMaybeItem = (ns) => (defaultDialogicOptions) => (identityOptions) => selectors.find(\n  ns,\n  // eslint-disable-next-line @typescript-eslint/no-use-before-define\n  getMergedIdentityOptions(defaultDialogicOptions, identityOptions)\n);\nconst filterBySpawn = (identityOptions) => (items) => identityOptions.spawn !== void 0 ? items.filter(\n  (item) => item.identityOptions.spawn === identityOptions.spawn\n) : items;\nconst filterById = (identityOptions) => (items) => identityOptions.id !== void 0 ? items.filter((item) => item.identityOptions.id === identityOptions.id) : items;\nconst filterFirstInQueue = (nsItems) => {\n  let queuedCount = 0;\n  return nsItems.map((item) => ({\n    item,\n    queueCount: item.dialogicOptions.queued ? queuedCount++ : 0\n  })).filter(({ queueCount }) => queueCount === 0).map(({ item }) => item);\n};\nconst filterCandidates = (ns, items, identityOptions) => {\n  const nsItems = items[ns] || [];\n  if (nsItems.length === 0) {\n    return [];\n  }\n  return pipe(filterBySpawn(identityOptions), filterFirstInQueue)(nsItems);\n};\nconst getPassThroughOptions = (options) => {\n  const copy = {\n    ...options\n  };\n  delete copy.dialogic;\n  return copy;\n};\nconst getMergedIdentityOptions = (defaultDialogicOptions, identityOptions = {}) => ({\n  id: identityOptions.id || defaultDialogicOptions.id,\n  spawn: identityOptions.spawn || defaultDialogicOptions.spawn\n});\nconst handleOptions = (defaultDialogicOptions, options) => {\n  const identityOptions = {\n    id: (options == null ? void 0 : options.dialogic) ? options.dialogic.id : void 0,\n    spawn: (options == null ? void 0 : options.dialogic) ? options.dialogic.spawn : void 0\n  };\n  const mergedIdentityOptions = getMergedIdentityOptions(\n    defaultDialogicOptions || {},\n    identityOptions\n  );\n  const dialogicOptions = {\n    ...defaultDialogicOptions,\n    ...options == null ? void 0 : options.dialogic,\n    __transitionTimeoutId__: 0\n  };\n  const passThroughOptions = options ? getPassThroughOptions(options) : {};\n  return {\n    identityOptions: mergedIdentityOptions,\n    dialogicOptions,\n    passThroughOptions\n  };\n};\nconst createInstance = (ns) => (defaultDialogicOptions) => (options) => {\n  const { identityOptions, dialogicOptions, passThroughOptions } = handleOptions(defaultDialogicOptions, options);\n  return new Promise((resolve) => {\n    const callbacks = {\n      willShow: (item2) => {\n        if (dialogicOptions.willShow) {\n          dialogicOptions.willShow(item2);\n        }\n        return resolve(item2);\n      },\n      willHide: (item2) => {\n        if (dialogicOptions.willHide) {\n          dialogicOptions.willHide(item2);\n        }\n        return resolve(item2);\n      },\n      didShow: (item2) => {\n        if (dialogicOptions.didShow) {\n          dialogicOptions.didShow(item2);\n        }\n        return resolve(item2);\n      },\n      didHide: (item2) => {\n        if (dialogicOptions.didHide) {\n          dialogicOptions.didHide(item2);\n        }\n        return resolve(item2);\n      }\n    };\n    const item = {\n      ns,\n      identityOptions,\n      dialogicOptions,\n      callbacks,\n      passThroughOptions,\n      id: createId(identityOptions, ns),\n      timer: dialogicOptions.timeout ? TimerStore() : void 0,\n      // when timeout is undefined or 0\n      key: getUid().toString(),\n      // Uniquely identify each item for keyed display\n      transitionState: 0\n      /* Default */\n    };\n    const maybeExistingItem = selectors.find(\n      ns,\n      identityOptions\n    );\n    const existingItem = maybeExistingItem.just;\n    if (existingItem && dialogicOptions.toggle) {\n      hide(ns)(defaultDialogicOptions)(options);\n      return resolve(existingItem);\n    }\n    if (existingItem && !dialogicOptions.queued) {\n      const replacingItem = {\n        ...item,\n        key: existingItem.key,\n        transitionState: existingItem.transitionState,\n        dialogicOptions: existingItem.dialogicOptions\n        // Preserve dialogicOptions\n      };\n      actions.replace(ns, existingItem.id, replacingItem);\n    } else {\n      actions.add(ns, item);\n    }\n    resolve(item);\n  });\n};\nconst show = createInstance;\nconst hide = (ns) => (defaultDialogicOptions) => (options) => {\n  const { identityOptions, dialogicOptions, passThroughOptions } = handleOptions(defaultDialogicOptions, options);\n  const maybeExistingItem = selectors.find(\n    ns,\n    identityOptions\n  );\n  const existingItem = maybeExistingItem.just;\n  if (existingItem) {\n    const item = {\n      ...existingItem,\n      dialogicOptions: {\n        ...existingItem.dialogicOptions,\n        ...dialogicOptions\n      },\n      passThroughOptions: {\n        ...existingItem.passThroughOptions,\n        passThroughOptions\n      }\n    };\n    actions.replace(ns, existingItem.id, item);\n    if (item.transitionState !== 2) {\n      return hideItem(item);\n    }\n    return Promise.resolve(item);\n  }\n  return Promise.resolve({\n    ns,\n    id: identityOptions.id\n  });\n};\nconst pause = (ns) => (_defaultDialogicOptions) => (identityOptions) => {\n  const validItems = getValidItems(ns, identityOptions).filter(\n    (item) => !!item.timer\n  );\n  validItems.forEach((item) => {\n    if (item.timer) {\n      item.timer.actions.pause();\n    }\n  });\n  return Promise.all(validItems);\n};\nconst resume = (ns) => (_defaultDialogicOptions) => (commandOptions) => {\n  const options = commandOptions || {};\n  const identityOptions = {\n    id: options.id,\n    spawn: options.spawn\n  };\n  const validItems = getValidItems(ns, identityOptions).filter(\n    (item) => !!item.timer\n  );\n  validItems.forEach((item) => {\n    if (item.timer) {\n      item.timer.actions.resume(options.minimumDuration);\n    }\n  });\n  return Promise.all(validItems);\n};\nconst getTimerSelectors = (ns, defaultDialogicOptions, identityOptions) => {\n  var _a, _b;\n  const maybeItem = getMaybeItem(ns)(\n    defaultDialogicOptions\n  )(identityOptions);\n  return (_b = (_a = maybeItem == null ? void 0 : maybeItem.just) == null ? void 0 : _a.timer) == null ? void 0 : _b.selectors;\n};\nconst isPaused = (ns) => (defaultDialogicOptions) => (identityOptions) => {\n  var _a;\n  return ((_a = getTimerSelectors(\n    ns,\n    defaultDialogicOptions,\n    identityOptions\n  )) == null ? void 0 : _a.isPaused()) || false;\n};\nconst getRemaining = (ns) => (defaultDialogicOptions) => (identityOptions) => {\n  var _a;\n  return ((_a = getTimerSelectors(\n    ns,\n    defaultDialogicOptions,\n    identityOptions\n  )) == null ? void 0 : _a.getRemaining()) || void 0;\n};\nconst exists = (ns) => (_defaultDialogicOptions) => (identityOptions) => (\n  // eslint-disable-next-line @typescript-eslint/no-use-before-define\n  !!getValidItems(ns, identityOptions).length\n);\nconst getValidItems = (ns, identityOptions) => {\n  const allItems = selectors.getAll(ns);\n  let validItems;\n  if (identityOptions) {\n    validItems = pipe(\n      filterBySpawn(identityOptions),\n      filterById(identityOptions)\n    )(allItems);\n  } else {\n    validItems = allItems;\n  }\n  return validItems;\n};\nconst resetAll = (ns) => (_defaultDialogicOptions) => (identityOptions) => {\n  const validItems = getValidItems(ns, identityOptions);\n  const items = [];\n  validItems.forEach((item) => {\n    if (item.timer) {\n      item.timer.actions.abort();\n    }\n    items.push(item);\n  });\n  if (identityOptions) {\n    items.forEach((item) => {\n      actions.remove(ns, item.id);\n    });\n  } else {\n    actions.removeAll(ns);\n  }\n  return Promise.resolve(items);\n};\nconst getOverridingTransitionOptions = (item, dialogicOptions) => ({\n  ...item,\n  dialogicOptions: {\n    ...item.dialogicOptions,\n    ...dialogicOptions\n  }\n});\nconst hideAll = (ns) => (_defaultDialogicOptions) => (dialogicOptions) => {\n  const options = dialogicOptions || {};\n  const identityOptions = {\n    id: options.id,\n    spawn: options.spawn\n  };\n  const validItems = getValidItems(ns, identityOptions);\n  const regularItems = validItems.filter(\n    (item) => !options.queued && !item.dialogicOptions.queued\n  );\n  const queuedItems = validItems.filter(\n    (item) => options.queued || item.dialogicOptions.queued\n  );\n  const items = [];\n  regularItems.forEach(\n    (item) => (\n      // eslint-disable-next-line @typescript-eslint/no-use-before-define\n      items.push(hideItem(getOverridingTransitionOptions(item, options)))\n    )\n  );\n  if (queuedItems.length > 0) {\n    const [current] = queuedItems;\n    actions.store(ns, [current]);\n    items.push(hideItem(getOverridingTransitionOptions(current, options)));\n  }\n  return Promise.all(items);\n};\nconst getCount = (ns) => (identityOptions) => selectors.getCount(ns, identityOptions);\nconst transitionItem = (item, mode) => transition(item.dialogicOptions, mode);\nconst getResultPromise = () => (ns) => (defaultDialogicOptions) => (identityOptions) => {\n  const maybeItem = getMaybeItem(ns)(\n    defaultDialogicOptions\n  )(identityOptions);\n  if (maybeItem.just) {\n    if (maybeItem.just && maybeItem.just.timer) {\n      return maybeItem.just.timer.selectors.getResultPromise();\n    }\n    return void 0;\n  }\n  return void 0;\n};\nconst deferredHideItem = async (item, timer, timeout) => {\n  timer.actions.start(() => hideItem(item), timeout);\n  return getResultPromise();\n};\nconst showItem = async (item) => {\n  if (item.callbacks.willShow) {\n    item.callbacks.willShow(item);\n  }\n  if (item.transitionState !== 1) {\n    item.transitionState = 1;\n    await transitionItem(item, MODE.SHOW);\n  }\n  if (item.callbacks.didShow) {\n    item.callbacks.didShow(item);\n  }\n  if (item.dialogicOptions.timeout && item.timer) {\n    await deferredHideItem(item, item.timer, item.dialogicOptions.timeout);\n  }\n  return Promise.resolve(item);\n};\nconst hideItem = async (item) => {\n  item.transitionState = 2;\n  if (item.timer) {\n    item.timer.actions.stop();\n  }\n  if (item.callbacks.willHide) {\n    item.callbacks.willHide(item);\n  }\n  await transitionItem(item, MODE.HIDE);\n  if (item.callbacks.didHide) {\n    item.callbacks.didHide(item);\n  }\n  const copy = {\n    ...item\n  };\n  actions.remove(item.ns, item.id);\n  return Promise.resolve(copy);\n};\nconst setDomElement = (domElement, item) => {\n  item.dialogicOptions.domElement = domElement;\n};\nconst dialogical = ({\n  ns,\n  queued,\n  timeout\n}) => {\n  const defaultId = `default_${ns}`;\n  const defaultSpawn = `default_${ns}`;\n  const defaultDialogicOptions = {\n    id: defaultId,\n    spawn: defaultSpawn,\n    ...queued && { queued },\n    ...timeout !== void 0 && { timeout }\n  };\n  return {\n    // Identification\n    ns,\n    defaultId,\n    defaultSpawn,\n    // Configuration\n    defaultDialogicOptions,\n    // Commands\n    show: show(ns)(defaultDialogicOptions),\n    hide: hide(ns)(defaultDialogicOptions),\n    hideAll: hideAll(ns)(defaultDialogicOptions),\n    resetAll: resetAll(ns)(defaultDialogicOptions),\n    // Timer commands\n    pause: pause(ns)(defaultDialogicOptions),\n    resume: resume(ns)(defaultDialogicOptions),\n    // State\n    exists: exists(ns)(defaultDialogicOptions),\n    getCount: getCount(ns),\n    // Timer state\n    isPaused: isPaused(ns)(defaultDialogicOptions),\n    getRemaining: getRemaining(ns)(defaultDialogicOptions)\n  };\n};\nconst dialog = dialogical({ ns: \"dialog\" });\nconst notification = dialogical({\n  ns: \"notification\",\n  queued: true,\n  timeout: 3e3\n});\nconst remaining = (props) => {\n  let displayValue;\n  let reqId;\n  let isCanceled = false;\n  const identity = {\n    id: props.id,\n    spawn: props.spawn\n  };\n  const update2 = () => {\n    const remainingValue = props.instance.getRemaining(identity);\n    if (displayValue !== remainingValue) {\n      displayValue = remainingValue === void 0 ? remainingValue : props.roundToSeconds ? Math.round(Math.max(remainingValue, 0) / 1e3) : Math.max(remainingValue, 0);\n    }\n    props.callback(displayValue);\n    if (!props.instance.exists(identity)) {\n      window.cancelAnimationFrame(reqId);\n      isCanceled = true;\n    } else if (!isCanceled) {\n      reqId = window.requestAnimationFrame(update2);\n    }\n  };\n  reqId = window.requestAnimationFrame(update2);\n};\nconst types = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({\n  __proto__: null\n}, Symbol.toStringTag, { value: \"Module\" }));\nexport {\n  types as Dialogic,\n  actions,\n  dialog,\n  dialogical,\n  exists,\n  filterCandidates,\n  getCount,\n  getRemaining,\n  hide,\n  hideAll,\n  hideItem,\n  isPaused,\n  notification,\n  pause,\n  remaining,\n  resetAll,\n  resume,\n  selectors,\n  setDomElement,\n  show,\n  showItem,\n  states\n};\n//# sourceMappingURL=dialogic.module.js.map\n","import { Dialogic } from 'dialogic';\nimport m, { Component } from 'mithril';\n\ntype ComponentProps<T = unknown> = T & {\n  show: () => void;\n  hide: () => void;\n};\n\nexport const Instance = <T = unknown>({\n  attrs: componentAttrs,\n}: {\n  attrs: Dialogic.DialogicalInstanceOptions<T>;\n}) => {\n  let domElement: HTMLElement;\n\n  const dispatchTransition = (\n    dispatchFn: Dialogic.DialogicalInstanceDispatchFn,\n  ) => {\n    dispatchFn({\n      detail: {\n        identityOptions: componentAttrs.identityOptions,\n        domElement,\n      },\n    });\n  };\n\n  const onMount = () => {\n    dispatchTransition(componentAttrs.onMount);\n  };\n\n  const show = () => {\n    dispatchTransition(componentAttrs.onShow);\n  };\n\n  const hide = () => {\n    dispatchTransition(componentAttrs.onHide);\n  };\n\n  return {\n    oncreate: (vnode: { dom: Element }) => {\n      domElement = vnode.dom as HTMLElement;\n      onMount();\n    },\n    view: ({ attrs }: { attrs: Dialogic.DialogicalInstanceOptions<T> }) => {\n      const component = attrs.dialogicOptions.component as Component<\n        ComponentProps<T>\n      >;\n      if (!component) {\n        throw new Error('Component missing in dialogic options.');\n      }\n      const passThroughOptions: T = attrs.passThroughOptions || ({} as T);\n      return m(\n        'div',\n        { className: attrs.dialogicOptions.className },\n        m(component, {\n          ...passThroughOptions,\n          show,\n          hide,\n        }),\n      );\n    },\n  };\n};\n","import {\n  Dialogic,\n  hideItem,\n  selectors,\n  setDomElement,\n  showItem,\n} from 'dialogic';\n\nexport const handleDispatch =\n  (ns: string) =>\n  (event: Dialogic.InstanceEvent, fn: Dialogic.InitiateItemTransitionFn) => {\n    // Update dispatching item:\n    const maybeItem: Dialogic.MaybeItem<unknown> = selectors.find(\n      ns,\n      event.detail.identityOptions,\n    );\n    if (maybeItem.just) {\n      setDomElement(event.detail.domElement, maybeItem.just);\n    }\n    // Find item to transition:\n    const maybeTransitioningItem: Dialogic.MaybeItem<unknown> = selectors.find(\n      ns,\n      event.detail.identityOptions,\n    );\n    if (maybeTransitioningItem.just) {\n      fn(maybeTransitioningItem.just);\n    }\n  };\n\nexport const onInstanceMounted =\n  (ns: string) => (event: Dialogic.InstanceEvent) =>\n    handleDispatch(ns)(event, showItem);\n\nexport const onShowInstance = (ns: string) => (event: Dialogic.InstanceEvent) =>\n  handleDispatch(ns)(event, showItem);\n\nexport const onHideInstance = (ns: string) => (event: Dialogic.InstanceEvent) =>\n  handleDispatch(ns)(event, hideItem);\n","import { Dialogic, filterCandidates, selectors } from 'dialogic';\nimport m, { Component } from 'mithril';\n\nimport { Instance } from './Instance';\nimport {\n  onHideInstance,\n  onInstanceMounted,\n  onShowInstance,\n} from './instanceEvents';\n\nexport const Wrapper: Component<Dialogic.DialogicalWrapperOptions> = {\n  view: ({ attrs }) => {\n    const nsOnInstanceMounted = onInstanceMounted(attrs.ns);\n    const nsOnShowInstance = onShowInstance(attrs.ns);\n    const nsOnHideInstance = onHideInstance(attrs.ns);\n\n    const identityOptions: Dialogic.IdentityOptions =\n      attrs.identityOptions || ({} as Dialogic.IdentityOptions);\n    const filtered = filterCandidates(\n      attrs.ns,\n      selectors.getStore(),\n      identityOptions,\n    );\n\n    return filtered.map(item =>\n      m(Instance, {\n        key: item.key,\n        identityOptions: item.identityOptions,\n        dialogicOptions:\n          item.dialogicOptions as Dialogic.DialogicOptions<Dialogic.PassThroughOptions>,\n        passThroughOptions:\n          item.passThroughOptions as Dialogic.PassThroughOptions,\n        onMount: nsOnInstanceMounted,\n        onShow: nsOnShowInstance,\n        onHide: nsOnHideInstance,\n      }),\n    );\n  },\n};\n","import { Dialogic } from 'dialogic';\nimport m, { Component } from 'mithril';\n\nimport { Wrapper } from './Wrapper';\n\ntype DialogicalFn = (\n  type: Dialogic.DialogicInstance,\n) => Component<Dialogic.ComponentOptions>;\n\nexport const Dialogical: DialogicalFn = instance => ({\n  oncreate: ({ attrs }) => {\n    if (typeof attrs.onMount === 'function') {\n      attrs.onMount();\n    }\n  },\n  view: ({ attrs }) => {\n    const identityOptions = {\n      id: attrs.id || instance.defaultId,\n      spawn: attrs.spawn || instance.defaultSpawn,\n    };\n    return m(Wrapper, {\n      identityOptions,\n      ns: instance.ns,\n    });\n  },\n});\n","import { dialog, Dialogic, notification } from 'dialogic';\nimport type { UseDialogicInstanceProps } from 'dialogic-hooks';\nimport { useEffect, useState } from 'mithril-hooks';\n\nlet useDialogicCounter = 0;\n\nexport const useDialogic = <T>({\n  isIgnore,\n  isShow,\n  isHide,\n  instance,\n  deps = [],\n  props = {} as T & Dialogic.Options<T>,\n}: UseDialogicInstanceProps<T>) => {\n  // Create an id if not set.\n  // This is useful for pages with multiple dialogs, where we can't expect\n  // to have the user set an explicit id for each.\n  // eslint-disable-next-line no-plusplus\n  const [id] = useState(useDialogicCounter++);\n\n  const augProps = {\n    ...props,\n    ...(props?.dialogic\n      ? {\n          dialogic: {\n            ...props.dialogic,\n            id: props.dialogic.id || id,\n          },\n        }\n      : {\n          dialogic: {\n            id,\n          },\n        }),\n  };\n\n  const showInstance = () => {\n    instance.show<T>(augProps);\n  };\n\n  const hideInstance = () => {\n    instance.hide<T>(augProps);\n  };\n\n  // maybe show\n  useEffect(() => {\n    if (isIgnore) {\n      return;\n    }\n    if (isShow !== undefined) {\n      if (isShow) {\n        showInstance();\n      } else {\n        hideInstance();\n      }\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [...deps, isShow]);\n\n  // maybe hide\n  useEffect(() => {\n    if (isIgnore) {\n      return;\n    }\n    if (isHide !== undefined) {\n      if (isHide) {\n        hideInstance();\n      }\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [...deps, isHide]);\n\n  // unmount\n  useEffect(() => {\n    if (isIgnore) {\n      return undefined;\n    }\n    // eslint-disable-next-line consistent-return\n    return () => {\n      hideInstance();\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  return {\n    show: showInstance,\n    hide: hideInstance,\n  };\n};\n\nexport const useDialog = <T>(\n  props: Omit<UseDialogicInstanceProps<T>, 'instance'>,\n) => useDialogic<T>({ instance: dialog, ...props });\n\nexport const useNotification = <T>(\n  props: Omit<UseDialogicInstanceProps<T>, 'instance'>,\n) =>\n  useDialogic<T>({\n    instance: notification,\n    ...props,\n  });\n","import { remaining } from 'dialogic';\nimport type { UseRemainingProps } from 'dialogic-hooks';\nimport { useMemo, useState } from 'mithril-hooks';\n\nexport const useRemaining = ({\n  instance,\n  id,\n  spawn,\n  roundToSeconds,\n}: UseRemainingProps) => {\n  const [value, setValue] = useState<number | undefined>(undefined);\n  const identity = {\n    id,\n    spawn,\n  };\n  const exists = !!instance.exists(identity);\n  useMemo(() => {\n    if (exists) {\n      remaining({\n        ...identity,\n        instance,\n        roundToSeconds,\n        callback: newValue => {\n          setValue(newValue);\n        },\n      });\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [exists]);\n\n  return [value];\n};\n","import { dialog, notification, states } from 'dialogic';\nimport m from 'mithril';\n\nimport { Dialogical } from './Dialogical';\n\nconst Dialog = Dialogical(dialog);\nconst Notification = Dialogical(notification);\n\nexport * from './useDialogic';\nexport * from './useRemaining';\nexport { dialog, Dialogic, notification, remaining } from 'dialogic';\nexport { Dialog, Dialogical, Notification };\n\n// eslint-disable-next-line array-callback-return\nstates.map(_state => {\n  // console.log(JSON.stringify(_state, null, 2));\n  m.redraw();\n});\n"],"names":["m","Stream","show","hide","useState","useEffect","exists","useMemo"],"mappings":"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"}