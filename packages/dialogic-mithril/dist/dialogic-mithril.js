!function(t,i){"object"==typeof exports&&"undefined"!=typeof module?i(exports,require("mithril"),require("dialogic")):"function"==typeof define&&define.amd?define(["exports","mithril","dialogic"],i):i((t=t||self).dialogicMithril={},t.m,t.dialogic)}(this,(function(t,i,e){"use strict";i=i&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i;const o=t=>(i,o)=>{const n=e.selectors.find(t,i.detail.identityOptions);n.just&&e.setDomElement(i.detail.domElement,n.just);const s=e.selectors.find(t,i.detail.identityOptions);s.just&&o(s.just)},n=({attrs:t})=>{let e;const o=i=>{i({detail:{identityOptions:t.identityOptions,domElement:e}})},n=()=>{o(t.onShow)},s=()=>{o(t.onHide)};return{oncreate:i=>{e=i.dom,o(t.onMount)},view:({attrs:t})=>{const e=t.dialogicOptions.component;if(!e)throw"Component missing in dialogic options.";return i("div",{className:t.dialogicOptions.className},i(e,{...t.passThroughOptions,show:n,hide:s}))}}},s={view:({attrs:t})=>{const s=(a=t.ns,t=>o(a)(t,e.showItem));var a;const d=(t=>i=>o(t)(i,e.showItem))(t.ns),r=(t=>i=>o(t)(i,e.hideItem))(t.ns),l=t.identityOptions||{};return e.filterCandidates(t.ns,e.selectors.getStore(),l).map(t=>i(n,{key:t.key,identityOptions:t.identityOptions,dialogicOptions:t.dialogicOptions,passThroughOptions:t.passThroughOptions,onMount:s,onShow:d,onHide:r}))}},a=t=>({oncreate:({attrs:t})=>{"function"==typeof t.onMount&&t.onMount()},view:({attrs:e})=>{const o={id:e.id||t.defaultId,spawn:e.spawn||t.defaultSpawn};return i(s,{identityOptions:o,ns:t.ns})}}),d=a(e.dialog),r=a(e.notification);e.states.map(t=>i.redraw()),Object.defineProperty(t,"dialog",{enumerable:!0,get:function(){return e.dialog}}),Object.defineProperty(t,"notification",{enumerable:!0,get:function(){return e.notification}}),t.Dialog=d,t.Dialogical=a,t.Notification=r,Object.defineProperty(t,"__esModule",{value:!0})}));
