!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):(t="undefined"!=typeof globalThis?globalThis:t||self).demoDialogicSvelte=n()}(this,(function(){"use strict";function t(){}function n(t,n){for(const e in n)t[e]=n[e];return t}function e(t){return t()}function i(){return Object.create(null)}function o(t){t.forEach(e)}function s(t){return"function"==typeof t}function r(t,n){return t!=t?n==n:t!==n||t&&"object"==typeof t||"function"==typeof t}function a(n,...e){if(null==n)return t;const i=n.subscribe(...e);return i.unsubscribe?()=>i.unsubscribe():i}function c(t,n,e){t.$$.on_destroy.push(a(n,e))}function u(t){const n={};for(const e in t)"$"!==e[0]&&(n[e]=t[e]);return n}function l(t,n){t.appendChild(n)}function d(t,n,e){t.insertBefore(n,e||null)}function f(t){t.parentNode.removeChild(t)}function p(t){return document.createElement(t)}function m(t){return document.createTextNode(t)}function g(){return m(" ")}function h(){return m("")}function $(t,n,e,i){return t.addEventListener(n,e,i),()=>t.removeEventListener(n,e,i)}function w(t,n,e){null==e?t.removeAttribute(n):t.getAttribute(n)!==e&&t.setAttribute(n,e)}function b(t,n){n=""+n,t.wholeText!==n&&(t.data=n)}let y;function v(t){y=t}function _(){if(!y)throw new Error("Function called outside component initialization");return y}function O(t){_().$$.on_mount.push(t)}function S(){const t=_();return(n,e)=>{const i=t.$$.callbacks[n];if(i){const o=function(t,n){const e=document.createEvent("CustomEvent");return e.initCustomEvent(t,!1,!1,n),e}(n,e);i.slice().forEach(n=>{n.call(t,o)})}}}const x=[],k=[],T=[],E=[],P=Promise.resolve();let A=!1;function C(t){T.push(t)}let j=!1;const N=new Set;function I(){if(!j){j=!0;do{for(let t=0;t<x.length;t+=1){const n=x[t];v(n),M(n.$$)}for(v(null),x.length=0;k.length;)k.pop()();for(let t=0;t<T.length;t+=1){const n=T[t];N.has(n)||(N.add(n),n())}T.length=0}while(x.length);for(;E.length;)E.pop()();A=!1,j=!1,N.clear()}}function M(t){if(null!==t.fragment){t.update(),o(t.before_update);const n=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,n),t.after_update.forEach(C)}}const D=new Set;let H;function R(){H={r:0,c:[],p:H}}function q(){H.r||o(H.c),H=H.p}function L(t,n){t&&t.i&&(D.delete(t),t.i(n))}function F(t,n,e,i){if(t&&t.o){if(D.has(t))return;D.add(t),H.c.push(()=>{D.delete(t),i&&(e&&t.d(1),i())}),t.o(n)}}function K(t,n){F(t,1,1,()=>{n.delete(t.key)})}function B(t,n){const e={},i={},o={$$scope:1};let s=t.length;for(;s--;){const r=t[s],a=n[s];if(a){for(const t in r)t in a||(i[t]=1);for(const t in a)o[t]||(e[t]=a[t],o[t]=1);t[s]=a}else for(const t in r)o[t]=1}for(const t in i)t in e||(e[t]=void 0);return e}function J(t){return"object"==typeof t&&null!==t?t:{}}function V(t){t&&t.c()}function z(t,n,i){const{fragment:r,on_mount:a,on_destroy:c,after_update:u}=t.$$;r&&r.m(n,i),C(()=>{const n=a.map(e).filter(s);c?c.push(...n):o(n),t.$$.on_mount=[]}),u.forEach(C)}function G(t,n){const e=t.$$;null!==e.fragment&&(o(e.on_destroy),e.fragment&&e.fragment.d(n),e.on_destroy=e.fragment=null,e.ctx=[])}function U(t,n){-1===t.$$.dirty[0]&&(x.push(t),A||(A=!0,P.then(I)),t.$$.dirty.fill(0)),t.$$.dirty[n/31|0]|=1<<n%31}function W(n,e,s,r,a,c,u=[-1]){const l=y;v(n);const d=e.props||{},p=n.$$={fragment:null,ctx:null,props:c,update:t,not_equal:a,bound:i(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(l?l.$$.context:[]),callbacks:i(),dirty:u,skip_bound:!1};let m=!1;if(p.ctx=s?s(n,d,(t,e,...i)=>{const o=i.length?i[0]:e;return p.ctx&&a(p.ctx[t],p.ctx[t]=o)&&(!p.skip_bound&&p.bound[t]&&p.bound[t](o),m&&U(n,t)),e}):[],p.update(),m=!0,o(p.before_update),p.fragment=!!r&&r(p.ctx),e.target){if(e.hydrate){const t=function(t){return Array.from(t.childNodes)}(e.target);p.fragment&&p.fragment.l(t),t.forEach(f)}else p.fragment&&p.fragment.c();e.intro&&L(n.$$.fragment),z(n,e.target,e.anchor),I()}v(l)}class X{$destroy(){G(this,1),this.$destroy=t}$on(t,n){const e=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return e.push(n),()=>{const t=e.indexOf(n);-1!==t&&e.splice(t,1)}}$set(t){var n;this.$$set&&(n=t,0!==Object.keys(n).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}var Y=function(t,n){return t(n={exports:{}},n.exports),n.exports}((function(t){!function(){e.SKIP={},e.lift=function(){var t=arguments[0],n=Array.prototype.slice.call(arguments,1);return o(n).map((function(n){return t.apply(void 0,n)}))},e.scan=function(t,n,i){var o=i.map((function(i){var o=t(n,i);return o!==e.SKIP&&(n=o),o}));return o(n),o},e.merge=o,e.combine=i,e.scanMerge=function(t,n){var e=t.map((function(t){return t[0]})),o=i((function(){var i=arguments[arguments.length-1];return e.forEach((function(e,o){i.indexOf(e)>-1&&(n=t[o][1](n,e()))})),n}),e);return o(n),o},e["fantasy-land/of"]=e;var n=!1;function e(t){var n,o=[],r=[];function a(n){return arguments.length&&n!==e.SKIP&&(t=n,s(a)&&(a._changing(),a._state="active",o.forEach((function(n,e){n(r[e](t))})))),t}function c(){return(n=e()).map((function(t){return!0===t&&(a._parents.forEach((function(t){t._unregisterChild(a)})),a._state="ended",a._parents.length=o.length=r.length=0),t})),n}return a.constructor=e,a._state=arguments.length&&t!==e.SKIP?"active":"pending",a._parents=[],a._changing=function(){s(a)&&(a._state="changing"),o.forEach((function(t){t._changing()}))},a._map=function(n,i){var s=i?e():e(n(t));return s._parents.push(a),o.push(s),r.push(n),s},a.map=function(t){return a._map(t,"active"!==a._state)},a.toJSON=function(){return null!=t&&"function"==typeof t.toJSON?t.toJSON():t},a["fantasy-land/map"]=a.map,a["fantasy-land/ap"]=function(t){return i((function(t,n){return t()(n())}),[t,a])},a._unregisterChild=function(t){var n=o.indexOf(t);-1!==n&&(o.splice(n,1),r.splice(n,1))},Object.defineProperty(a,"end",{get:function(){return n||c()}}),a}function i(t,n){var i=n.every((function(t){if(t.constructor!==e)throw new Error("Ensure that each item passed to stream.combine/stream.merge/lift is a stream");return"active"===t._state})),o=i?e(t.apply(null,n.concat([n]))):e(),s=[],r=n.map((function(e){return e._map((function(r){return s.push(e),(i||n.every((function(t){return"pending"!==t._state})))&&(i=!0,o(t.apply(null,n.concat([s]))),s=[]),r}),!0)})),a=o.end.map((function(t){!0===t&&(r.forEach((function(t){t.end(!0)})),a.end(!0))}));return o}function o(t){return i((function(){return t.map((function(t){return t()}))}),t)}function s(t){return"pending"===t._state||"active"===t._state||"changing"===t._state}Object.defineProperty(e,"HALT",{get:function(){return n||console.log("HALT is deprecated and has been renamed to SKIP"),n=!0,e.SKIP}}),t.exports=e}()}));const Q=(...t)=>n=>t.filter(Boolean).reduce((t,n)=>n(t),n),Z=({domElement:t,prop:n})=>{const e=document.defaultView;if(e){const i=e.getComputedStyle(t);if(i)return i.getPropertyValue(n)}},tt="show",nt="hide",et=(t,n,e)=>{const i=e[n]||{};Object.keys(i).forEach(n=>{const e=i[n].toString();t.style[n]=e})},it=(t,n)=>t.split(/ /).map(t=>`${t}-${n}`),ot=(t,n,e,i)=>{if(n.styles){const o=((t,n)=>("function"==typeof n?n(t):n)||{})(t,n.styles);et(t,"default",o),i&&(t=>{t.style.transitionDuration="0ms"})(t),et(t,e,o)}if(n.className){const i={showStart:it(n.className,"show-start"),showEnd:it(n.className,"show-end"),hideStart:it(n.className,"hide-start"),hideEnd:it(n.className,"hide-end")};((t,n)=>{t.classList.remove(...n.showStart,...n.showEnd,...n.hideStart,...n.hideEnd)})(t,i),i&&t.classList.add(...i[e])}t.scrollTop},st={showStart:{nextStep:"showEnd"},showEnd:{nextStep:void 0},hideStart:{nextStep:"hideEnd"},hideEnd:{nextStep:void 0}},rt=(t,n)=>{const e=t.domElement;if(!e)return Promise.resolve("no domElement");clearTimeout(t.__transitionTimeoutId__);let i=n===tt?"showStart":"hideStart";return new Promise(n=>{ot(e,t,i,"showStart"===i),setTimeout(()=>{const o=st[i].nextStep;if(o){i=o,ot(e,t,i);const s=(t=>{const n=Z({domElement:t,prop:"transition-duration"}),e=void 0!==n?at(n):0,i=Z({domElement:t,prop:"transition-delay"});return e+(void 0!==i?at(i):0)})(e);t.__transitionTimeoutId__=setTimeout(n,s)}},0)})},at=t=>{const n=parseFloat(t)*(-1===t.indexOf("ms")?1e3:1);return isNaN(n)?0:n},ct=(t,n)=>{const e=((t,n)=>n.find(n=>n.id===t))(t,n);return n.indexOf(e)},ut=(t,n)=>[n,t.id,t.spawn].filter(Boolean).join("-"),lt={initialState:{store:{}},actions:t=>({add:(n,e)=>{t(i=>{const o=i.store[n]||[];return i.store[n]=[...o,e],e.timer&&e.timer.states.map(()=>lt.actions(t).refresh()),i})},remove:(n,e)=>{t(t=>{const i=t.store[n]||[],o=((t,n)=>{const e=ct(t,n);return-1!==e&&n.splice(e,1),n})(e,i);return t.store[n]=o,t})},replace:(n,e,i)=>{t(t=>{const o=t.store[n]||[];if(o){const s=ct(e,o);-1!==s&&(o[s]=i,t.store[n]=[...o])}return t})},removeAll:n=>{t(t=>(t.store[n]=[],t))},store:(n,e)=>{t(t=>(t.store[n]=[...e],t))},refresh:()=>{t(t=>({...t}))}}),selectors:t=>{const n={getStore:()=>t().store,find:(n,e)=>{const i=t().store[n]||[],o=ut(e,n),s=i.find(t=>t.id===o);return s?{just:s}:{nothing:void 0}},getAll:(n,e)=>{const i=t().store[n]||[],o=void 0!==e?e.spawn:void 0,s=void 0!==e?e.id:void 0,r=void 0!==o?i.filter(t=>t.identityOptions.spawn===o):i;return void 0!==s?r.filter(t=>t.identityOptions.id===s):r},getCount:(t,e)=>n.getAll(t,e).length};return n}},dt=Y(),ft=Y.scan((t,n)=>n(t),{...lt.initialState},dt),pt={...lt.actions(dt)},mt={...lt.selectors(ft)},gt={callback:()=>{},isPaused:!1,onAbort:()=>{},onDone:()=>{},promise:void 0,remaining:void 0,startTime:void 0,timeoutFn:()=>{},timerId:void 0},ht=(t,n,e,i)=>{const o=()=>{n(),t.onDone(),i()};return{timeoutFn:o,promise:new Promise((n,e)=>{t.onDone=()=>n(),t.onAbort=()=>n()}),...t.isPaused?{}:{startTime:(new Date).getTime(),timerId:window.setTimeout(o,e),remaining:e}}},$t=t=>(window.clearTimeout(t.timerId),{timerId:gt.timerId}),wt=t=>({...$t(t)}),bt=t=>({...$t(t),isPaused:!0,remaining:vt(t)}),yt=(t,n)=>{window.clearTimeout(t.timerId);const e=n?Math.max(t.remaining||0,n):t.remaining;return{startTime:(new Date).getTime(),isPaused:!1,remaining:e,timerId:window.setTimeout(t.timeoutFn,e)}},vt=t=>0===t.remaining||void 0===t.remaining?t.remaining:t.remaining-((new Date).getTime()-(t.startTime||0)),_t=()=>{const t={initialState:gt,actions:n=>({start:(e,i)=>{n(o=>({...o,...$t(o),...ht(o,e,i,()=>t.actions(n).done()),...o.isPaused&&bt(o)}))},stop:()=>{n(t=>({...t,...wt(t),...gt}))},pause:()=>{n(t=>({...t,...!t.isPaused&&bt(t)}))},resume:t=>{n(n=>({...n,...n.isPaused&&yt(n,t)}))},abort:()=>{n(t=>(t.onAbort(),{...t,...$t(t)}))},done:()=>{n(t=>gt)},refresh:()=>{n(t=>({...t}))}}),selectors:t=>({isPaused:()=>t().isPaused,getRemaining:()=>{const n=t();return n.isPaused?n.remaining:vt(n)},getResultPromise:()=>t().promise})},n=Y(),e=Y.scan((t,n)=>n(t),{...t.initialState},n);return{states:e,actions:{...t.actions(n)},selectors:{...t.selectors(e)}}};let Ot=0;const St=0,xt=1,kt=2,Tt=t=>n=>void 0!==t.spawn?n.filter(n=>n.identityOptions.spawn===t.spawn):n,Et=t=>{let n=0;return t.map(t=>({item:t,queueCount:t.dialogicOptions.queued?n++:0})).filter(({queueCount:t})=>0===t).map(({item:t})=>t)},Pt=(t,n,e)=>{const i=n[t]||[];return 0==i.length?[]:Q(Tt(e),Et)(i)},At=(t,n={})=>({id:n.id||t.id,spawn:n.spawn||t.spawn}),Ct=(t,n={})=>{const e={id:n.dialogic?n.dialogic.id:void 0,spawn:n.dialogic?n.dialogic.spawn:void 0};return{identityOptions:At(t||{},e),dialogicOptions:{...t,...n.dialogic,__transitionTimeoutId__:0},passThroughOptions:(t=>{const n={...t};return delete n.dialogic,n})(n)}},jt=t=>n=>(e={})=>{const{identityOptions:i,dialogicOptions:o,passThroughOptions:s}=Ct(n,e);return new Promise(r=>{const a={willShow:t=>(o.willShow&&o.willShow(t),r(t)),willHide:t=>(o.willHide&&o.willHide(t),r(t)),didShow:t=>(o.didShow&&o.didShow(t),r(t)),didHide:t=>(o.didHide&&o.didHide(t),r(t))},c={ns:t,identityOptions:i,dialogicOptions:o,callbacks:a,passThroughOptions:s,id:ut(i,t),timer:o.timeout?_t():void 0,key:(Ot===Number.MAX_VALUE?0:Ot++).toString(),transitionState:St},u=mt.find(t,i);if(u.just&&o.toggle){const i=Nt(t)(n)(e);return r(i)}if(u.just&&!o.queued){const n=u.just,e=n.dialogicOptions,i={...c,key:n.key,transitionState:n.transitionState,dialogicOptions:e};pt.replace(t,n.id,i)}else pt.add(t,c);r(c)})},Nt=t=>n=>e=>{const{identityOptions:i,dialogicOptions:o,passThroughOptions:s}=Ct(n,e),r=mt.find(t,i);if(r.just){const n=r.just,e={...n,dialogicOptions:{...n.dialogicOptions,...o},passThroughOptions:{...n.passThroughOptions,passThroughOptions:s}};return pt.replace(t,n.id,e),e.transitionState!==kt?Gt(e):Promise.resolve(e)}return Promise.resolve()},It=t=>n=>n=>{const e=Lt(t,n).filter(t=>!!t.timer);return e.forEach(t=>t.timer&&t.timer.actions.pause()),Promise.all(e)},Mt=t=>n=>n=>{const e=n||{},i={id:e.id,spawn:e.spawn},o=Lt(t,i).filter(t=>!!t.timer);return o.forEach(t=>t.timer&&t.timer.actions.resume(e.minimumDuration)),Promise.all(o)},Dt=(t,n)=>e=>i=>o=>{const s=(t=>n=>e=>mt.find(t,At(n,e)))(e)(i)(o);return s.just&&s.just&&s.just.timer?s.just.timer.selectors[t]():n},Ht=Dt("isPaused",!1),Rt=Dt("getRemaining",void 0),qt=t=>n=>n=>!!Lt(t,n).length,Lt=(t,n)=>{const e=mt.getAll(t);let i;return i=n?Q(Tt(n),(t=>n=>void 0!==t.id?n.filter(n=>n.identityOptions.id===t.id):n)(n))(e):e,i},Ft=t=>n=>n=>{const e=Lt(t,n),i=[];return e.forEach(t=>{t.timer&&t.timer.actions.abort(),i.push(t)}),n?i.forEach(n=>{pt.remove(t,n.id)}):pt.removeAll(t),Promise.resolve(i)},Kt=(t,n)=>({...t,dialogicOptions:{...t.dialogicOptions,...n}}),Bt=t=>n=>n=>{const e=n||{},i={id:e.id,spawn:e.spawn},o=Lt(t,i),s=o.filter(t=>!e.queued&&!t.dialogicOptions.queued),r=o.filter(t=>e.queued||t.dialogicOptions.queued),a=[];if(s.forEach(t=>a.push(Gt(Kt(t,e)))),r.length>0){const[n]=r;pt.store(t,[n]),a.push(Gt(Kt(n,e)))}return Promise.all(a)},Jt=t=>n=>mt.getCount(t,n),Vt=(t,n)=>rt(t.dialogicOptions,n),zt=async function(t){return t.callbacks.willShow&&t.callbacks.willShow(t),t.transitionState!==xt&&(t.transitionState=xt,await Vt(t,tt)),t.callbacks.didShow&&t.callbacks.didShow(t),t.dialogicOptions.timeout&&t.timer&&await async function(t,n,e){return n.actions.start(()=>Gt(t),e),Dt("getResultPromise",void 0)}(t,t.timer,t.dialogicOptions.timeout),Promise.resolve(t)},Gt=async function(t){t.transitionState=kt,t.timer&&t.timer.actions.stop(),t.callbacks.willHide&&t.callbacks.willHide(t),await Vt(t,nt),t.callbacks.didHide&&t.callbacks.didHide(t);const n={...t};return pt.remove(t.ns,t.id),Promise.resolve(n)},Ut=({ns:t,queued:n,timeout:e})=>{const i="default_"+t,o="default_"+t,s={id:i,spawn:o,...n&&{queued:n},...void 0!==e&&{timeout:e}};return{ns:t,defaultId:i,defaultSpawn:o,defaultDialogicOptions:s,show:jt(t)(s),hide:Nt(t)(s),hideAll:Bt(t)(s),resetAll:Ft(t)(s),pause:It(t)(s),resume:Mt(t)(s),exists:qt(t)(s),getCount:Jt(t),isPaused:Ht(t)(s),getRemaining:Rt(t)(s)}},Wt=Ut({ns:"dialog"}),Xt=Ut({ns:"notification",queued:!0,timeout:3e3}),Yt=t=>{let n,e=void 0,i=!1;const o={id:t.id,spawn:t.spawn},s=()=>{const r=t.instance.getRemaining(o);e!==r&&(e=void 0===r?r:t.roundToSeconds?Math.round(Math.max(r,0)/1e3):Math.max(r,0)),t.callback(e),t.instance.exists(o)?i||(n=window.requestAnimationFrame(s)):(window.cancelAnimationFrame(n),i=!0)};n=window.requestAnimationFrame(s)},Qt=[];function Zt(n,e=t){let i;const o=[];function s(t){if(r(n,t)&&(n=t,i)){const t=!Qt.length;for(let t=0;t<o.length;t+=1){const e=o[t];e[1](),Qt.push(e,n)}if(t){for(let t=0;t<Qt.length;t+=2)Qt[t][0](Qt[t+1]);Qt.length=0}}}return{set:s,update:function(t){s(t(n))},subscribe:function(r,a=t){const c=[r,a];return o.push(c),1===o.length&&(i=e(s)||t),r(n),()=>{const t=o.indexOf(c);-1!==t&&o.splice(t,1),0===o.length&&(i(),i=null)}}}}function tn(n,e,i){const r=!Array.isArray(n),c=r?[n]:n,u=e.length<2;return{subscribe:Zt(i,n=>{let i=!1;const l=[];let d=0,f=t;const p=()=>{if(d)return;f();const i=e(r?l[0]:l,n);u?n(i):f=s(i)?i:t},m=c.map((t,n)=>a(t,t=>{l[n]=t,d&=~(1<<n),i&&p()},()=>{d|=1<<n}));return i=!0,p(),function(){o(m),f()}}).subscribe}}const nn={...Zt(ft),...mt};ft.map(t=>nn.set({...t,...mt}));const en=t=>n=>tn(nn,()=>mt.getCount(t,n)),on=t=>n=>e=>tn(nn,()=>Ht(t)(n)(e)),sn=t=>n=>e=>tn(nn,()=>qt(t)(n)(e)),rn={...Wt,getCount:t=>en(Wt.ns)(t),isPaused:t=>on(Wt.ns)(Wt.defaultDialogicOptions)(t),exists:t=>sn(Wt.ns)(Wt.defaultDialogicOptions)(t)},an={...Xt,getCount:t=>en(Xt.ns)(t),isPaused:t=>on(Xt.ns)(Xt.defaultDialogicOptions)(t),exists:t=>sn(Xt.ns)(Xt.defaultDialogicOptions)(t)},cn=t=>(n,e)=>{const i=mt.find(t,n.detail.identityOptions);var o;i.just&&(o=n.detail.domElement,i.just.dialogicOptions.domElement=o);const s=mt.find(t,n.detail.identityOptions);s.just&&e(s.just)};function un(t){let e,i,o;const s=[{show:t[4]},{hide:t[5]},t[0]];var r=t[1].component;function a(t){let e={};for(let t=0;t<s.length;t+=1)e=n(e,s[t]);return{props:e}}return r&&(i=new r(a())),{c(){e=p("div"),i&&V(i.$$.fragment),w(e,"class",t[3])},m(n,s){d(n,e,s),i&&z(i,e,null),t[7](e),o=!0},p(t,[n]){const o=49&n?B(s,[16&n&&{show:t[4]},32&n&&{hide:t[5]},1&n&&J(t[0])]):{};if(r!==(r=t[1].component)){if(i){R();const t=i;F(t.$$.fragment,1,0,()=>{G(t,1)}),q()}r?(i=new r(a()),V(i.$$.fragment),L(i.$$.fragment,1),z(i,e,null)):i=null}else r&&i.$set(o)},i(t){o||(i&&L(i.$$.fragment,t),o=!0)},o(t){i&&F(i.$$.fragment,t),o=!1},d(n){n&&f(e),i&&G(i),t[7](null)}}}function ln(t,n,e){const i=S();let o,{identityOptions:s}=n,{passThroughOptions:r}=n,{dialogicOptions:a}=n;const c=a?a.className:"",u=t=>i(t,{identityOptions:s,domElement:o});return O(()=>{u("mount")}),t.$$set=t=>{"identityOptions"in t&&e(6,s=t.identityOptions),"passThroughOptions"in t&&e(0,r=t.passThroughOptions),"dialogicOptions"in t&&e(1,a=t.dialogicOptions)},[r,a,o,c,()=>{u("show")},()=>{u("hide")},s,function(t){k[t?"unshift":"push"](()=>{o=t,e(2,o)})}]}class dn extends X{constructor(t){super(),W(this,t,ln,un,r,{identityOptions:6,passThroughOptions:0,dialogicOptions:1})}}function fn(t,n,e){const i=t.slice();return i[1]=n[e].identityOptions,i[6]=n[e].dialogicOptions,i[7]=n[e].passThroughOptions,i[8]=n[e].key,i[10]=e,i}function pn(t,n){let e,i,o;return i=new dn({props:{identityOptions:n[1],dialogicOptions:n[6],passThroughOptions:n[7]}}),i.$on("mount",n[3]),i.$on("show",n[4]),i.$on("hide",n[5]),{key:t,first:null,c(){e=h(),V(i.$$.fragment),this.first=e},m(t,n){d(t,e,n),z(i,t,n),o=!0},p(t,n){const e={};7&n&&(e.identityOptions=t[1]),7&n&&(e.dialogicOptions=t[6]),7&n&&(e.passThroughOptions=t[7]),i.$set(e)},i(t){o||(L(i.$$.fragment,t),o=!0)},o(t){F(i.$$.fragment,t),o=!1},d(t){t&&f(e),G(i,t)}}}function mn(t){let n,e,i=[],o=new Map,s=Pt(t[0],t[2].store,t[1]);const r=t=>t[8];for(let n=0;n<s.length;n+=1){let e=fn(t,s,n),a=r(e);o.set(a,i[n]=pn(a,e))}return{c(){for(let t=0;t<i.length;t+=1)i[t].c();n=h()},m(t,o){for(let n=0;n<i.length;n+=1)i[n].m(t,o);d(t,n,o),e=!0},p(t,[e]){if(63&e){const s=Pt(t[0],t[2].store,t[1]);R(),i=function(t,n,e,i,o,s,r,a,c,u,l,d){let f=t.length,p=s.length,m=f;const g={};for(;m--;)g[t[m].key]=m;const h=[],$=new Map,w=new Map;for(m=p;m--;){const t=d(o,s,m),a=e(t);let c=r.get(a);c?i&&c.p(t,n):(c=u(a,t),c.c()),$.set(a,h[m]=c),a in g&&w.set(a,Math.abs(m-g[a]))}const b=new Set,y=new Set;function v(t){L(t,1),t.m(a,l),r.set(t.key,t),l=t.first,p--}for(;f&&p;){const n=h[p-1],e=t[f-1],i=n.key,o=e.key;n===e?(l=n.first,f--,p--):$.has(o)?!r.has(i)||b.has(i)?v(n):y.has(o)?f--:w.get(i)>w.get(o)?(y.add(i),v(n)):(b.add(o),f--):(c(e,r),f--)}for(;f--;){const n=t[f];$.has(n.key)||c(n,r)}for(;p;)v(h[p-1]);return h}(i,e,r,1,t,s,o,n.parentNode,K,pn,n,fn),q()}},i(t){if(!e){for(let t=0;t<s.length;t+=1)L(i[t]);e=!0}},o(t){for(let t=0;t<i.length;t+=1)F(i[t]);e=!1},d(t){for(let n=0;n<i.length;n+=1)i[n].d(t);t&&f(n)}}}function gn(t,n,e){let i;c(t,nn,t=>e(2,i=t));let{identityOptions:o}=n,{ns:s}=n;const r=(t=>n=>cn(t)(n,zt))(s),a=(t=>n=>cn(t)(n,zt))(s),u=(t=>n=>cn(t)(n,Gt))(s);return t.$$set=t=>{"identityOptions"in t&&e(1,o=t.identityOptions),"ns"in t&&e(0,s=t.ns)},[s,o,i,r,a,u]}class hn extends X{constructor(t){super(),W(this,t,gn,mn,r,{identityOptions:1,ns:0})}}function $n(t){let n,e;return n=new hn({props:{identityOptions:t[1],ns:t[0]}}),{c(){V(n.$$.fragment)},m(t,i){z(n,t,i),e=!0},p(t,[e]){const i={};1&e&&(i.ns=t[0]),n.$set(i)},i(t){e||(L(n.$$.fragment,t),e=!0)},o(t){F(n.$$.fragment,t),e=!1},d(t){G(n,t)}}}function wn(t,n,e){let{instance:i}=n,{ns:o=i.ns}=n,{spawn:s}=n,{id:r}=n,{onMount:a}=n;const c={id:r||i.defaultId,spawn:s||i.defaultSpawn};return O(()=>{"function"==typeof a&&a()}),t.$$set=t=>{"instance"in t&&e(2,i=t.instance),"ns"in t&&e(0,o=t.ns),"spawn"in t&&e(3,s=t.spawn),"id"in t&&e(4,r=t.id),"onMount"in t&&e(5,a=t.onMount)},[o,c,i,s,r,a]}class bn extends X{constructor(t){super(),W(this,t,wn,$n,r,{instance:2,ns:0,spawn:3,id:4,onMount:5})}}function yn(t){let e,i;const o=[t[0],{instance:rn}];let s={};for(let t=0;t<o.length;t+=1)s=n(s,o[t]);return e=new bn({props:s}),{c(){V(e.$$.fragment)},m(t,n){z(e,t,n),i=!0},p(t,[n]){const i=1&n?B(o,[1&n&&J(t[0]),0&n&&{instance:rn}]):{};e.$set(i)},i(t){i||(L(e.$$.fragment,t),i=!0)},o(t){F(e.$$.fragment,t),i=!1},d(t){G(e,t)}}}function vn(t,e,i){return t.$$set=t=>{i(0,e=n(n({},e),u(t)))},[e=u(e)]}class _n extends X{constructor(t){super(),W(this,t,vn,yn,r,{})}}function On(t){let e,i;const o=[t[0],{instance:an}];let s={};for(let t=0;t<o.length;t+=1)s=n(s,o[t]);return e=new bn({props:s}),{c(){V(e.$$.fragment)},m(t,n){z(e,t,n),i=!0},p(t,[n]){const i=1&n?B(o,[1&n&&J(t[0]),0&n&&{instance:an}]):{};e.$set(i)},i(t){i||(L(e.$$.fragment,t),i=!0)},o(t){F(e.$$.fragment,t),i=!1},d(t){G(e,t)}}}function Sn(t,e,i){return t.$$set=t=>{i(0,e=n(n({},e),u(t)))},[e=u(e)]}class xn extends X{constructor(t){super(),W(this,t,Sn,On,r,{})}}function kn(n){let e,i,s,r,a,c,u,h,y,v,_,O,S,x,k,T,E=n[0].title+"",P=n[0].body+"";return{c(){e=p("div"),i=p("div"),s=p("div"),r=p("h2"),a=m(E),c=g(),u=p("div"),h=m(P),y=g(),v=p("footer"),_=p("div"),O=p("button"),O.innerHTML='<span class="mdc-button__label">Never mind</span>',S=g(),x=p("button"),x.innerHTML='<span class="mdc-button__label">Yes, retry</span>',w(r,"class","h2 mdc-dialog__title"),w(u,"class","mdc-dialog__content"),w(O,"class","mdc-button mdc-dialog__button"),w(x,"class","mdc-button mdc-dialog__button"),w(v,"class","mdc-dialog__actions"),w(i,"class","mdc-dialog__surface"),w(e,"class","mdc-dialog__container")},m(t,o){d(t,e,o),l(e,i),l(i,s),l(s,r),l(r,a),l(s,c),l(s,u),l(u,h),l(s,y),l(s,v),l(v,_),l(_,O),l(_,S),l(_,x),k||(T=[$(O,"click",n[1]),$(x,"click",n[2])],k=!0)},p(t,[n]){1&n&&E!==(E=t[0].title+"")&&b(a,E),1&n&&P!==(P=t[0].body+"")&&b(h,P)},i:t,o:t,d(t){t&&f(e),k=!1,o(T)}}}function Tn(t,e,i){return t.$$set=t=>{i(0,e=n(n({},e),u(t)))},[e=u(e),()=>{rn.hide(),e.onReject()},()=>{rn.hide(),e.onAccept()}]}class En extends X{constructor(t){super(),W(this,t,Tn,kn,r,{})}}function Pn(t){let e,i,o,s,r;const a=[t[0]];let c={};for(let t=0;t<a.length;t+=1)c=n(c,a[t]);return i=new En({props:c}),{c(){e=p("div"),V(i.$$.fragment),o=g(),s=p("div"),w(s,"class","mdc-dialog__scrim"),w(e,"class","mdc-dialog mdc-dialog--open"),w(e,"role","alertdialog"),w(e,"aria-modal","true"),w(e,"aria-labelledby","my-dialog-title"),w(e,"aria-describedby","my-dialog-content")},m(t,n){d(t,e,n),z(i,e,null),l(e,o),l(e,s),r=!0},p(t,[n]){const e=1&n?B(a,[J(t[0])]):{};i.$set(e)},i(t){r||(L(i.$$.fragment,t),r=!0)},o(t){F(i.$$.fragment,t),r=!1},d(t){t&&f(e),G(i)}}}function An(t,e,i){return t.$$set=t=>{i(0,e=n(n({},e),u(t)))},[e=u(e)]}class Cn extends X{constructor(t){super(),W(this,t,An,Pn,r,{})}}function jn(n){let e;return{c(){e=m("Can't send photo.")},m(t,n){d(t,e,n)},p:t,d(t){t&&f(e)}}}function Nn(t){let n,e,i;return{c(){n=m("Can't send photo. Retrying in "),e=m(t[0]),i=m(" seconds.")},m(t,o){d(t,n,o),d(t,e,o),d(t,i,o)},p(t,n){1&n&&b(e,t[0])},d(t){t&&f(n),t&&f(e),t&&f(i)}}}function In(n){let e,i,o,s,r,a;function c(t,n){return void 0!==t[0]?Nn:jn}let u=c(n),m=u(n);return{c(){e=p("div"),m.c(),i=g(),o=p("div"),s=p("button"),s.textContent="Retry now",w(e,"class","mdc-snackbar__label"),w(s,"class","button mdc-button mdc-snackbar__action"),w(o,"class","mdc-snackbar__actions")},m(t,c){d(t,e,c),m.m(e,null),d(t,i,c),d(t,o,c),l(o,s),r||(a=$(s,"click",n[1]),r=!0)},p(t,[n]){u===(u=c(t))&&m?m.p(t,n):(m.d(1),m=u(t),m&&(m.c(),m.m(e,null)))},i:t,o:t,d(t){t&&f(e),m.d(),t&&f(i),t&&f(o),r=!1,a()}}}function Mn(t,n,e){let i;Yt({instance:an,roundToSeconds:!0,callback:t=>{e(0,i=t)}});return[i,()=>{an.pause(),rn.show({dialogic:{component:Cn,className:"dialog"},title:"Retry sending?",body:"We have noticed a slow internet connection. Even when you retry now, sending may take longer than usual.",onAccept:()=>{an.hide(),an.resume()},onReject:()=>{an.resume({minimumDuration:2e3})}})}]}class Dn extends X{constructor(t){super(),W(this,t,Mn,In,r,{})}}function Hn(n){let e,i,o,s;return o=new Dn({}),{c(){e=p("div"),i=p("div"),V(o.$$.fragment),w(i,"class","mdc-snackbar__surface"),w(e,"class","mdc-snackbar mdc-snackbar--open")},m(t,n){d(t,e,n),l(e,i),z(o,i,null),s=!0},p:t,i(t){s||(L(o.$$.fragment,t),s=!0)},o(t){F(o.$$.fragment,t),s=!1},d(t){t&&f(e),G(o)}}}class Rn extends X{constructor(t){super(),W(this,t,null,Hn,r,{})}}function qn(n){let e,i,o,s=(void 0===n[0]?"0":n[0].toString())+"";return{c(){e=p("div"),i=p("span"),o=m(s),w(e,"class","remaining svelte-bf7089")},m(t,n){d(t,e,n),l(e,i),l(i,o)},p(t,[n]){1&n&&s!==(s=(void 0===t[0]?"0":t[0].toString())+"")&&b(o,s)},i:t,o:t,d(t){t&&f(e)}}}function Ln(t,n,e){let i,{instance:o}=n,{roundToSeconds:s}=n;return Yt({instance:o,roundToSeconds:s,callback:t=>{e(0,i=t)}}),t.$$set=t=>{"instance"in t&&e(1,o=t.instance),"roundToSeconds"in t&&e(2,s=t.roundToSeconds)},[i,o,s]}class Fn extends X{constructor(t){super(),W(this,t,Ln,qn,r,{instance:1,roundToSeconds:2})}}function Kn(n){let e,i,o,s,r;return s=new Fn({props:{instance:an,roundToSeconds:!1}}),{c(){e=p("div"),i=m("Remaining\n\t\t\t\t\t"),o=p("div"),V(s.$$.fragment),w(o,"class","detail"),w(e,"class","ui label")},m(t,n){d(t,e,n),l(e,i),l(e,o),z(s,o,null),r=!0},p:t,i(t){r||(L(s.$$.fragment,t),r=!0)},o(t){F(s.$$.fragment,t),r=!1},d(t){t&&f(e),G(s)}}}function Bn(t){let n,e,i,s,r,a,c,u,h,y,v,_,O,S,x,k,T,E,P,A,C,j,N,I,M,D,H,K,B,J,U,W,X,Y,Q,Z,tt,nt=t[2]&&Kn();return W=new _n({}),Y=new xn({}),{c(){n=p("div"),e=p("main"),i=p("h1"),i.textContent="Dialogic for Svelte demo",s=g(),r=p("div"),r.textContent="Add one or more notifications, then click on the Retry button in the message.",a=g(),c=p("div"),u=p("button"),u.textContent="Add notification",h=g(),y=p("button"),y.textContent="Pause",v=g(),_=p("button"),_.textContent="Resume",O=g(),S=p("button"),S.textContent="Hide all",x=g(),k=p("button"),k.textContent="Reset all",T=g(),E=p("div"),P=p("div"),A=m("Notifications\n\t\t\t\t"),C=p("div"),j=m(t[0]),N=g(),I=p("div"),M=m("Is paused\n\t\t\t\t"),D=p("div"),H=m(t[1]),K=g(),nt&&nt.c(),B=g(),J=p("footer"),J.innerHTML='Dialogic: manage dialogs and notifications. <a href="https://github.com/ArthurClemens/dialogic">Main documentation on GitHub</a>',U=g(),V(W.$$.fragment),X=g(),V(Y.$$.fragment),w(r,"class","message"),w(u,"class","ui button primary"),w(y,"class","ui button"),w(_,"class","ui button"),w(S,"class","ui button"),w(k,"class","ui button"),w(c,"class","ui message"),w(C,"class","detail"),w(P,"class","ui label"),w(D,"class","detail"),w(I,"class","ui label"),w(E,"class","ui message"),w(n,"class","page")},m(o,f){d(o,n,f),l(n,e),l(e,i),l(e,s),l(e,r),l(e,a),l(e,c),l(c,u),l(c,h),l(c,y),l(c,v),l(c,_),l(c,O),l(c,S),l(c,x),l(c,k),l(e,T),l(e,E),l(E,P),l(P,A),l(P,C),l(C,j),l(E,N),l(E,I),l(I,M),l(I,D),l(D,H),l(E,K),nt&&nt.m(E,null),l(n,B),l(n,J),d(o,U,f),z(W,o,f),d(o,X,f),z(Y,o,f),Q=!0,Z||(tt=[$(u,"click",t[6]),$(y,"click",t[7]),$(_,"click",t[8]),$(S,"click",t[9]),$(k,"click",t[10])],Z=!0)},p(t,[n]){(!Q||1&n)&&b(j,t[0]),(!Q||2&n)&&b(H,t[1]),t[2]?nt?(nt.p(t,n),4&n&&L(nt,1)):(nt=Kn(),nt.c(),L(nt,1),nt.m(E,null)):nt&&(R(),F(nt,1,1,()=>{nt=null}),q())},i(t){Q||(L(nt),L(W.$$.fragment,t),L(Y.$$.fragment,t),Q=!0)},o(t){F(nt),F(W.$$.fragment,t),F(Y.$$.fragment,t),Q=!1},d(t){t&&f(n),nt&&nt.d(),t&&f(U),G(W,t),t&&f(X),G(Y,t),Z=!1,o(tt)}}}function Jn(t,n,e){let i,o,s;const r=an.isPaused();c(t,r,t=>e(1,o=t));const a=an.exists();c(t,a,t=>e(2,s=t));const u=an.getCount();c(t,u,t=>e(0,i=t));return[i,o,s,r,a,u,()=>{an.show({dialogic:{component:Rn,className:"notification",timeout:4e3}})},()=>{an.pause()},()=>{an.resume()},()=>{an.hideAll()},()=>{an.resetAll()}]}return new class extends X{constructor(t){super(),W(this,t,Jn,Bn,r,{})}}({target:document.body})}));
