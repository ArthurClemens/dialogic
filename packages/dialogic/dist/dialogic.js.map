{"version":3,"file":"dialogic.js","sources":["../node_modules/uuid/lib/bytesToUuid.js","../node_modules/uuid/lib/rng-browser.js","../node_modules/uuid/v4.js","../node_modules/mithril/stream/stream.js"],"sourcesContent":["/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\nvar byteToHex = [];\nfor (var i = 0; i < 256; ++i) {\n  byteToHex[i] = (i + 0x100).toString(16).substr(1);\n}\n\nfunction bytesToUuid(buf, offset) {\n  var i = offset || 0;\n  var bth = byteToHex;\n  // join used to fix memory issue caused by concatenation: https://bugs.chromium.org/p/v8/issues/detail?id=3175#c4\n  return ([bth[buf[i++]], bth[buf[i++]], \n\tbth[buf[i++]], bth[buf[i++]], '-',\n\tbth[buf[i++]], bth[buf[i++]], '-',\n\tbth[buf[i++]], bth[buf[i++]], '-',\n\tbth[buf[i++]], bth[buf[i++]], '-',\n\tbth[buf[i++]], bth[buf[i++]],\n\tbth[buf[i++]], bth[buf[i++]],\n\tbth[buf[i++]], bth[buf[i++]]]).join('');\n}\n\nmodule.exports = bytesToUuid;\n","// Unique ID creation requires a high quality random # generator.  In the\n// browser this is a little complicated due to unknown quality of Math.random()\n// and inconsistent support for the `crypto` API.  We do the best we can via\n// feature-detection\n\n// getRandomValues needs to be invoked in a context where \"this\" is a Crypto\n// implementation. Also, find the complete implementation of crypto on IE11.\nvar getRandomValues = (typeof(crypto) != 'undefined' && crypto.getRandomValues && crypto.getRandomValues.bind(crypto)) ||\n                      (typeof(msCrypto) != 'undefined' && typeof window.msCrypto.getRandomValues == 'function' && msCrypto.getRandomValues.bind(msCrypto));\n\nif (getRandomValues) {\n  // WHATWG crypto RNG - http://wiki.whatwg.org/wiki/Crypto\n  var rnds8 = new Uint8Array(16); // eslint-disable-line no-undef\n\n  module.exports = function whatwgRNG() {\n    getRandomValues(rnds8);\n    return rnds8;\n  };\n} else {\n  // Math.random()-based (RNG)\n  //\n  // If all else fails, use Math.random().  It's fast, but is of unspecified\n  // quality.\n  var rnds = new Array(16);\n\n  module.exports = function mathRNG() {\n    for (var i = 0, r; i < 16; i++) {\n      if ((i & 0x03) === 0) r = Math.random() * 0x100000000;\n      rnds[i] = r >>> ((i & 0x03) << 3) & 0xff;\n    }\n\n    return rnds;\n  };\n}\n","var rng = require('./lib/rng');\nvar bytesToUuid = require('./lib/bytesToUuid');\n\nfunction v4(options, buf, offset) {\n  var i = buf && offset || 0;\n\n  if (typeof(options) == 'string') {\n    buf = options === 'binary' ? new Array(16) : null;\n    options = null;\n  }\n  options = options || {};\n\n  var rnds = options.random || (options.rng || rng)();\n\n  // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n  rnds[6] = (rnds[6] & 0x0f) | 0x40;\n  rnds[8] = (rnds[8] & 0x3f) | 0x80;\n\n  // Copy bytes to buffer, if provided\n  if (buf) {\n    for (var ii = 0; ii < 16; ++ii) {\n      buf[i + ii] = rnds[ii];\n    }\n  }\n\n  return buf || bytesToUuid(rnds);\n}\n\nmodule.exports = v4;\n","/* eslint-disable */\n;(function() {\n\"use strict\"\n/* eslint-enable */\nStream.SKIP = {}\nStream.lift = lift\nStream.scan = scan\nStream.merge = merge\nStream.combine = combine\nStream.scanMerge = scanMerge\nStream[\"fantasy-land/of\"] = Stream\n\nvar warnedHalt = false\nObject.defineProperty(Stream, \"HALT\", {\n\tget: function() {\n\t\twarnedHalt || console.log(\"HALT is deprecated and has been renamed to SKIP\");\n\t\twarnedHalt = true\n\t\treturn Stream.SKIP\n\t}\n})\n\nfunction Stream(value) {\n\tvar dependentStreams = []\n\tvar dependentFns = []\n\n\tfunction stream(v) {\n\t\tif (arguments.length && v !== Stream.SKIP) {\n\t\t\tvalue = v\n\t\t\tif (open(stream)) {\n\t\t\t\tstream._changing()\n\t\t\t\tstream._state = \"active\"\n\t\t\t\tdependentStreams.forEach(function(s, i) { s(dependentFns[i](value)) })\n\t\t\t}\n\t\t}\n\n\t\treturn value\n\t}\n\n\tstream.constructor = Stream\n\tstream._state = arguments.length && value !== Stream.SKIP ? \"active\" : \"pending\"\n\tstream._parents = []\n\n\tstream._changing = function() {\n\t\tif (open(stream)) stream._state = \"changing\"\n\t\tdependentStreams.forEach(function(s) {\n\t\t\ts._changing()\n\t\t})\n\t}\n\n\tstream._map = function(fn, ignoreInitial) {\n\t\tvar target = ignoreInitial ? Stream() : Stream(fn(value))\n\t\ttarget._parents.push(stream)\n\t\tdependentStreams.push(target)\n\t\tdependentFns.push(fn)\n\t\treturn target\n\t}\n\n\tstream.map = function(fn) {\n\t\treturn stream._map(fn, stream._state !== \"active\")\n\t}\n\n\tvar end\n\tfunction createEnd() {\n\t\tend = Stream()\n\t\tend.map(function(value) {\n\t\t\tif (value === true) {\n\t\t\t\tstream._parents.forEach(function (p) {p._unregisterChild(stream)})\n\t\t\t\tstream._state = \"ended\"\n\t\t\t\tstream._parents.length = dependentStreams.length = dependentFns.length = 0\n\t\t\t}\n\t\t\treturn value\n\t\t})\n\t\treturn end\n\t}\n\n\tstream.toJSON = function() { return value != null && typeof value.toJSON === \"function\" ? value.toJSON() : value }\n\n\tstream[\"fantasy-land/map\"] = stream.map\n\tstream[\"fantasy-land/ap\"] = function(x) { return combine(function(s1, s2) { return s1()(s2()) }, [x, stream]) }\n\n\tstream._unregisterChild = function(child) {\n\t\tvar childIndex = dependentStreams.indexOf(child)\n\t\tif (childIndex !== -1) {\n\t\t\tdependentStreams.splice(childIndex, 1)\n\t\t\tdependentFns.splice(childIndex, 1)\n\t\t}\n\t}\n\n\tObject.defineProperty(stream, \"end\", {\n\t\tget: function() { return end || createEnd() }\n\t})\n\n\treturn stream\n}\n\nfunction combine(fn, streams) {\n\tvar ready = streams.every(function(s) {\n\t\tif (s.constructor !== Stream)\n\t\t\tthrow new Error(\"Ensure that each item passed to stream.combine/stream.merge/lift is a stream\")\n\t\treturn s._state === \"active\"\n\t})\n\tvar stream = ready\n\t\t? Stream(fn.apply(null, streams.concat([streams])))\n\t\t: Stream()\n\n\tvar changed = []\n\n\tvar mappers = streams.map(function(s) {\n\t\treturn s._map(function(value) {\n\t\t\tchanged.push(s)\n\t\t\tif (ready || streams.every(function(s) { return s._state !== \"pending\" })) {\n\t\t\t\tready = true\n\t\t\t\tstream(fn.apply(null, streams.concat([changed])))\n\t\t\t\tchanged = []\n\t\t\t}\n\t\t\treturn value\n\t\t}, true)\n\t})\n\n\tvar endStream = stream.end.map(function(value) {\n\t\tif (value === true) {\n\t\t\tmappers.forEach(function(mapper) { mapper.end(true) })\n\t\t\tendStream.end(true)\n\t\t}\n\t\treturn undefined\n\t})\n\n\treturn stream\n}\n\nfunction merge(streams) {\n\treturn combine(function() { return streams.map(function(s) { return s() }) }, streams)\n}\n\nfunction scan(fn, acc, origin) {\n\tvar stream = origin.map(function(v) {\n\t\tvar next = fn(acc, v)\n\t\tif (next !== Stream.SKIP) acc = next\n\t\treturn next\n\t})\n\tstream(acc)\n\treturn stream\n}\n\nfunction scanMerge(tuples, seed) {\n\tvar streams = tuples.map(function(tuple) { return tuple[0] })\n\n\tvar stream = combine(function() {\n\t\tvar changed = arguments[arguments.length - 1]\n\t\tstreams.forEach(function(stream, i) {\n\t\t\tif (changed.indexOf(stream) > -1)\n\t\t\t\tseed = tuples[i][1](seed, stream())\n\t\t})\n\n\t\treturn seed\n\t}, streams)\n\n\tstream(seed)\n\n\treturn stream\n}\n\nfunction lift() {\n\tvar fn = arguments[0]\n\tvar streams = Array.prototype.slice.call(arguments, 1)\n\treturn merge(streams).map(function(streams) {\n\t\treturn fn.apply(undefined, streams)\n\t})\n}\n\nfunction open(s) {\n\treturn s._state === \"pending\" || s._state === \"active\" || s._state === \"changing\"\n}\n\nif (typeof module !== \"undefined\") module[\"exports\"] = Stream\nelse if (typeof window.m === \"function\" && !(\"stream\" in window.m)) window.m.stream = Stream\nelse window.m = {stream : Stream}\n\n}());\n"],"names":["getRandomValues","crypto","bind","window","msCrypto","rnds8","Uint8Array","module","rnds","Array","r","i","Math","random","byteToHex","toString","substr","buf","offset","bth","join","options","rng","ii","bytesToUuid","Stream","SKIP","lift","fn","arguments","merge","prototype","slice","call","map","streams","apply","undefined","scan","acc","origin","stream","v","next","combine","scanMerge","tuples","seed","tuple","changed","length","forEach","indexOf","warnedHalt","value","end","dependentStreams","dependentFns","open","_changing","_state","s","constructor","_parents","_map","ignoreInitial","target","push","toJSON","x","s1","s2","_unregisterChild","child","childIndex","splice","Object","defineProperty","get","p","ready","every","Error","concat","mappers","endStream","mapper","console","log"],"mappings":"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"}