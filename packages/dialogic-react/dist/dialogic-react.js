!function(e,i){"object"==typeof exports&&"undefined"!=typeof module?i(exports,require("react/jsx-runtime"),require("dialogic"),require("react"),require("use-stream")):"function"==typeof define&&define.amd?define(["exports","react/jsx-runtime","dialogic","react","use-stream"],i):i((e="undefined"!=typeof globalThis?globalThis:e||self).dialogicReact={},e.jsxRuntime,e.dialogic,e.react,e.useStream)}(this,(function(e,i,t,n,o){"use strict";const s=()=>{o.useStream({model:()=>({_:t.states}),defer:!0})},a=e=>{const t=n.useRef(),{className:o}=e.dialogicOptions,s=e.dialogicOptions.component;if(!s)throw new Error("Component missing in dialogic options.");const a=i=>{const n=t.current;void 0!==n&&i({detail:{identityOptions:e.identityOptions,domElement:n}})},c=n.useCallback(i=>{null!==i&&(t.current=i,a(e.onMount))},[]),r=e.passThroughOptions||{};return i.jsx("div",Object.assign({ref:c,className:o},{children:i.jsx(s,Object.assign({},r,{show:()=>{a(e.onShow)},hide:()=>{a(e.onHide)}}),void 0)}),void 0)},c=e=>(i,n)=>{const o=t.selectors.find(e,i.detail.identityOptions);o.just&&t.setDomElement(i.detail.domElement,o.just);const s=t.selectors.find(e,i.detail.identityOptions);s.just&&n(s.just)},r=e=>{const n=(o=e.ns,e=>c(o)(e,t.showItem));var o;const s=(e=>i=>c(e)(i,t.showItem))(e.ns),r=(e=>i=>c(e)(i,t.hideItem))(e.ns),d=e.identityOptions||{},l=t.filterCandidates(e.ns,t.selectors.getStore(),d);return i.jsx(i.Fragment,{children:l.map(e=>i.jsx(a,{identityOptions:e.identityOptions,dialogicOptions:e.dialogicOptions,passThroughOptions:e.passThroughOptions,onMount:n,onShow:s,onHide:r},e.key))},void 0)},d=e=>{var{instance:t}=e,o=function(e,i){var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&i.indexOf(n)<0&&(t[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)i.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(t[n[o]]=e[n[o]])}return t}(e,["instance"]);s();const a={id:o.id||t.defaultId,spawn:o.spawn||t.defaultSpawn};return n.useEffect(()=>{"function"==typeof o.onMount&&o.onMount()},[]),i.jsx(r,{identityOptions:a,ns:t.ns},void 0)};let l=0;const u=({isIgnore:e,isShow:i,isHide:t,instance:o,deps:s=[],props:a={}})=>{const[c]=n.useState(l++),r=Object.assign(Object.assign({},a),a.dialogic?{dialogic:Object.assign(Object.assign({},a.dialogic),{id:a.dialogic.id||c})}:{dialogic:{id:c}}),d=()=>{o.show(r)},u=()=>{o.hide(r)};return n.useEffect(()=>{e||void 0!==i&&(i?d():u())},[...s,i]),n.useEffect(()=>{e||void 0!==t&&t&&u()},[...s,t]),n.useEffect(()=>{if(!e)return()=>{u()}},[]),{show:d,hide:u}},g=e=>(u(e),null);Object.defineProperty(e,"Dialogic",{enumerable:!0,get:function(){return t.Dialogic}}),Object.defineProperty(e,"dialog",{enumerable:!0,get:function(){return t.dialog}}),Object.defineProperty(e,"notification",{enumerable:!0,get:function(){return t.notification}}),e.Dialog=e=>i.jsx(d,Object.assign({},e,{instance:t.dialog}),void 0),e.Dialogical=d,e.Notification=e=>i.jsx(d,Object.assign({},e,{instance:t.notification}),void 0),e.UseDialog=e=>i.jsx(g,Object.assign({},e,{instance:t.dialog}),void 0),e.UseDialogic=g,e.UseNotification=e=>i.jsx(g,Object.assign({},e,{instance:t.notification}),void 0),e.useDialog=e=>u(Object.assign(Object.assign({},e),{instance:t.dialog})),e.useDialogic=u,e.useDialogicState=s,e.useNotification=e=>u(Object.assign(Object.assign({},e),{instance:t.notification})),e.useRemaining=({instance:e,id:i,spawn:o,roundToSeconds:s})=>{const[a,c]=n.useState(void 0),r={id:i,spawn:o},d=!!e.exists(r);return n.useMemo(()=>{d&&t.remaining(Object.assign(Object.assign({},r),{instance:e,roundToSeconds:s,callback:e=>{c(e)}}))},[d]),[a]},Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=dialogic-react.js.map
