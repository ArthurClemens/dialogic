!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("dialogic"),require("react"),require("use-stream"),require("dialogic-hooks")):"function"==typeof define&&define.amd?define(["exports","dialogic","react","use-stream","dialogic-hooks"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).dialogicReact={},e.dialogic,e.React,e.useStream,e.dialogicHooks)}(this,(function(e,t,n,i,o){"use strict";function u(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var a=u(n),r=function(e){return function(n,i){var o=t.selectors.find(e,n.detail.identityOptions);o.just&&t.setDomElement(n.detail.domElement,o.just);var u=t.selectors.find(e,n.detail.identityOptions);u.just&&i(u.just)}},c=function(){return(c=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},s=function(e){var t=n.useRef(),i=e.dialogicOptions.className,o=e.dialogicOptions.component;if(!o)throw"Component missing in dialogic options.";var u=n.useCallback((function(e){null!==e&&(t.current=e,s())}),[]),r=function(n){var i=t.current;void 0!==i&&n({detail:{identityOptions:e.identityOptions,domElement:i}})},s=function(){r(e.onMount)};return a.default.createElement("div",{ref:u,className:i},a.default.createElement(o,c({},e.passThroughOptions,{show:function(){r(e.onShow)},hide:function(){r(e.onHide)}})))},f=function(e){var n,i=(n=e.ns,function(e){return r(n)(e,t.showItem)}),o=function(e){return function(n){return r(e)(n,t.showItem)}}(e.ns),u=function(e){return function(n){return r(e)(n,t.hideItem)}}(e.ns),c=e.identityOptions||{},f=t.filterCandidates(e.ns,t.selectors.getStore(),c);return a.default.createElement(a.default.Fragment,null,f.map((function(e){return a.default.createElement(s,{key:e.key,identityOptions:e.identityOptions,dialogicOptions:e.dialogicOptions,passThroughOptions:e.passThroughOptions,onMount:i,onShow:o,onHide:u})})))},l=function(){i.useStream({model:function(){return{_:t.states}},defer:!0})},d=function(e){return function(t){l();var i={id:t.id||e.defaultId,spawn:t.spawn||e.defaultSpawn};return n.useEffect((function(){"function"==typeof t.onMount&&t.onMount()}),[]),a.default.createElement(f,{identityOptions:i,ns:e.ns})}},p=o.sharedUseDialogic({useEffect:n.useEffect}),g=o.sharedUseDialog({useEffect:n.useEffect,dialog:t.dialog}),m=o.sharedUseNotification({useEffect:n.useEffect,notification:t.notification}),h=function(e){return p(e),null},y=d(t.dialog),O=d(t.notification);Object.defineProperty(e,"dialog",{enumerable:!0,get:function(){return t.dialog}}),Object.defineProperty(e,"notification",{enumerable:!0,get:function(){return t.notification}}),e.Dialog=y,e.Dialogical=d,e.Notification=O,e.UseDialog=function(e){return a.default.createElement(h,c({},e,{instance:t.dialog}))},e.UseDialogic=h,e.UseNotification=function(e){return a.default.createElement(h,c({},e,{instance:t.notification}))},e.useDialog=g,e.useDialogic=p,e.useDialogicState=l,e.useNotification=m,e.useRemaining=function(e){var i=n.useState(void 0),o=i[0],u=i[1],a=n.useRef(!1);return n.useEffect((function(){return t.remaining({instance:e.instance,roundToSeconds:e.roundToSeconds,callback:function(e){a.current||u(e)}}),function(){a.current=!0}}),[]),[o]},Object.defineProperty(e,"__esModule",{value:!0})}));
