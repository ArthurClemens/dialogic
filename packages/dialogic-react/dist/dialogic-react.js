!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("dialogic"),require("react"),require("use-stream"),require("dialogic-hooks")):"function"==typeof define&&define.amd?define(["exports","dialogic","react","use-stream","dialogic-hooks"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).dialogicReact={},e.dialogic,e.React,e.useStream,e.dialogicHooks)}(this,(function(e,t,i,o,n){"use strict";function s(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var a=s(i);const c=e=>(i,o)=>{const n=t.selectors.find(e,i.detail.identityOptions);n.just&&t.setDomElement(i.detail.domElement,n.just);const s=t.selectors.find(e,i.detail.identityOptions);s.just&&o(s.just)},u=e=>{const t=i.useRef(),o=e.dialogicOptions.className,n=e.dialogicOptions.component;if(!n)throw"Component missing in dialogic options.";const s=i.useCallback(e=>{null!==e&&(t.current=e,u())},[]),c=i=>{const o=t.current;void 0!==o&&i({detail:{identityOptions:e.identityOptions,domElement:o}})},u=()=>{c(e.onMount)};return a.default.createElement("div",{ref:s,className:o},a.default.createElement(n,Object.assign({},e.passThroughOptions,{show:()=>{c(e.onShow)},hide:()=>{c(e.onHide)}})))},l=e=>{const i=(o=e.ns,e=>c(o)(e,t.showItem));var o;const n=(e=>i=>c(e)(i,t.showItem))(e.ns),s=(e=>i=>c(e)(i,t.hideItem))(e.ns),l=e.identityOptions||{},d=t.filterCandidates(e.ns,t.selectors.getStore(),l);return a.default.createElement(a.default.Fragment,null,d.map(e=>a.default.createElement(u,{key:e.key,identityOptions:e.identityOptions,dialogicOptions:e.dialogicOptions,passThroughOptions:e.passThroughOptions,onMount:i,onShow:n,onHide:s})))},d=()=>{o.useStream({model:()=>({_:t.states}),defer:!0})},r=e=>t=>{d();const o={id:t.id||e.defaultId,spawn:t.spawn||e.defaultSpawn};return i.useEffect(()=>{"function"==typeof t.onMount&&t.onMount()},[]),a.default.createElement(l,{identityOptions:o,ns:e.ns})},f=n.sharedUseDialogic({useEffect:i.useEffect,useState:i.useState}),g=n.sharedUseDialog({useEffect:i.useEffect,useState:i.useState,dialog:t.dialog}),p=n.sharedUseNotification({useEffect:i.useEffect,useState:i.useState,notification:t.notification}),m=e=>(f(e),null),h=n.sharedUseRemaining({useState:i.useState,useMemo:i.useMemo}),O=r(t.dialog),y=r(t.notification);Object.defineProperty(e,"dialog",{enumerable:!0,get:function(){return t.dialog}}),Object.defineProperty(e,"notification",{enumerable:!0,get:function(){return t.notification}}),e.Dialog=O,e.Dialogical=r,e.Notification=y,e.UseDialog=e=>a.default.createElement(m,Object.assign({},e,{instance:t.dialog})),e.UseDialogic=m,e.UseNotification=e=>a.default.createElement(m,Object.assign({},e,{instance:t.notification})),e.useDialog=g,e.useDialogic=f,e.useDialogicState=d,e.useNotification=p,e.useRemaining=h,Object.defineProperty(e,"__esModule",{value:!0})}));
