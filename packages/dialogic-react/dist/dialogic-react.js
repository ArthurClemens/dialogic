!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("dialogic"),require("react"),require("use-stream"),require("dialogic-hooks")):"function"==typeof define&&define.amd?define(["exports","dialogic","react","use-stream","dialogic-hooks"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).dialogicReact={},e.dialogic,e.React,e.useStream,e.dialogicHooks)}(this,(function(e,t,n,i,o){"use strict";function a(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var u=a(n),s=function(e){return function(n,i){var o=t.selectors.find(e,n.detail.identityOptions);o.just&&t.setDomElement(n.detail.domElement,o.just);var a=t.selectors.find(e,n.detail.identityOptions);a.just&&i(a.just)}},r=function(){return(r=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},c=function(e){var t=n.useRef(),i=e.dialogicOptions.className,o=e.dialogicOptions.component;if(!o)throw"Component missing in dialogic options.";var a=n.useCallback((function(e){null!==e&&(t.current=e,c())}),[]),s=function(n){var i=t.current;void 0!==i&&n({detail:{identityOptions:e.identityOptions,domElement:i}})},c=function(){s(e.onMount)};return u.default.createElement("div",{ref:a,className:i},u.default.createElement(o,r({},e.passThroughOptions,{show:function(){s(e.onShow)},hide:function(){s(e.onHide)}})))},f=function(e){var n,i=(n=e.ns,function(e){return s(n)(e,t.showItem)}),o=function(e){return function(n){return s(e)(n,t.showItem)}}(e.ns),a=function(e){return function(n){return s(e)(n,t.hideItem)}}(e.ns),r=e.identityOptions||{},f=t.filterCandidates(e.ns,t.selectors.getStore(),r);return u.default.createElement(u.default.Fragment,null,f.map((function(e){return u.default.createElement(c,{key:e.key,identityOptions:e.identityOptions,dialogicOptions:e.dialogicOptions,passThroughOptions:e.passThroughOptions,onMount:i,onShow:o,onHide:a})})))},l=function(){i.useStream({model:function(){return{_:t.states}},defer:!0})},d=function(e){return function(t){l();var i={id:t.id||e.defaultId,spawn:t.spawn||e.defaultSpawn};return n.useEffect((function(){"function"==typeof t.onMount&&t.onMount()}),[]),u.default.createElement(f,{identityOptions:i,ns:e.ns})}},p=o.sharedUseDialogic({useEffect:n.useEffect,useState:n.useState}),g=o.sharedUseDialog({useEffect:n.useEffect,useState:n.useState,dialog:t.dialog}),m=o.sharedUseNotification({useEffect:n.useEffect,useState:n.useState,notification:t.notification}),h=function(e){return p(e),null},y=o.sharedUseRemaining({useState:n.useState,useMemo:n.useMemo}),O=d(t.dialog),E=d(t.notification);Object.defineProperty(e,"dialog",{enumerable:!0,get:function(){return t.dialog}}),Object.defineProperty(e,"notification",{enumerable:!0,get:function(){return t.notification}}),e.Dialog=O,e.Dialogical=d,e.Notification=E,e.UseDialog=function(e){return u.default.createElement(h,r({},e,{instance:t.dialog}))},e.UseDialogic=h,e.UseNotification=function(e){return u.default.createElement(h,r({},e,{instance:t.notification}))},e.useDialog=g,e.useDialogic=p,e.useDialogicState=l,e.useNotification=m,e.useRemaining=y,Object.defineProperty(e,"__esModule",{value:!0})}));
