{"version":3,"file":"dialogic-svelte.js","sources":["../src/store.js","../src/dialog.js","../src/notification.js","../src/instanceEvents.js","../src/Instance.svelte","../src/Wrapper.svelte","../src/Dialogical.svelte","../src/Dialog.svelte","../src/Notification.svelte","../src/UseDialogic.svelte","../src/UseDialog.svelte"],"sourcesContent":["import { writable, derived } from 'svelte/store';\nimport {\n  states,\n  selectors,\n  isPaused as _isPaused,\n  exists as _isDisplayed,\n} from 'dialogic';\n\nexport const appState = {\n  ...writable(states),\n  ...selectors,\n};\n\nstates.map(state =>\n  appState.set({\n    ...state,\n    ...selectors,\n  }),\n);\n\nexport const getCount = ns => identityOptions =>\n  derived(appState, () => selectors.getCount(ns, identityOptions));\n\nexport const isPaused = ns => defaultDialogicOptions => identityOptions =>\n  derived(appState, () =>\n    _isPaused(ns)(defaultDialogicOptions)(identityOptions),\n  );\n\nexport const exists = ns => defaultDialogicOptions => identityOptions =>\n  derived(appState, () =>\n    _isDisplayed(ns)(defaultDialogicOptions)(identityOptions),\n  );\n","import { dialog as _dialog } from 'dialogic';\nimport { getCount, isPaused, exists } from './store'; // Access Svelte's store\n\nexport const dialog = {\n  ..._dialog,\n  getCount: identityOptions => getCount(_dialog.ns)(identityOptions),\n  isPaused: identityOptions =>\n    isPaused(_dialog.ns)(_dialog.defaultDialogicOptions)(identityOptions),\n  exists: identityOptions =>\n    exists(_dialog.ns)(_dialog.defaultDialogicOptions)(identityOptions),\n};\n","import { notification as _notification } from 'dialogic';\nimport { getCount, isPaused, exists } from './store'; // Access Svelte's store\n\nexport const notification = {\n  ..._notification,\n  getCount: identityOptions => getCount(_notification.ns)(identityOptions),\n  isPaused: identityOptions =>\n    isPaused(_notification.ns)(_notification.defaultDialogicOptions)(\n      identityOptions,\n    ),\n  exists: identityOptions =>\n    exists(_notification.ns)(_notification.defaultDialogicOptions)(\n      identityOptions,\n    ),\n};\n","import { showItem, hideItem, selectors, setDomElement } from 'dialogic';\n\nexport const handleDispatch = ns => (event, fn) => {\n  // Update dispatching item:\n  const maybeItem = selectors.find(ns, event.detail.identityOptions);\n  if (maybeItem.just) {\n    setDomElement(event.detail.domElement, maybeItem.just);\n  }\n  // Find item to transition:\n  const maybeTransitioningItem = selectors.find(\n    ns,\n    event.detail.identityOptions,\n  );\n  if (maybeTransitioningItem.just) {\n    fn(maybeTransitioningItem.just);\n  }\n};\n\nexport const onInstanceMounted = ns => event =>\n  handleDispatch(ns)(event, showItem);\n\nexport const onShowInstance = ns => event =>\n  handleDispatch(ns)(event, showItem);\n\nexport const onHideInstance = ns => event =>\n  handleDispatch(ns)(event, hideItem);\n","<script>\n  import { onMount, createEventDispatcher } from \"svelte\";\n\n  const dispatch = createEventDispatcher();\n\n  // DOM bindings\n  let domElement;\n\n  export let identityOptions;\n  export let passThroughOptions;\n  export let dialogicOptions;\n\n  const className = dialogicOptions ? dialogicOptions.className : '';\n\n  const dispatchTransition = (name) =>\n    dispatch(name, {\n      identityOptions,\n      domElement\n    });\n\n  const show = () => {\n    dispatchTransition(\"show\");\n  };\n\n  const hide = () => {\n    dispatchTransition(\"hide\");\n  };\n\n  onMount(() => {\n    dispatchTransition(\"mount\");\n  });\n\n</script>\n\n<div \n  class={className}\n  bind:this={domElement}\n>\n  <svelte:component this={dialogicOptions.component} {show} {hide} {...passThroughOptions} />\n</div>\n\n","\n<script>\n  import { appState } from \"./store\";\n  import { filterCandidates } from \"dialogic\";\n  import { onInstanceMounted, onShowInstance, onHideInstance } from \"./instanceEvents\";\n  import Instance from \"./Instance.svelte\";\n\n  export let identityOptions;\n  export let ns;\n\n  const nsOnInstanceMounted = onInstanceMounted(ns);\n  const nsOnShowInstance = onShowInstance(ns);\n  const nsOnHideInstance = onHideInstance(ns);\n  \n</script>\n\n{#each filterCandidates(ns, $appState.store, identityOptions) as { identityOptions, dialogicOptions, passThroughOptions, key }, index(key)}\n  <Instance\n    {identityOptions}\n    {dialogicOptions}\n    {passThroughOptions}\n    on:mount={nsOnInstanceMounted}\n    on:show={nsOnShowInstance}\n    on:hide={nsOnHideInstance}\n  />\n{/each}\n","<script>\n  import { onMount as svelteOnMount } from 'svelte';\n  import Wrapper from './Wrapper.svelte';\n\n  export let instance;\n  export let ns = instance.ns;\n  export let spawn = undefined;\n  export let id = undefined;\n  export let onMount = undefined;\n\n  const identityOptions = {\n    id: id || instance.defaultId,\n    spawn: spawn || instance.defaultSpawn,\n  };\n\n  svelteOnMount(() => {\n    if (typeof onMount === 'function') {\n      onMount();\n    }\n  });\n</script>\n\n<Wrapper {identityOptions} {ns} />\n","<script>\n  import { dialog } from './dialog';\n  import Dialogical from './Dialogical.svelte';\n</script>\n\n<Dialogical {...$$props} instance={dialog} />\n","<script>\n  import { notification } from './notification';\n  import Dialogical from './Dialogical.svelte';\n</script>\n\n<Dialogical {...$$props} instance={notification} />\n","<script context=\"module\">\n  let useDialogicCounter = 0;\n  const useEffect = subscribe => ({ subscribe });\n</script>\n\n<script>\n  import { onMount } from 'svelte';\n\n  const id = useDialogicCounter++;\n\n  export let props;\n  export let isShow = undefined;\n  export let isHide = undefined;\n  export let isIgnore = undefined;\n  export let deps;\n  export let instance;\n\n  // Make augProps reactive\n  $: augProps = {\n    ...props,\n    ...(props.dialogic\n      ? {\n          dialogic: {\n            ...props.dialogic,\n            id: props.dialogic.id || id,\n          },\n        }\n      : {\n          dialogic: {\n            id,\n          },\n        }),\n  };\n\n  const showInstance = () => {\n    instance.show(augProps);\n  };\n\n  const hideInstance = () => {\n    instance.hide(augProps);\n  };\n\n  let effect;\n  $: effect = useEffect(() => {\n    let _deps = deps; // consume variable for reactivity\n    if (!isIgnore) {\n      if (isShow !== undefined) {\n        if (isShow) {\n          showInstance();\n        } else {\n          hideInstance();\n        }\n      } else if (isHide !== undefined) {\n        if (isHide) {\n          hideInstance();\n        }\n      }\n    }\n\n    return () => {\n      // required\n    };\n  });\n\n  $: $effect;\n\n  onMount(() => {\n    return () => {\n      hideInstance();\n    };\n  });\n</script>\n","<script>\n  import { dialog } from 'dialogic';\n  import UseDialogic from './UseDialogic.svelte';\n</script>\n\n<UseDialogic instance={dialog} {...$$props} />\n"],"names":["_isPaused","_isDisplayed","_dialog","_notification","onMount","svelteOnMount","dialog"],"mappings":"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"}